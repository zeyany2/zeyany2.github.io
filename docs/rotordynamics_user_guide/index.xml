<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>DOC REPO – MSC Nastran manuals</title>
    <link>//uildDrafts:1313/docs/rotordynamics_user_guide/</link>
    <description>Recent content in MSC Nastran manuals on DOC REPO</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    
	  <atom:link href="//uildDrafts:1313/docs/rotordynamics_user_guide/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>User&#39;s Manual P1</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_001/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_001/</guid>
      <description>
        
        
        &lt;p&gt;MSC Nastran 202 4.1
Rotordynamics User’s GuideMSC Nastran Rotordynamics User’s Guide&lt;/p&gt;
&lt;p&gt;Worldwide Web
&lt;a href=&#34;https://www.hexagon.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.hexagon.com&lt;/a&gt;
Support
&lt;a href=&#34;https://simcompanion.hexagon.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://simcompanion.hexagon.com&lt;/a&gt;
Disclaimer
Hexagon reserves the right to make changes in specifications and other information contained in this document without prior notice.
The concepts, methods, and examples presented in this text are for illustrative and educational purposes only, and are not intended
to be exhaustive or to apply to any particular engineering problem or design. Hexagon assumes no liability or responsibility to any
person or company for direct or indirect damages resulting from the use of any information contained herein.
User Documentation: Copyright 2024 Hexagon AB and/or its subsidiaries. All Rights Reserved.
This notice shall be marked on any reproduction of this documentation, in whole or in part. Any reproduction or distribution of this
document, in whole or in part, without the prior written consent of Hexagon is prohibited.
This software may contain certain third-party software that is protected by copyright and licensed from Hexagon suppliers. Additional
terms and conditions and/or notices may apply for certain third party software. Such additional third party software terms and
conditions and/or notices may be set forth in documentation and/or at third-party software information  (or successor website designated
by Hexagon from time to time).
PCGLSS 8.0, Copyright © 1992-2016, Computational Applications and System Integration Inc. All rights reserved. PCGLSS 8.0 is
licensed from Computational Applications and System Integration Inc.
The Hexagon logo, Hexagon, MSC Software logo, MSC, Dytran, Marc, MSC Nastran, Patran, e -Xstream, Digimat, and Simulating
Reality are trademarks or registered trademarks of Hexagon AB and/or its subsidiaries in the United States and/or other countries.
NASTRAN is a registered trademark of NASA. FLEXlm and FlexNet Publisher are trademarks or registered trademarks of Flexera
Software. All other trademarks are the property of their respective owners.
Use, duplicate, or disclosure by the U.S. Government is subjected to restrictions as set forth in FAR 12.212 (Commercial Computer
Software) and DFARS 227.7202 (Commercial Computer Software and Commercial Computer Software Documentation), as
applicable.
U.S. Patent 9,361,413
May 16, 2024
NA:V202 4.1:Z:Z:Z:DC-ROTOR-PDFCorporate Office
Hexagon Manufacturing Intelligence, Inc. UK
78 Portsmouth Road Cedar House
Cobham, Surrey KT11 1HY
Telephone: (+44) 02070686555&lt;/p&gt;
&lt;p&gt;Documentation Feedback
At Hexagon Manufacturing Intelligence, we strive to produce the highest quality documentation and
welcome your feedback. If you have comments or suggestions about our documentation, write to us .
Please include the following information with your feedback:
Document name
Release/Version number
Chapter/Section name
Topic title (for Online Help)
Brief description of the content (for example, incomplete/incorrect information, grammatical
errors, information that requires clarification or more details and so on).
Your suggestions for correcting/improving documentation
Note:   The above mentioned e-mail address is only for providing documentation specific
feedback. If you have any technical problems, issues, or queries, please contact Technical
Support .&lt;/p&gt;
&lt;p&gt;C o n t e n t s
Rotordynamics User’s Guide
Contents
Main Index
Contents
Preface
About this Book  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
Organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
Developments Introduced  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
List of MSC Nastran Guides . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  8
Technical Support  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  9
Training and Internet Resources . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  9
1 Introduction
Introduction to Rotordynamics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  12
Need for Rotordynamic analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  12
Sources of Vibration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  13
Basic Concepts of Rotordynamics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  13
Reference frame  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  14
Rotor Symmetry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  15
Rotor Unbalance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  16
Whirl of Simple Rotor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  16
Stability  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  17
Asynchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  18
Synchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  18
Campbell Diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  18
Mode Tracking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  19
Critical Speed . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  20
Torsional Vibration  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  21
Overview of MSC Nastran Rotordynamics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  22
Benefits  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  23
2 Theoretical Formulation
Equations of Motion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  26&lt;/p&gt;
&lt;p&gt;Rotordynamics User’s Guide2
Main Index
Equations of Motion in Fixed Reference Frame  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  27
Damping in Stator  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  29
Damping in Rotor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  29
Equation of Motion in Rotating Reference Frame . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  31
Damping in Rotors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  32
Damping in Stator  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  32
Final Equations of Motion  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  33
3 Elements Supported for Rotordynamics Analysis
Rotor Modeling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  36
Rotordynamic Analysis using MSC Nastran . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  36
Sample Test Case  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  38
Model with ROTORG . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  39
Model using ROTORAX . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  42
Axisymmetric Harmonic Concentrated Mass Element . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  46
Axisymmetric Harmonic Concentrated Mass Element . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  46
Sample Problem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  46
Model with ROTOR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  48
Rotor Modeling Guidelines  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  52
Test Cases for Analysis in Fixed Reference Frame  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  63
Guidelines and Known Limitations  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  74
4 Damping and Bearing Models
Damping and Bearing Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  80
Structural Damping Options for Stator  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  80
Damping Options for Rotating Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  81
Circulation Matrix . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  83
Effect of Circulation Terms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  85
Controlling Rotor Damping and Circulation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  85
Linear Bearings  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  85
Cross Coupling in Bearing Supports  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  86
Nonlinear Bearings  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  90
Frequency Dependent Coefficients . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  94
Pre-requisites  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  100
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit
(SDK) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  101
Windows - Demonstrating using Simplified UDS - Nastran 2020 and SDK 2020 . . . . . . . . . . . . . . . . . . . .  101
Linux - Demonstrating using Simplified UDS - Nastran 2020 and SDK 2020 . . . . . . . . . . . . . . . . . . . . . . .  112
Guidelines and Limitations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  129&lt;/p&gt;
&lt;p&gt;3 Contents
Main Index
THPAD using CBUSH2D  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  129
Nonlinear Squeeze Film Damper, NLRSFD  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  130
Equations for SFD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  131
Squeeze Film Damper in CBUSH2D . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  133
NLBSH3D &amp;amp; LBSH3DG Nonlinear Tabular Lookup  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  134
Nonlinear Load Functions (NOLINi)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  143
5 Rotor Usage
Rotor Usage  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
Case Control Entries . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
RGYRO  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
CAMPBELL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
WR3, WR4, and WRH  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
GYROAVG  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  146
WHIRLOPT  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  147
Bulk Data Entries  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  147
RGYRO  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  147
REFROT  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  148
REFRTSE  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  148
RSPINR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  149
RSPINT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  151
ROTHYBD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  152
CAMPBLL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  152
DDVAL  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  154
UNBALNC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  154
6 Rotor Dynamics Example with Patran
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  160
Patran  Setup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  160
Example Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  161
Step 1: Initial ize Patran . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  162
Step 2: Create Geometric Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  163
Step 3: Defin e a Ma terial s. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  164
Step 4: Defin e Beam P roperties  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  165
Step 5: Genera te a Finite Element Mesh . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  168
Step 6: Constrain  the Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  171
Step 7: Define a R otor. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  173
Step 8: Set  Up the Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  175&lt;/p&gt;
&lt;p&gt;Rotordynamics User’s Guide4
Main Index
Step 9: Run M SC Nastran  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  179
Step 10: Plot M ode Shapes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  180
Step 11: Generat e a C ampbell Diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  185
7 Complex Eigenvalue Analysis for Rotors
Complex Eigenvalue Analysis for Rotors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  190
Equations of motion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  190
Synchronous Analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  192
Asynchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  194
Synchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  194
Solvers available for complex eigenvalue analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  196
Pardiso Solver . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  196
Mode Tracking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  197
Mode Identification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  198
Mode Identification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  199
Example  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  200
Analysis in Fixed Reference Frame . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  201
Mode Tracking Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  206
Analysis in Rotating Reference Frame  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  212
Use of Whirl Parameter for Asynchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  213
Analysis in Fixed and Rotating Reference Frame . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  214
Additional Options for Damping  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  216
Effect of differential stiffness  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  218
Summary for Equation of Motion  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  219
8 Frequency Response Analysis
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  224
Asynchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  224
Synchronous Analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  224
Equation used in the Analysis (Reference Frame)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  224
Asynchronous Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  224
Synchronous Analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  226
Effect of Damping  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  229
Effect of GYROAVG parameter  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  230
Frequency Dependent Bearings  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  231
Modal Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  232&lt;/p&gt;
&lt;p&gt;5 Contents
Main Index
9 Transient Response Analysis
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  238
Equation of motion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  238
Unbalance Loads for Transient Analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  240
Input file for transient analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  241
Effect of External Damping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  243
Effect of Internal Damping  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  245
Comparison with axisymmetric and 3D rotors  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  246
Usage of Nonlinear Elements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  247
Mass and speed correction for Unbalance Loads . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  249
Rotating Frame Transient Analysis  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  254
Circulation terms in rotating reference system  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  254
10 Nonlinear Frequency Response
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  258
User Interface  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  259
File Management Section (FMS)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  259
Executive Section . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  259
Case Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  260
Parameter  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  260
Bulk Data Entries  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  260
Example:  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  264
Remarks : . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  265
Analysis Setup  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  266
Parameters for controlling the analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  267
Handling Non-Convergence in Nonlinear Harmonic Response . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  268
Comments on Nonlinear Forces  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  269
Theoretical Details  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  270
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  276
SOL 128 QR Decomposition Procedure Approach . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  276
Sample definition  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  277
Guidelines and Limitation  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  277
Examples  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  277
SOL128 Post Processing features. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  279
User Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  279
NLFREQC  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  280
Guidelines and Limitation  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  283
Examples  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  286&lt;/p&gt;
&lt;p&gt;Rotordynamics User’s Guide6
Main Index
Example 1  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  286
Example 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  289
Example 3  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  294
Example 4  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  297
Example 5  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  299
11 Superelement Analysis with Rotors
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  302
PART Superelements  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  302
External Superelements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  302
Support for Copy and Move/Mirror Capability  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  303
Sample Problem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  305
Input File for Creation Run  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  307
Assembly Run  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  310
Information in the Output File . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  312
Results from External SE Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  313
SOL 107 Results (Complex Eigenvalue Analysis) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  314
SOL 108 Results (Direct Frequency Response)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  316
Multilevel SE Setup  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  319
12 Multiple Rotors In Fixed System
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  324
Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  324
13 Kinks and Offsets on a Rotor
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  334
User Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  335
Case Contro l . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  335
Bulk Data Entry  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  336
Guidelines and Limitations  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  340
Examples  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  341
A Axisymmetric Harmonic Elements for Rotordynamic Analysis
Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  346
Element Details  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  346&lt;/p&gt;
&lt;p&gt;7 Contents
Main Index
Constraints/Boundary Conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  349
B User Defined Subroutines Using CBUSH2D
Analysis in Windows Machine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  352
Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  354
Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  357
Analysis on Linux . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  359
Compiling External CBUSH2D  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  360
Definitions Used in this document . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  362
Nomenclature
Glossary
References&lt;/p&gt;
&lt;p&gt;Rotordynamics User’s Guide8
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Preface
Preface
About this Book      2
Organization      2
Developments Introduced      4
List of MSC Nastran Guides      8
Technical Support      9
Training and Internet Resources      9&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
About this Book2
Main Index
About this Book
MSC Nastran is a general purpose finite element program which solves a wide variety of engineering
problems. It is developed, marketed, and supported by the Hexagon AB and/or its subsidiaries.
The MSC Nastran Rotordynamics User&amp;rsquo;s Guide  is intended to explain the capability of MSC Nastran to
perform rotordynamic analysis as available in MSC Nastran V 2024.1.  Prior to this user ’s guide, the overview
of updates made in rotordynamic analysis were provided through the Release Guide associated with each
version. The rotordynamic analysis is used to obtain complex eigenvalues, determine stability and to perform
frequency response and transient response analysis for a system where one or more components are rotating.
Guidance is provided in preparing the input file and assessing the output. A number of examples are provided
to illustrate the use of MSC Nastran ’s Rotordynamics features.
Organization
The guide is divided into twelve chapters and three Appendices. A brief description of each of these is:
Chapter 1. Introduction to Rotordynamics
This chapter provides an overview of rotordynamic analysis and briefly explains important concepts. For a
more detailed description, readers are referred to books and papers listed in Appendix A of this manual. This
chapter assumes that the reader has basic knowledge of the field and general concepts related to structural
dynamics.
Chapter 2. Equations of Motion
This chapter provides theoretical overview of rotordynamics. Using a simplified Jeffcott rotor model,
equations of motion are obtained for the model in fixed and rotating reference frames using Lagrange’s
principle. The effect of damping is also included in the analysis. The equations of motion generated in this
chapter form the backbone for the analysis presented in rest of the book.
Chapter 3. Rotor Modeling
Different options available in MSC Nastran for modeling a rotor are described in this chapter. Based on the
required fidelity and complexity of rotor model, the user has the freedom to choose the appropriate modeling
technique. This chapter also identifies connectors that can be used for connecting a rotor to another rotor or
to a stator.
Chapter 4. Damping and Rotor Bearing Models
MSC Nastran supports various options for specifying damping in dynamic analysis. This chapter highlights
usage of these damping options for rotors and stators and shows the corresponding Bulk Data entry. Next,
different nonlinear elastic elements, which can be used to model the complex behavior of bearings used in
rotordynamic analysis, are described.&lt;/p&gt;
&lt;p&gt;3 Preface
Organization
Main Index
Chapter 5: Rotor Usage
This chapters lists various rotordynamic related entries available in MSC Nastran to define the components
of a rotor and enable different kinds of analyses. These entries may be defined in File Management Section,
Case Control Section or in the Bulk Data Section of the input file.
Chapter 6: Rotordynamics using Patran
Currently, MSC Patran provides limited support for rotordynamics. This chapter provides step-by-step
instruction for creating the first rotordynamic analyses model using Patran. Later, post-processing options
available to plot the modeshapes and to generate a Campbell diagram are discussed.
Chapter 7: Complex Eigenvalue Analysis
This chapter describes the usage of complex eigenvalue analysis to obtain whirl speeds and critical speeds
using analysis in asynchronous and synchronous mode, respectively. The analyses is performed in both fixed
and rotating coordinate system.
Chapter 8: Frequency response analysis
In rotordynamics analysis, asynchronous or synchronous forcing function can be defined in order to study
their effects on rotors. MSC Nastran includes separate bulk data entry to define the most commonly used
synchronous load due to unbalance. This chapter also highlights the effect of damping and circulation terms
on rotor response.
Chapter 9: Transient response Analysis
The transient analyses in MSC Nastran allows the usage of nonlinear bearings and it includes effect of rate
of change of rotor speed.
Chapter 10: Nonlinear frequency response analysis
The SOL 128 in MSC Nastran allows for mild nonlinearity to be included in the frequency response analysis.
In this case, the problem is solved using the harmonic balance technique.
Chapter 11: External SE analysis with rotors
This chapter describes the steps involved in defining multiple rotors in multiple external superelements to
streamline the analysis for very large models. Besides these, identical components of a model which are
repeated multiple times, can be generated using copy/move or mirror/move approach to reduce the
preprocessing and analyses time.
Chapter 12: Multiple Rotors
MSC Nastran allows for multiple rotors to be defined in the analysis in fixed reference frame where each rotor
is spinning at a different speed. Using an example, this chapter describes the steps involved in defining the
model and interpreting the results.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Developments Introduced4
Main Index
Chapter 13: Kinks and Offsets on a Rotor
This chapter describes the steps involved in defining and analyzing the effects of kinks and offsets in a rotor
during assembly. Using an example, this chapter describes the internal automated geometry calculations,
boundary conditions applications and results interpretation for solving the bent rotor for rotordynamics
analysis in SOL 400.
Appendix A. Element Details for Axisymmetric Harmonic Elements
This appendix provides details related to element formulation for axisymmetric harmonic elements for
rotordynamic analysis.
Appendix B. User Defined Subroutines Using CBUSH2D
This appendix describes steps involved in defining a user defined subroutine for usage in CBUSH2D entry.
Developments Introduced
New versions of MSC Nastran are released periodically. Details about the updates made in each released
version are described in the Release Guide provided with MSC Nastran. Rotordynamics capability was first
introduced in the MSC Nastran 2004 release. Since then significant progress have been made, and new
features have been added with each release based on customer requirements and key features identified. The
major enhancements since the MSC Nastran 2004 version are listed here:
MSC Nastran  2004
Introduced rotordynamic analysis in MSC Nastran for 1-D models defined using
CONM2/CBAR/CBEAM elements. Components of this 1-D rotor are defined using a new Bulk
Data entry called ROTORG and rotor usage is defined using RGYRO and RSPINR.
MSC Nastran 2005 r3
Introduced squeeze film damper. The squeeze film damper model is based on work originally
performed at Case Western Reserve University (CWRU).
2006 MD Nastran
Additional damping options for rotors (structural, Rayleigh, and hybrid damping) in RSPINR and
RSPINT.
NLRSFD implemented as an element.
The rotordynamics option is available in the Aerodynamic Flutter (SOL 145) and Aeroelastic Gust
Response (SOL 146) solutions. SOL 145 uses the same gyroscopic equations as Complex
Eigenvalues; SOL 146 uses the frequency response formulation.
Generation of Campbell diagrams using CAMPBLL entry.
Preliminary rotor mode tracking.
Updated equations of motion for complex eigenvalues analysis, frequency response, and transient
response by including damping and circulation terms for rotors.&lt;/p&gt;
&lt;p&gt;5 Preface
Developments Introduced
Main Index
2007 MD Nastran R2.1
Introduced unbalance loading for frequency response.
Nonlinear transient rotordynamics is introduced in SOL 400.
2008 MD Nastran R3
In this version, special options were added to SOL 106 to support blade vibration analysis.
Integrated, Multi-disciplinary Fan Blade Out (FBO) and Rotordynamics simulation in SOL 700.
Allow for user defined subroutines so the user can provide their own subroutines or applications
within an MSC Nastran execution process. For example, the user can provide their own formulation
of a squeeze film damper in rotordynamic analysis.
2010 MD Nastran
Nonlinear harmonic response for rotordynamic analysis is introduced. It is helpful for analyzing a
class of dynamic response problems where rotor/stator contact under abnormal running conditions.
2011 MD Nastran
Starting with MD Nastran 2011, the user is allowed to provide their own SCA-object to calculate
the properties of CBUSH2D elements.
Introduced ROMAC’s (University of Virginia Rotating Machinery And Controls laboratory,
&lt;a href=&#34;http://www.virginia.edu/romac/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://www.virginia.edu/romac/&lt;/a&gt;) THPAD routine (which must be obtained from ROMAC) to
calculate the properties of a tilting pad journal bearing.
2012 MSC Nastran
Introduced IRAM as a new complex eigenvalue extraction method in SOL 107 analysis for
rotordynamic analysis.
2013 MSC Nastran
Allows usage of axisymmetric harmonic elements for rotordynamic analysis using a new bulk data
entry called “ROTORAX”. This allows for a better capture of the geometry of the rotors, and thus
leads to better and more accurate predictions of the behavior of the rotordynamic models.
A new entry called “RBAX3D” is introduced to connect an axisymmetric harmonic grid point to a
3-D grid point.
A limited capability to allow rotors in external superelements is provided.
2014 MSC Nastran
In the 2014 release, we augmented the previous capability to allow concentrated masses to be used in
an axisymmetric harmonic calculation.
With the enhancements in MSC Nastran 2014, any number of ROTORG, ROTORSE, and/or
ROTORAX Bulk Data entries that define rotors may be specified in external SEs and the residual .&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Developments Introduced6
Main Index
2014.1 MSC Nastran
Added an option to apply Rayleigh damping for rotors as it was implemented in MSC Nastran
2005.
2016 MSC Nastran release
A new bulk data entry “ROTOR” is introduced to allow for 3-D elements (solid and shells) for
analysis in fixed and rotating reference frames.
The user can now optionally suppress the effect of the circulation matrix for damping defined in
rotors for analysis in a fixed reference frame.
For 3-D rotors in a rotating reference frame, effects of stress stiffening (differential stiffness) can be
incorporated in the analysis.
2017 MSC Nastran
Introduced option to define WR3, WR4 and WRH parameters through RSPINR/RSPINT entries
to define these parameters individually for each rotor.
Added CFLAG option in UNBALNC entry to include mass and speed correction in transient
analysis in fixed reference frame.
Campbell Diagram option is now supported in SOL 110 for all the rotors. In addition, modal
solution sequences, SOL 110 and SOL 111, can now be used for analysis of 2D and 3D rotors.
2018 MSC Nastran
Introduced two mode tracking algorithms for Campbell diagram:
•Based on first and second derivative continuity for variation of frequency with rotor speed.
•Based on orthogonality condition for complex left and right eigenvectors .
Improved output from complex eigenvalue analysis by identifying rotor whirl type for each rotor in
the model for both SYNC and ASYNC analysis .
Enhanced PBUSH2D entry by introducing option to specify cross coupling terms .
Allow for one or more rotors in multilevel Part SE.
Fix rotor spin direction issue.
2019 MSC Nastran
SOL 128 (Nonlinear Harmonics) Rotordynamics Enhancements
•Option to reset initial conditions
•Nonlinear load output
•Output for multiple harmonics
•Support for continuation procedure for frequency-independent analysis&lt;/p&gt;
&lt;p&gt;7 Preface
Developments Introduced
Main Index
2020 MSC Nastran
User Defined Subroutine Enhancements
•New 2D Bush (CBUSH2DA) and Squeeze File Damper (NLRSFDA) user-defined
•Subroutines enabled to include inertia &amp;amp; acceleration terms respectively.
•Integration of user-defined squeeze file damper libraries.
•Cross-coupling inertia terms specification for 2D Bush (CBUSH2D) element.
•Frequency dependent 2D Bush (PBSH2DT) property with tabular input.
2021 MSC Nastran
ROTBENT - Define kinks and offsets to be applied on a rotor present in manufacturing and
assembly process of Rotor
•Available only in SOL 400
•Calculates the initial profile of the rotor &amp;amp; carries out rotordynamics analysis after placing it on
its bearings.
•Initial implementation supports only a line ROTOR for non-linear static, complex eigenvalue
with Campbell, frequency response &amp;amp; non-linear transient analyses.
•Support for Campbell Diagrams in SOL 400
2021.3 MSC Nastran
PARAM,ROTSEKE is deprecated. The new ROTSEKE case control command to get modal kinetic
and potential energies of rotors in the f06, OP2, PCH, and H5 format, sorted either by Rotor (or)
by Mode.
Ability to define multiple reference rotors
•Available only in SOL 107, SOL 110, SOL 200 &amp;amp; SOL 400 (ANALYSIS = DCEIG/MCEIG)
•Multiple RGRYO entries allowed, each pointing to a separate reference rotors
•A new REFROT entry to define reference rotor for non-reference rotors in the residual
structure (SE 0)
•A new REFRTSE entry to define reference rotor for non-reference rotors in any superelement.
2022.4 MSC Nastran
NLRGAP element is enhanced to take a new smoothening function for SOL128 solution sequence
only.
The smoothen function will be based on the User parameter.
2023.2 MSC Nastran
SOL128 improved continuation procedure with usage of derivative unbalance.
New NLFREQC entry for iteration controls like initial frequency, frequency stepping and step
sizing.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
List of MSC Nastran Guides8
Main Index
List of MSC Nastran Guides
A list of some of the MSC Nastran guides is as follows:
Installation and Release Guides
Installation and Operations Guide
Release Guide
Reference Guides
Quick Reference Guide
DMAP Programmer’s Guide
Reference Guide
Utilities Guide
Getting Started Guide
SOL 400 Getting Started Guide
MSC Nastran Error Messages Guide
Demonstration Guides
Linear Analysis
Implicit Nonlinear (SOL 400)
Explicit Nonlinear (SOL 700)
MSC Nastran Verification Guide
User’s Guides
Automated Component Modal Synthesis (ACMS)
Access Manual
Aeroelastic Analysis
Design Sensitivity and Optimization
DEMATD
Dynamic Analysis
Embedded Fatigue
Embedded Vibration Fatigue
Explicit Nonlinear (SOL 700)
High Performance Computing
Linear Static Analysis
Nonlinear (SOL 400)
Numerical Methods
Rotordynamics&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P10</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_010/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_010/</guid>
      <description>
        
        
        &lt;p&gt;169 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-16  Generation of Mesh Seeds Along Curve
3.Set Action: Create, Object: Mesh , Type: Curve. (see Figure 6-17)
4.Patran allows the user to control the starting node ID and elements ID while meshing. The default
value used is one (1).
5.Set the cursor  in the Curve List  input field and click on the line in the graphics viewport.  This
populates the field with the ID Curve 1  as shown. (Alternatively, you could simply type Curve 1  into
that field.)
6.Uncheck Automatic Calculation  in the Global Edge Length  category and set the value to 0.1 as
shown. (Note that since we have already generated mesh seeds for the current curve, this value has no
significance. However, it can be used to control mesh size for more complicated geometries.)
7.Click the Select Existing Prop  button and choose the earlier defined beam_prop  set. This step
associates the entire beam_prop  set with the CBEAM card and its underlying element formulation.
8.Click Apply  to mesh the curve and create five (5) beam elements.
9.Click on the Home tab (see Figure 6-18(a)), click the Label Control tool button. This allows us to
verify placement of nodes and elements of the previous meshing operation, as shown in Figure 6-18(b).
2
2
2&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model170
Main Index
Figure 6-17  Steps to Generate Beam Elements
Figure 6-18  Model with Beam Elements
3
4
5
6
77
8
9
9a
b&lt;/p&gt;
&lt;p&gt;171 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Step 6: Constrain  the Model
To constrain the rotor in space, cantilever boundary conditions are defined on the left end.
1.Select the Loads/BCs  tab, and then select the following to define displacement constraints:
Action: Create, Object: Displacement, Type: Nodal (Figure 6-19)
2.Choose a  New Set Name  such as cantilever_ rotor
3.Click the Input Data specify zero translations &amp;lt;0,0,0&amp;gt; for T1, T2, and T3 (i.e. in X, Y, and Z) as well
as zero rotations &amp;lt;0,0,0&amp;gt; for R1, R2, and R3 (i.e. around X, Y, and Z).
4.Click OK.
5.Press t he Select Application Region button.
Figure 6-19  Defining Constraints on the Beam Model
6.In the pop-up window, select FEM as shown in Figure 6-20.
7.Then pick Node 1 under Select  Nodes .
8.Click on Add. This populates the Application Region  with Node 1.
9.Then c lick OK (See Figure 6-20).
1
1
23
4 5&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model172
Main Index
Figure 6-20  Applying Constraints on the Beam Model
10. Click Apply  on the Element Properties form.  In the end, you should see the cantilever_ rotor listed as
the boundary condition under Existing sets as shown in Figure 6-21.
11. The graphical d isplay should show the boundary condition being applied to Node 1  with a cyan
marker displaying the degrees-of-freedom constrained at Node 1.  This verifies that all translations and
rotations of this particular vertex are constrained as shown in Figure 6-22.
Figure 6-21  Confirmation for Definition of Constraints
6
7
8
9
10&lt;/p&gt;
&lt;p&gt;173 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-22  Beam Model with Constraints Applied
Step 7: Define a R otor
In order for Patran to capture the rotor dynamic effect s, we need define the constituents of the rotor and
direction of rotation.
1.Click on Tools  menu in Patran’s top menu b ar, select the  Rotordynamics&amp;hellip;  option, and click on
Rotordynamics  as shown in Figure 6-23.
2.This sets Action:Create , Object: Rotor , Type:1D as shown  in Figure 6-24.
3.Choose a Rotor Name  for this rotor data set such as hollow_rotor  and give it an ID ( 99 in this case).
The ID is required and helps in managing rotors.
4.Click the cursor into the Rotor Node List  field and rubber-band select all rotor nodes  from the
graphics screen.  Alternatively, you could simply type Node 1:6 . You will later see that this populates
the ROTORG card.
5.Turn the Auto Execute  button OFF. If you leave this ON, the rotor is automatically created after you
select the two nodes that define the spin direction. For illustration purposes we do not want this to
happen yet. Once you are familiar with rotor creation you can leave this ON.
6.To specify the orientation of the rotor, select any two line rotor nodes. Node 2  and Node 3  are
specified for Spin Direction Node 1 and Spin Direction Node 2, respectively.
7.Click the Spin Profile  button and specify  one (1) i n the Speed Values  field. This value is a multiplier
which we are setting to unity. Although Patran has some logic to distinguish between intended scalar
indices and decimals, it is good practice to distinguish between the two explicitly by using the decimal
point for the latter.
8.Click OK to close the Spin Profile tool tab.
9.Click Apply  to commit the hollow_rotor  to the Existing Rotors .
Note that the actual name of the rotor is &lt;!-- raw HTML omitted --&gt;.&lt;!-- raw HTML omitted --&gt; or hollow_rotor.99  in this case. If you wish to
view only the name or only the ID, use the Name On/Off  and/or ID On/Off  toggle buttons.
10. Click the Close  button to close the Rotor Dynamics  tool tab.
Note that the rotor definition is displayed with a double headed arrow indicating rotation in the spin
direction based on the engineering right-hand-rule. All nodes defining the rotor have this marker
vector. Internally a rotor is treated as an LBC (Loads and Boundary Condition). However, to manage
a rotor you must use the Rotor Dynamics tool. Rotors cannot be managed via the LBCs application.
These markers can be re-posted  (Plotted) from the Rotor Dynamics tool.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model174
Main Index
Figure 6-23  Selecting Rotor Dynamics Tool
Figure 6-24  Steps Involved in Defining Rotor
1
2
3
47
9
95
68
10&lt;/p&gt;
&lt;p&gt;175 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Step 8: Set  Up the Analysis
1.Click on the Analysis tab as shown in Figure 6-25. This invokes the Analysis  application i n which the
default values of Action: Analyze , Object: Entire Model , Method: Full Run  are appropriate.
Figure 6-25  Patran Menu to Define Analysis
Figure 6-26  Analysis Application to Setup MSC Nastran Job
1
2
3&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model176
Main Index
Figure 6-27  Setup for Solution Type
2.As shown in Figure 6-26, enter Job Name  as rotor. This will be the name of the input deck created by
Patran. You can add some descriptive SUBTITLE (e.g. CBEAM Rotor ) and LABEL (e.g. Cantilevered,
Left) if you like. However, this is not absolutely necessary for the configuration of this model.
3.Click the Solution Type . This brings up the form in Figure 6-27 where other subordinate forms are
accessible for defining solution parameters.
4.Select COMPLEX EIGENVALUE  and choose Direct  in the Formulation  drop-down menu. Verify
that Solution Sequence 107 is now posted near the bottom of the Solution Type  tab. Next click on
Solution Parameters .
5.Select Mass Calculations  as Coupled  for better accuracy. Next click on Complex Eigenvalue&amp;hellip;
button . This opens the Eigenvalue Extraction  form.&lt;br&gt;
6.Here, select Complex  Lanczos  as the Extraction Method . Set the Number of Desired Roots = field
to 12. Click OK in the Eigenvalue Extraction  pop-up window to close it.
7.Click on Results Output Format  to control the format for output. As shown in the Results Output
Format  pop-up window, the default options are HDF5  and Print . Click OK to close this form.
8.Click OK in the Solution Parameters  form t o close it  and cl ick OK on the Solution Type  form t o
close it  also.
9.Next, click the Subcases on the Analysis application a s shown in Figure 6-29. This opens the Subcases&lt;br&gt;
form.  Select Default  from the top list box so we can modify the Default  Subcase.
4
46
5
6
6
7
788&lt;/p&gt;
&lt;p&gt;177 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-28  Defining a Subcase
10. Since the Subcase Name  is already set to Default  and the Default  in the Available Load Cases  contains
all applied boundary conditions, simply click the Subcase Parameters button to modify the Default&lt;br&gt;
Subcase.
11. Check Enable Rotor Dynamics  in the Subcase Parameters  window. Click the Specify Spinning
Properties  as shown in Figure 6-29.
99
10
14&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model178
Main Index
Figure 6-29  Selecting a Rotor for the Analysis
12. Choose the Option:  Asynchronous ; set the Type to 1D to s elect the previously defined
hollow_rotor .99 as the Reference Rotor  set the Speed Unit  to RPM  and specify Speed =  10000.  This
is the second speed entry that is used in RGYRO.
13. Click OK to close the Spinning Properties  window. Click OK to close the Subcase Parameters form.&lt;br&gt;
14. Click Apply  on the Subcases  to commit these changes to the Default  Subcase, then click Cancel  to
close the  form.&lt;br&gt;
1112
12
1313&lt;/p&gt;
&lt;p&gt;179 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Step 9: Run M SC Nastran
1.On the Analysis application form, cl ick on Subcase  Select&amp;hellip; and ensure that Default  is in the Subcases
Select ed list box as shown in Figure 6-30 and then close the form with the OK button.&lt;br&gt;
2.Press t he Apply  button on the Analysis  application form t o submit the job to M SC Nastran.
Figure 6-30  Selection of Final Subcase
Some of the benefits of having forced Patran to write everything into the C:\SCRATCH d irectory are now
becoming evident: All of the pertinent files are nicely collected here. In addition to the rotor.db database
file that we needed to define initially, Patran also kept a session file (i.e. &lt;em&gt;.ses.&lt;/em&gt; ) that tracks all of our moves,
and most importantly, Patran wrote the rotor.bdf input deck that is passed to MSC Nastran upon
invocation.
Once the computation completes, an output databases with rotor.h5  extension should exist.  Also, it is
encouraged that the user should look into the rotor.f06  and search for the presence of any FATAL
messages b efore further post processing.
Note: In order to successfully submit an MSC Nastran analysis, Patran must be configured properly. See
Patran’s installation manual for details. You may also simply set the Method to Analysis Deck, which
only produces the input file, and then manually submit the job to MSC Nastran.
11
1
2&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model180
Main Index
Step 10: Plot M ode Shapes
1.Click the Analysis  tab and select the HDF5  option in the Access Results tool group as shown in
Figure 6-31.
Figure 6-31  Menu to Select Results for Post-processing
Figure 6-32  Attach  the H5 Fi le for Post-processing
2.This invokes the Action: Access Results , Object: Attach XDB , and Method: Result Entities  as shown
in Figure 6-32.
3.Next click the Select Results File and select the rotor.h5  file just created from the MSC Nastran
run.
4.Click the  OK button in Select File  and Apply  button in Analysis  tab.
Notice that a successful results file attachment is indicated in the message field on the bottom left, as shown
in Figure 6-33.
1
2
34
4&lt;/p&gt;
&lt;p&gt;181 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-33  Completion of HDF5 File At tachment
Figure 6-34  Selecting Results Tab for Plotting Mode Shapes
5.Next, click on the Results  tab and then click the Fringe/Deformation  tool in the Quick Plot  set (see
Figure 6-34).
6.In the Select Result Cases  field, click on Mode 1  as shown in Figure 6-35.
7.In the Select Fringe Result  field, click on Eigenvectors, Translational.
8.In the Select Deformation Result  field, click on Eigenvectors, Translational.
9.Click Apply . This generates the first mode shape as shown in Figure 6-36.
5
5&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model182
Main Index
Figure 6-35  Plotting first mode shape
Figure 6-36  First mode shape for hollow rotor
10. This image can be saved using following steps: Click on File and then Images . This open s the Output&lt;br&gt;
form a s shown in Figure 6-37.
11. In the Output  tab, select Current Viewport as Source  and pick any desired output format from the
Image Format  menu.
12. Press the Apply  button. A file called rotor_1.jpg  is created.
6
7
8
9&lt;/p&gt;
&lt;p&gt;183 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-37  Steps for Saving Mode Shape Plot
13. Animate the mode by turning ON animate toggle  in the Results application as in Figure 6-38.
14. Click on t he Animation Options button as shown in Figure 6-38.
15. In the Number of Frames field, specify 32 as shown and click Apply.
16. Click the No Graphics Refresh button to stop the animation  if necessary .
Figure 6-38  Steps Involved in Animation of Mo de Shape
1011
12
1314
15
15&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model184
Main Index
Repeat this procedure to investigate first-order forward and backward whirling bending modes 1
through 4, axial modes 5 and 6, second-order FW and BW bending modes 7 through 10, and
potentially further.
17. Patran animations can be saved for future usage in presentations by checking the MPEG option in
the animation box as shown in Figure 6-38.
In this case an MPEG file of the animation was created called rotor_quick_1.mpg
Note that the main purpose of this exercise , and Patran us age in general , is the configuration of analysis input
files ( i.e. pre -processing) and the visualization of results (i.e. post-processing). Since the analysis preference
was chosen to be MSC Nastran in this exercise, an MSC Nastran Bulk Data File or rotor.bdf input deck
was written.
It is highly recommended that users investigate the input deck created by Patran and understand different
entries d efined in the model. Details of each entry a re available in MSC Nastran’s Quick Reference Guide. A
snapshot of the MSC Nastran input file is shown in Figure 6-39.
Figure 6-39  Input File Cr eated by Patran
Patran is extremely useful when working in the overall geometric context and orientation of large
subassemblies that contain rotors such as engines or entire systems such as airframes. At the same time, we
would like to emphasize MSC Nastran’s modularity that allows the user to go seamlessly between component,
subassembly, and system contexts.&lt;/p&gt;
&lt;p&gt;185 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Step 11: Generat e a Campbell Diagram
In this step m odification  are made to the job to i nclude:
a.Specif ication of t wo (2) o utput4 files , which includes information about rotor speed and
corresponding eigenfrequencies.
b.CAMPBELL option in Case Control
c.CAMPBLL and DDVAL entries in Bulk Data section
Figure 6-40  Modification in Input File f or Campbell Diagram Ge neration
When this modified input file is run in MSC Nastran, two additional files, namely campbell_freq.op4
and campbell_rpm.op4  are generated. These files are required as input for generating a Campbell
Diagram in Patran.
The above entries for CAMPBELL Case Control and CAMPBLL / DDVAL Bulk Data can be included
automatically when generating the input file if, when creating the Subcase, the Generate  Campbell  Diagram&lt;br&gt;
toggle is turned ON and a spatial field  of rotor speeds (X and Value columns defined with the same speed
values) is selected. See Figure 6-29.
Here are the steps involved in generating a Campbell diagram.
1.Click on Tools  | Rotor Dynamics&amp;hellip; as shown in Figure 6-41 and then click on Plot | Campbell
Diagram . This will open a form a s shown in Figure 6-42.
2.In this Campbell Diagram form,  click on Select Rotating Speed File&amp;hellip; button. I n the file form,  select
the campbell_rpm.op4  file, which was created during the MSC Nastran run. Click OK to close
the window. (see Figure 6-42)
3.Similarly, click on Select Frequency File &amp;hellip; button, a nd select the campbell_freq.op4  file.
4.Next, enter 0 1 in the Rotation Speed Multiplier  to generate the reference line where rotor speed is
equal to the eigenfrequency.
5.And finally, click on Apply to generate the Campbell Diagram. The Campbell Diagram generated for
this particular problem is shown in Figure 6-43.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model186
Main Index
Figure 6-41  (a) Generating Campbell Diagram in Patran
Figure 6-42  (b) Select Roto r Speed and Eigenfrequency Files
Note: Once the Campbell Diagram has been created, you can use the XY Plot application, accessible through
the Results application to make modifications to the curves, axes, legend, and window, as necessary.
1
32
4
5&lt;/p&gt;
&lt;p&gt;187 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-43  Campbell Diagram
Examples used in this chapter are available under the following folder:  ../tpl/ugrotor . A brief
description of these examples is given below:
Table 6-1&lt;br&gt;
Input File Name Description
rug_6_1 Rotor model developed using Patran.
rug_6_2 Rotor model modified to generate Campbell Diagram.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model188
Main Index&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P11</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_011/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_011/</guid>
      <description>
        
        
        &lt;p&gt;Main Index
Chapter 7: Complex Eigenvalue Analysis for Rotors
7Complex Eigenvalue
Analysis for Rotors
Complex Eigenvalue Analysis for Rotors     190
Example      200
Summary for Equation of Motion      219&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Complex Eigenvalue Analysis for Rotors190
Main Index
Complex Eigenvalue Analysis for Rotors
Complex eigenvalue analysis can be used to determine whirl frequencies and critical speeds, and their
associated mode  shapes. Complex eigenvalue analysis is available as a direct method (SOL 107), in which the
equations are of the same size as the number of physical variables. Complex eigenvalue analysis is also
available as a modal method (SOL 110), in which undamped modes are first computed and then used to
transform the matrices from physical to modal variables. Please refer to the Complex Eigenvalue Analysis  (Ch. 14)
in the  MSC Nastran Dynamic Analysis User’s Guide  for more details on complex eigenvalue analysis.
A characteristic of the motion of rotors is that the rotor appears to “whirl” i n a circular or elliptical motion
relative to the support structure. The whirl motion may be either in the direction of rotor rotation (forward
whirl) or against it (backward whirl), as described in Chapter 1. Rotor whirl can be at a frequency that is
different from the rotor spin rate.
Whirl frequencies are important in determining rotor stability. Although the whirling motion may not be at
the rotational speed, whirl modes may be unstable due to internal rotor damping or external forces due to
bearing and seals. Estimating the stability of the whirl modes is important for ensuring a system operates
smoothly. Critical speeds can be viewed as a special case of whirl frequencies: the rotor whirl is at the same
frequency as the rotor spin rate  (1X Line in Figure 7-2). Critical speeds are important for ensuring safe
vibration levels.
Equations of motion
For complex eigenvalue analysis, final equation of motion in a fixed coordinate system, as derived in Chapter
2, is given by:
The centrifugal stiffening matrix  is important for 3D rotors where the model includes rotating
components away from the axis of rotation. For simplicity, this term is removed from the equations presented
in rest of the chapter.
Let the DOF vector be given by: where,  is the amplitude of motion
(independent of time) and p is complex eigenvalue for the model.
In order to determine whirl frequencies, the above equation  is solved for p (complex eigenvalue) and
(mode shape) with the rotor spin rate Ω specified by the user (asynchronous option). Here,
where, α is the real component of the eigenvalue while ω is the imaginary component. Thus, ω represents the
oscillation frequency for the model and Re{ ga (p)} represents the corresponding modeshape. For this case, the
damping coefficient produced as output in the complex eigenvalue analysis is given by:
Damping Coefficient (g)= -2α/ω
Thus, the system is considered unstable when (-2 α/ω) &amp;lt; 0.Mg·· BSBRG + +  g· KKCR2KG + +  g + + FS =
KG
g gappt= gap
gap
pi+ =&lt;/p&gt;
&lt;p&gt;191 Chapter 7: Complex Eigenvalue Analysis for Rotors
Complex Eigenvalue Analysis for Rotors
Main Index
Critical speeds can be obtained by using the synchronous option is RGYRO as described in the previous
chapter.
For Analysis in Fixed Reference Frame
1.Asynchronous mode (ASYNC option in RGYRO)
Equation of motion for asynchronous analysis to determine whirl frequencies of the system is obtained by
substituting  in the above equation:
Above equation can be further expanded to include different options available for defining damping for rotor
and stator portion in the model. The final expression as included in MSC Nastran is given by:
where
[M] Total mass matrix for the model
i 
p Complex eigenvalue of the model
[BS] Viscous damping from dampers in the stator portion
[MS] Mass matrix for the stator portion
[KS] Stiffness matrix for the stator portion
[BHS] Hybrid damping for the stator portion
α1, α2 Rayleigh damping parameters for stator portion
Ωref Rotor speed of the reference rotor (specified by the user)
Ωj Rotor speed for the jth rotor
[G] Gyroscopic matrix for the rotorg gapept=
p2MpBSBRG + +   KKCR+  + +  gap 0=
p2M+
pBS1MS2KSBHS + + +  +
jrefGjBR +jBHRj1RjMR2RjKRj+ + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4Rj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRj+ +     
j1=n

       
+
1iG+KSiK4SiKHS + + +
KRjjrefBRCjBHRCj1RjMRC2RjKRCj+ + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ + 

+
    
j1=n

                 
gap 0=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Complex Eigenvalue Analysis for Rotors192
Main Index
In the above equation, it is assumed that the parameters WRH, WR3, and WR4 are defined in the analysis
(either through PARAM or through RSPINR for each rotor) and not equal to zero. In case any of these
parameters are not defined, the damping defined using GR, GE and KH and corresponding circulation terms
are ignored in the analysis.
Synchronous Analysis
For the complex modes analysis with synchronous excitation, the excitation frequency is equal to the spin rate
of the reference rotor; that is, . In case multiple rotors are present in the analysis, the rotor
speed for each rotor is written as a linear function dependent on the reference rotor spin rate:
. The scaling factors, αj and βj are determined from the relative spin rates specified [BR] Viscous damping from dampers for the rotor
[MR] Mass matrix for the rotor
[KR] Stiffness matrix for rotor
[BHR] Hybrid damping for the rotor
α1R, α2R Rayleigh damping parameters for the rotor
GR Structural damping for the rotor defined in RSPINR
[K4R] Material damping for the rotor part
[KHR] Hybrid damping for the rotor part
WR3, WR4, WRH Parameters to convert structural damping to equivalent viscous damping.
G Structural damping for the stator portion
[K4S] Material damping for the stator portion
[KHS] Hybrid structural damping for stator
Circulation matrix due to [BR]
Circulation matrix due to [BHR]
Circulation matrix due to Rayleigh damping for rotors
Circulation matrix due to structural damping for rotors
Circulation matrix due to structural damping for rotors
Circulation matrix due to hybrid damping for rotor
{ga(p)} Modeshape corresponding to complex eigenvalue pBRC
BHRC
1MC
R2KC
R +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KC
R
1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4C
R
1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHC
R
ref = =
refjjref+ =&lt;/p&gt;
&lt;p&gt;193 Chapter 7: Complex Eigenvalue Analysis for Rotors
Complex Eigenvalue Analysis for Rotors
Main Index
by the user. For this case, the equation of motion to be solved is obtained by substituting p= iΩ in the previous
equation:
This simplifies to:
The above equation can be expanded based on different options available for defining damping for the stator
and for rotors. If parameters WR3, WR4, and WRH are defined in the analysis and not equal to zero, the
expanded version of the equation is given by:
Note that for the analysis in fixed reference frame, the synchronous complex eigenvalue analysis produces
both forward and backward whirl modes. Identification of these modes can be done using Campbell diagram , 2M – iBSBR+G K+KCRga0= + + + +  + 
2MiG – iBSBRGiKCR – KKCR+  + + +  + – ga0=
2MijGj
j1=n
–
    
–  +
iBS1MS2KSBHS + + +   +
jGjBRjBHRj1RjMRj2RjKRj + + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4Rj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRj+ +     &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;+
ijBRCjBHRCj1RjMRCj2RjKRCj + + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ +     
–
           
j1=n

             
+
1iG+KSiK4SiKHS + + +
KRjjBRCjBHRCj1RjMRCj2RjKRCj + + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ + 

+
    
j1=n

                           
ga0=&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Complex Eigenvalue Analysis for Rotors194
Main Index
ROTSEKE case control (for 1D rotor only), o r by post processing the eigenvectors produced as part of
output.
For analysis in rotating reference frame
Equation of motion for complex eigenvalue analysis when the problem is analyzed in the rotating reference
frame is given by (as derived in Chapter 2):
Substituting  and { FR} = 0 in the above equation
Asynchronous Analysis
Expanded version of the above equation for asynchronous analysis is given by:
Note that in case multiple rotors are present in the analysis, they are constrained to have the same rotational
speed and axis of rotation for the analysis in rotating reference frame.
Synchronous Analysis
In rotating reference frame, different sets of equations exist to determine forward whirl and backward whirl
critical frequencies. And thus, separate analysis need to be performed to obtain the backward whirl critical
frequencies with the parameter WHIRLOPT turned on. Mg·· BSBR2Cg· K2Z – 2KGKCSg FR = + +  + + + +
g gapept
=
p2M pBSBR2C KKCS2Z – 2KG + gap0= + + + + +
p2M+
pBS1MS2KSBHS + + +  +
2CjBR +jBHRj1RjMRj2RjKRj+ + +  
j1=n

      
+
1iG+KSiK4SiKHS + + +
BSCBHSC1MSC2KSC + + + + 
KRj1iGRj+ iK4RjiKHRj2Zj– 2KGj+ + +  
j1=n
                  
gap 0=&lt;/p&gt;
&lt;p&gt;195 Chapter 7: Complex Eigenvalue Analysis for Rotors
Complex Eigenvalue Analysis for Rotors
Main Index
In order to obtain the forward whirling critical speeds, the criteria used is: ω = 0 or (p = 0) .
Substituting this expression in the simplified equation, the following equation is obtained:
This can be written in standard quadratic form as:
Expanding the above equation to include damping and circulation effects:
Note that this equation does not include the effect of viscous damping defined in the fixed or rotating
reference frame. Also, although the above equation does not include mass matrix explicitly, the centripetal
matrix [ Z] and differential stiffness matrix [ KG] are dependent on rotor mass distribution.
Backward whirl critical frequencies can be obtained by using the following substitution:
ω = 2 Ω, that is, p =  i(2Ω)
Substituting this expression in the above equation, the equation to determine backward whirl critical
frequencies is given by:KKCS2Z – 2KG + ga0= +
2ZKG – – iiKCS– Kga0= + + 
2ZjKGj –
j1=n
–
+ii–BSCBHSC1MSC2KSC + + + + 
1iG+KSiK4SiKHS KRj1iGRj+ iK4RjiKHRj+ +  
j1=n
+ + +
           
ga 0=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Complex Eigenvalue Analysis for Rotors196
Main Index
Solvers available for complex eigenvalue analysis
MSC Nastran provides different options for solver to be used in complex eigenvalue analysis. In SOL 107
analysis, CMETHOD in case control selects parameters for complex eigenvalue extraction. Actual parameters
to be used in the analysis are specified using the EIGC card in bulk data. For example:
In case Control:
CMETHOD = 100
In Bulk Data:
EIGC  100  CLAN 20
For rotordynamic analysis, where the matrices can be complex and skew symmetric, use of HESS (Upper
Hessenberg) and CLAN (Complex Lanczos) method is recommended. More details about these solvers is
given in MSC Nastran Quick Reference Guide  and MSC Nastran’s Numerical Methods User’s Guide .
The HESS method is generally more reliable and appropriate for small size problems only. It can take
significant computational time for moderate or large size problems. For large size problem, use of appropriate
reduction methods is encouraged to reduce the size of the problem in case the user needs to use HESS option.
The CLAN method is better suited for moderate or large problem due to its computational efficiency.
Pardiso Solver
In MSC Nastran, Intel MKL Pardiso direct solver is introduced that can help in achieving upto 80%
reduction in total elapsed time versus the default MSC solver. Further details about the Pardiso solver is
provided in the MSC Nastran Release Guide. Note that Intel MKL Pardiso is only available with the Lanczos
(CLAN) method for eigenfrequency analyses. 24M 4iCj– ZjKGj – + 
j1=n
+

+

–
i2BS1MS2KSBHS + + + + 
2BRjBHRj1RjMRj2RjKRj + + + 
j1=n

i–BC
SBHSC1MC
S2KC
S + + +         
+
1iGKSiK4SiKHS + + + + 
KRj1iGRjiK4RjiKHRj+ + + 
j1=n
                     
ga 0=&lt;/p&gt;
&lt;p&gt;197 Chapter 7: Complex Eigenvalue Analysis for Rotors
Complex Eigenvalue Analysis for Rotors
Main Index
You are required to use the SPARSESOLVER command in the executive section to indicate that the new
Pardiso solver should be used in the simulation. The following is example of choosing the new sparse direct
solver using the keywords PRDLU (for unsymmetric matrices),
SOL 107
SPARSESOLVER CEAD (FACTMETH=PRDLU,ORDMETH=PRDSMPMS)
CEND
Mode Tracking
Since V2018,  two different approaches were implemented for mode tracking while generating Campbell
diagram. In both the methods, only the complex frequencies with a positive imaginary part are considered
for mode tracking.
Numerical Approach
This method is used for mode tracking once the eigenvalues have been extracted for all the rotor speeds
defined for analysis using CAMPBLL and DDVAL bulk data entries. For each rotor speed, the second
derivative is computed using the central difference approach.
For any rotor speed (Ωi), if the kth mode is tracked for the previous two rotor speeds (Ωi-1 and Ωi-2), then
the second derivative is computed for all the N modes using:
where, 1&amp;lt;j&amp;lt;N, N being the number of eigenvalues with positive imaginary part. Of all the frequencies at rotor
speed Ωi, the one which results in least absolute value for second derivative ( ) is matched to the kth mode.
For the second rotor speed in the analysis, where the results for Ωi-2 are not available, the first derivative is
used to check the continuity. This method is the default option for mode tracking due to its robustness.
Eigenvector-Based Approach
Unlike the numerical approach, here both left and right eigenvectors associated with complex eigenvalues are
used for mode tracking. The method implemented is described in detail in Reference 2. As described in the
paper, Normalized Cross Complex Orthogonality (NC2O) parameter is computed for each pair frequencies
for two rotor speeds. Since V2018,  the eigenvector based mode tracking approach is available for analysis in
FIXED reference frame only when HESS option is used in EIGC for eigenvalue extraction. Due to
limitations of the HESS option when working with large size models without a reduction, the use of SOL
110 or a superelement based reduction approach is recommended for analyzing large rotor models.
Additional features added to make the eigenvector-based mode tracking more robust are described below:
Parameter CORU : Ideally, for tracked pair of modes, the value of parameter NC2O is very close to 1.
However, for complex models involving large stator component and dynamic reduction, this value can be
significantly lower. Thus, the default value is set to 0.7. Based on the model complexity and NC2O matrix
obtained for two rotor speeds, the user may wish to change this value. fj&amp;rsquo;&amp;lsquo;fjifki2–2fki1– – +
ii1–– i2–i1–– &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- =
&amp;lsquo;&amp;lsquo;f&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Complex Eigenvalue Analysis for Rotors198
Main Index
Parameter SWITR:  In case of mode tracking failure at a particular rotor speed, user has the option to
continue mode tracking for rest of the rotors speed by:
SWITR = 1:  Updating modes corresponding to rotor speed with failed mode tracking, or
SWITR = 0:  Using the modes from last rotor speed with successful mode tracking. (Default)
In cases where the Campbell diagram includes multiple mode switching and/or there are new modes entering
the analysis, use of SWITR=1 is recommended.
Parameter NUMMODE : As mentioned earlier, only the complex eigenvalues with positive imaginary part
are considered for mode tracking analysis. As a result, the number of eigenvalues available for mode tracking
may not be same at all the rotor speeds considered in the analysis. This may lead to mode tracking failure.
One way to avoid this issue is to pick NUMMODE to be less than half of the number of complex eigenvalues
extracted using EIGC bulk data entry. Thus, the analysis uses only the first NUMMODE frequencies with
positive imaginary part for mode tracking at each rotor speed.
Parameter PRTCOR:  When this parameter is turned to 1, the code prints NC2O matrix corresponding to
each rotor speed in the F06 file. This information can be very useful in identifying reasons for mode tracking
failure.
Additional guidelines and limitations for mode tracking are described below:
CAMPBLL option is not supported in SOL 200 and SOL 400 for ANALYSIS = DCEIG/MCEIG.
Only the modes with positive imaginary part are used for mode tracking (to avoid repeated
eigenvalues.)
Eigenvector based mode tracking is not supported for analysis in rotating reference frame.
For both approaches, damping ratio is also tracked while tracking eigenfrequencies. The
results produced from mode tracking can be extracted in OP4 using following assign
statements:
$ Extract results for numerical mode tracking
ASSIGN  OUTPUT4=&amp;lsquo;freq_nmt.op4&amp;rsquo;,UNIT=71,FORM=FORMATTED,DELETE $ MODE FREQS
ASSIGN  OUTPUT4=&amp;lsquo;rot_nmt.op4&amp;rsquo;,UNIT=72,FORM=FORMATTED,DELETE $ ROTOR SPEED
ASSIGN  OUTPUT4=&amp;lsquo;dmp_nmt.op4&amp;rsquo;,UNIT=73,FORM=FORMATTED,DELETE $ DAMPING RATIO
$ Extract results for eigenvector based mode tracking
ASSIGN  OUTPUT4=&amp;lsquo;freq_evmt.op4&amp;rsquo;,UNIT=81,FORM=FORMATTED,DELETE $ MODE FREQS
ASSIGN  OUTPUT4=&amp;lsquo;rot_evmt.op4&amp;rsquo;,UNIT=82,FORM=FORMATTED,DELETE $ ROTOR SPEED
ASSIGN  OUTPUT4=&amp;lsquo;dmp_evmt.op4&amp;rsquo;,UNIT=83,FORM=FORMATTED,DELETE $ DAMPING RATIO
These OP4 files can be imported in MSC PATRAN to produce Campbell Diagram.
Mode Identification
Complex eigenvectors for rotors demonstrate whirl motion. It can be forward whirl or backward whirl in
nature. Using complex eigenvectors, it is possible to determine the nature of the whirl motion (Reference 2).
This approach makes use of complex displacement in the two directions orthogonal to rotor spin axis. As a
result, this method may not work well when rotors are reduced using normal modes.&lt;/p&gt;
&lt;p&gt;199 Chapter 7: Complex Eigenvalue Analysis for Rotors
Complex Eigenvalue Analysis for Rotors
Main Index
For a rotor spinning about the Z axis with the X and Y axis being orthogonal to the spin axis, let the complex
displacement be given by:
Whirl motion at each rotor grid can be expressed as a combination of forward whirl and backward
whirl motion. Using the approach described in Ref 2, it is possible to determine the magnitude of
forward whirl and backward whirl radii. Final expression for these radii is given by:
Forward whirl radius:
Backward whirl radius:
Whirl direction is determined by looking at the difference between the two radii:
If (w&amp;lt;0), then it represents forward whirl motion, while if (w&amp;gt;0) then it represents backward whirl motion.
In case w=0, it indicates pure bending motion. This analysis can be done for each rotor grid to determine the
whirl direction.
In the current implementation, it is possible to extract values of w, wf, and wb for each rotor grid, if desired.
Since V2018,  the mode identification approach is available for 1D rotors defined using ROTORG entry.
Mode Identification
In order to identify a mode, the following values are determined using all the rotor grids:
max(w),min(w)
Based on the value of these parameters, the whirl mode is identified using following rules:
|wmax| &amp;gt; 0.8 and |wmin| &amp;lt; 0.005 : Backward Whirl Mode (BW)
|wmax| &amp;gt; 0.1 and |wmin| &amp;lt; 0.005 : Partial Backward Whirl Mode (BP)
|wmax| &amp;lt; 0.005 and |wmin| &amp;gt; 0.8 : Forward Whirl Mode (FW)
|wmax| &amp;lt; 0.005 and |wmin| &amp;gt; 0.1 : Partial Forward Whirl Mode (FP)
|wmax| &amp;gt; 0.005 and |wmin| &amp;gt; 0.1 : Mixed Whirl Mode (MX)
|wmax| &amp;gt; 0.1 and |wmin| &amp;gt; 0.005 : Mixed Whirl Mode (MX)
If any of the above criterion are not satisfied, code looks for the presence of axial (AX) and torsion
(TR) modes.uxuxRiuxI+ =
uyuyRiuyI+ =
wf1
2&amp;mdash;uxRuyI+ 2u–xIuyR+ 2+ =
wb1
2&amp;mdash;uxRuyI– 2uxIuyR+ 2+ =
wwbwf–
wbwf+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash; =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example200
Main Index
Consider following example where the value of parameter “w” is obtained for four different modes
for all the rotor grids.
For Mode A, |wmax|=0.9998 and |wmin|=0.0005. Thus, according to the first criteria, this mode
is identified as a Backward Whirl (BW) mode.
For Mode B, |wmax|=0.0027 and |wmin|=0.9987. Thus, according to the third criteria, this mode
is identified as a Forward Whirl (FW) mode.
For Mode C, |wmax|=0.0039 and |wmin|=0.4142. Thus, according to the fourth criteria, this mode
is identified as a partial Forward Whirl (FP) mode.
For Mode D, |wmax|=0.2724 and |wmin|=0.0054. Thus, according to the sixth criteria, this mode
is identified as a Mixed Whirl (MX) mode.
Example
In this section, above equations are used to determine whirl and critical frequencies for a representative rotor
model. The analysis is performed in both fixed and rotating coordinate systems. For the purpose of
comparison, same rotor is modeled using 1-D elements (ROTORG), axisymmetric harmonic elements
(ROTORAX), and solid elements (ROTOR). For each case, first the Campbell diagram is obtained using
asynchronous analysis, and then in the next step, critical frequencies are obtained using synchronous analysis.
The finite element models used in the analysis are shown in Figure 7-1. Since the rotor model is symmetric,
the problem can be analyzed in both fixed and rotating reference frame. When analyzed in rotating reference
frame, the user needs to ensure that the stator portion of the model is symmetric.W Mode A Mode B Mode C Mode D
Grid 1 0.0008 -0.0027 -0.0039 0.0062
Grid 2 0.3812 -0.4381 -0.0806 0.1316
Grid 3 0.5265 -0.5942 -0.0874 0.1313
Grid 4 0.6639 -0.7351 -0.0788 0.0733
Grid 5 0.7909 -0.8579 -0.0360 -0.0054
Grid 6 0.9998 -0.9987 -0.0535 0.1426
Grid 7 0.8327 -0.8719 -0.2335 -0.0047
Grid 8 0.6530 -0.7217 -0.4142 0.1001
Grid 9 0.4678 -0.5433 -0.3714 0.2724
Grid 10 0.0005 -0.0097 -0.0323 0.0702
max(w) 0.9998 -0.0027 -0.0039 0.2724
min (w) 0.0005 -0.9987 -0.4142 -0.0054
Mode Type BW FW FP MX&lt;/p&gt;
&lt;p&gt;201 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Figure 7-1  NM Rotor modeled using three different elements
Analysis in Fixed Reference Frame
First, the analysis is performed in fixed reference frame, and Campbell diagram and critical frequencies are
obtained for the above rotor models. For the first case, the rotor is supported with symmetric springs at two
of the nodes.
Case 1: Spring stiffness used: KXX = KYY = 4.38x107 N/m2
The Campbell diagram for this case is shown in Figure 7-2. In case of 1-D modeling, two different modeling
techniques are applied using CBAR and CBEAM elements. It can be seen here that at 0 RPM, natural
frequencies predicted by different models are very close to each other. Results for variation of whirl frequency
with rotor speed show that all the models considered show good match for lower frequencies; however, results
start to separate for higher frequencies.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example202
Main Index
Figure 7-2  Campbell Diagram in the fixed system
Critical frequencies can be obtained using the Campbell diagram by determining the point of intersection of
whirl frequency line with 45 degree line (dotted black line) as shown in Figure 7-2. Critical frequencies can
also be obtained by performing synchronous complex eigenvalue analysis by selecting SYNC option in
RGYRO. Results obtained for different models are listed in Table 7-1. Mode shapes for the first three forward
whirl bending critical frequencies is shown in Figure 7-3. The results show that the mode shapes captured by
beam model and solid element model for this simple rotor model look similar.&lt;/p&gt;
&lt;p&gt;203 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Figure 7-3  Bending mode shapes
In the first test case, bearings stiffness used at the ends did not include cross-stiffness. It is possible to include
the effects of cross-stiffness in springs indirectly using CBUSH or DMIG entry. In case KXX = KYY and KXY=
KYX, it is possible to define cross stiffness using CBUSH. However, for more general cases, use of DMIG
entry is recommended. In this modified case, following values are used for spring stiffnesses in the analysis.
Case 2: KXX = KYY = 3.5025 x 107 N/m2Table 7-1  Critical frequencies in fixed reference frame
Mode type Frequencies (Hz)
Bar Model Beam Model Axi Model Solid Rotor
1st Bending Backward Whirl 259.1 257.3 257.1 257.63
1st Bending Forward Whirl 282.5 284.7 279.9 280.42
2nd Bending Backward Whirl 794.4 767.6 744.6 746.93
2nd Bending Forward Whirl 795.7 820.1 800.1 804.19
Torsion Mode 1097.9 1025.4 1005.79
3rd Bending Backward Whirl 1122.4 1088.7 1117.5 1130.72
3rd Bending Forward Whirl 1529.2 1628.6 1528.5 1457.38
Beam Model Solid Element Model
Bending
Mode 1
Bending
Mode 2
Bending
Mode 3&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example204
Main Index
KXY = KYX = 0.8755 x 107 N/m2
Both the available approaches are shown in Figure 7-4. The results obtained here compare well with those
obtained by Geradin et al. (Geradin and Kill, 1984), see .
Figure 7-4  Approach to define cross stiffness for bearings
In the next case, the damping is introduced in the fixed system through the spring supports at the end (also
referred as external damping).
Case 3: KXX = KYY = 4.38x107 N/m2
BXX = BYY = 2.627x103 N/mTable 7-2  Critical Frequencies with modified support
Mode type Frequencies (Hz)
Bar Model Beam Model Axi Model Solid Rotor
1st Bending Backward Whirl 232.4 231.6 231.1 232.25
1st Bending Forward Whirl 273.1 274.1 270.8 271.34
2nd Bending Backward Whirl 657.6 655.4 643.1 647.52
2nd Bending Forward Whirl 794.8 793.6 772.7 775.96
T orsion Mode 1036.8 1006.1 1004.34
3rd Bending Backward Whirl 1097.9 1025.4 1026.6 1037.20
3rd Bending Forward Whirl 1472.1 1580.2 1481.9 1456.01&lt;/p&gt;
&lt;p&gt;205 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Same damping can also be introduced in the rotating system by defining spring supports on grid points which
are part of the rotor, as shown in Figure 7-5 (also referred as internal damping). When internal damping is
present in the system, circulation terms are generated and included in equation of motion.
Figure 7-5  CBUSH definition for non-rotating and rotating portion
(solid line: external damping, dotted line: internal damping)
Figure 7-6  Campbell diagram with damping in stator&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example206
Main Index
The effect of internal and external damping on complex eigenfrequencies and damping ratios is shown in
Figure 7-6 and Figure 7-7, respectively. The Campbell diagram presented in Figure 7-6 shows small effect of
damping on eigenfrequencies. However, the damping ratios shown in Figure 7-7 show very different results for
the internal and external damping cases. In case of external damping (defined in nonrotating portion),
damping results in positive damping ratio indicating increase in system stability. The results also show
increase/decrease in damping ratio with rotor speed, depending on the whirl mode. However, for the case
with internal damping, forward whirl modes demonstrates significant decrease in damping ratio with increase
in rotor speed and highlight that these modes may become unstable at certain rotor speed.
Figure 7-7  Effect of internal and external damping
Mode Tracking Example
Mode tracking feature implemented since V2018 i s demonstrated using the Nelson-McVaugh rotor model
shown earlier in Figure 7-1.
The range of rotor speed for analysis is specified using the DDVAL entry, as described below.
Numerical Mode Tracking
Result obtained using numerical mode tracking approach is shown in Figure 7-8
DDVAL 22 8000.0 THRU 10. BY -400.
CAMPBLL 15 SPEED 22 FREQ&lt;br&gt;
1 0.85 0  1&lt;/p&gt;
&lt;p&gt;207 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Figure 7-8  Numerical Mode tracking results for 3D rotor
Eigenvector based mode tracking
Figure 7-9  Eigenvector based Mode tracking results for 3D rotor
The Campbell diagram obtained using eigenvector based mode tracking is presented in Figure 7-9. It matches
the Campbell diagram shown in Figure 7-8. Here, it appears that mode tracking has failed for mode 5 and 6
at 144000 RPM (2400 Hz) speed. This can be observed in the output provided in F06 file for this particular
rotor speed.
The mode tracking information produced in F06 file when PRTCOR parameter is turned to 1 is described
below:&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example208
Main Index
The modal correlation matrix is the value of NC2O parameter for each pair of mode at two rotor speeds
where frequencies are being tracked.
Each term of the NC2O matrix is compared to CORU parameter, and it is turned to 1 if its greater than
CORU and turned to 0 if it is less than CORU.
Based on the result obtained above, it is determined if the modes have switched or if modes have failed to
track.
For this particular case, mode tracking failure is due to two modes being very close to each other at a particular
rotor speed. It is possible to avoid this mode tracking failure by excluding this rotor speed from the analysis. MODAL CORRELATION MATRIX (PRINTED ROW-WISE)
0.9982 0 0.0001044 0 0.0004881 0.0001539 0 0 0 0.0001434 0
0 0.9984 0 0 0 0 0 0.000197 0 0 0
0 0 0.9972 0 0.001529 0.0004959 0 0 0.0001572 0.0001493 0
0 0 0 0.9994 0 0 0 0.0001159 0 0 0.0001963
0 0 0.0002733 0 0.6113 0.3881 0 0 0 0 0
0.0005172 0 0.001699 0 0.3854 0.6108 0 0 0.0002347 0.0005181 0
0 0 0 0 0 0 0.9999 0 0 0 0
0 0.0002442 0 0.0001368 0 0 0 0.9942 0 0 0.004252
0 0 0.0001635 0 0.0001765 0 0 0 0.9992 0.0002286 0
0 0 0 0.0001813 0 0 0 0.004441 0 0 0.9939 0.0001403 0 0.0001281 0 0.0004396 0.0001396 0 0 0.0002357 0.9981 0
MODAL CORRELATION MATRIX AFTER FILTER
1 0 0 0 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0 0 0
0 0 1 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0
0 0 0 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 1 0&lt;br&gt;
MODE TRACKING FAILED FOR MODE        5 MODE TRACKING FAILED FOR MODE        6
MAPPING WITH RESPECT TO PREVIOUS ROTOR SPEED
1       1
2       2
3       3        4       4
5       5  MODE FAILED
6       6  MODE FAILED        7       7        8       8
9       9
10      11  MODE SWITCHED
11      10  MODE SWITCHED&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P12</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_012/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_012/</guid>
      <description>
        
        
        &lt;p&gt;209 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Results obtained for this case are given in the following figure
Figure 7-10  Revised Mode Tracking Results
Here, the modal correlation matrix for rotor speed of 2800 Hz can be visualized as:
Figure 7-11  Modal CorrelationDDVAL   22      8000.   7600.   7200.   6800.   6400.   6000.   5600.   +&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  5200.   4800.   4400.   4000.   3600.   3200.   2800.   2000. 
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1600.   1200.   800.    400.    10. 
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example210
Main Index
Mode Identification Example
The test case used to demonstrate mode identification feature is shown in Figure 7-11. It consists of 9 1D
beam elements defined using 10 grids. Its supported at the ends by CBUSH elements and has 5 additional
concentrated mass elements.
Figure 7-12  Test Case for Mode Identification
The Campbell diagram for this case and the mixed whirl modes identified are shown in Figure 7-12. In the
mixed whirl modes identified for this model, they appear at the intersection of forward and backward whirl
modes. MAPPING WITH RESPECT TO PREVIOUS ROTOR SPEED
1       1
2       2
3       3        4       4
5       6  MODE SWITCHED
6       5  MODE SWITCHED        7       7         8       8
9       9
10      11  MODE SWITCHED       11      10  MODE SWITCHED&lt;/p&gt;
&lt;p&gt;211 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Figure 7-13  Mixed Whirl Modes identified from the analysis
According to the results presented in Campbell Diagram, one of the mixed whirl mode appears at 5000 RPM.
The value of parameter “w” for the mixed whirl mode at 5000 RPM is presented in Table 7-3. It can be seen
here that nodes 5 and 7 have forward whirl motion while the remaining nodes have backward whirl motion.
The corresponding mode shape is shown in Figure 7-13. The mixed whirl nature of the mode can be seen in
the animated mode shape.
Table 7-3  Value of whirl identification
parameter
Grid W
Node 1 0.0062
Node 2 0.1316
Node 3 0.1313
Node 4 0.0733
Node 5 -0.0054
Node 6 0.1426
Node 7 -0.0047
Node 8 0.1001
Node 9 0.2724
Node 10 0.0702&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example212
Main Index
Figure 7-14  Mode shape for the whirl mode
Analysis in Rotating Reference Frame
The rotor model developed using solid elements can also be analyzed in the rotating coordinate system using
the ROTOR entry. The Campbell diagram obtained for this case is shown in Figure 7-15. The Campbell
diagram for analysis in rotating reference frame looks different from that obtained from analysis in the fixed
reference frame (see Figure 7-2). For the rotating reference frame Campbell diagram, the forward whirl critical
frequencies are identified by looking at the point of intersection of whirl frequency line with X axis (find Ω
such that ω = 0), while backward whirl frequencies are obtained by determining the point of intersection of
frequency lines with line corresponding to twice the rotor speed ( ω = 2 Ω shown in black, starting from
origin).
As in the fixed reference frame analysis, critical frequencies can also be obtained directly using the
synchronous analysis option in RGYRO for SOL 107. However, forward and backward critical frequencies
are obtained using two different analyses. Backward whirl critical frequency requires the WHIRLOPT
parameter to be listed as “BWD.” Results obtained using synchronous analysis are shown in Table 7-4&lt;/p&gt;
&lt;p&gt;213 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
Figure 7-15  Campbell diagram in rotating reference frame
Use of Whirl Parameter for Asynchronous Analysis
In complex eigenvalue analysis, it is sometimes desirable to specify whirl speed instead of WR3 parameter.
The whirl damping parameter (WR3WRL) is defined in the RGYRO entry. When this parameter is defined
in asynchronous complex eigenvalue analysis, the structural damping in rotors is included in the analysis as
viscous damping matrix using the following expression:
where,  and  are user-specified rotor speeds for Rotor 1 and Rotor 2 respectively.
For this rotor damping terms, corresponding circulation matrices are also generated and included in the
analysis. Table 7-4  Critical speeds in rotating reference frame
3D Rotor (Hz) 3D Rotor (RPM)
FWD Whirl BWD Whirl FWD Whirl BWD Whirl
1st Bending 274.29 252.59 16458 15155
2nd Bending 790.63 731.79 47438 43907
Torsion 1006.31 60379
BRKR1GR1
1refWR3WRL –&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KR2GR2
2refWR3WRL –&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash; + =
1ref2ref&lt;/p&gt;
&lt;h1&gt;MSC Nastran Rotordynamics User’s Guide
Example214
Main Index
Analysis in Fixed and Rotating Reference Frame
The main criteria used in determining whether to perform analysis in fixed or rotating reference frame is
dependent on the symmetry present in the rotor. In some cases, when both the rotor and the stator portion
of the model are symmetric, it is possible to analyze the same model in both fixed and rotating coordinate
reference frame. Based on the element implementation, 1-D elements like CBEAM and CBAR are better
suited for analysis in fixed system whereas higher order elements like shell and solid elements are better suited
for analysis in the rotating reference frame. For a simple case shown here, analysis is performed in both
rotating and fixed reference frame and results obtained for Campbell diagram and critical frequencies are
compared.
Relation between frequencies
Consider a simplified case where the analysis in fixed reference frame results in purely imaginary complex
conjugate pair of eigenvalues: . For this complex eigenvalue, corresponding response is of the
form:
where u and v are lateral rotor displacement perpendicular to the axis of rotation and  and  are
corresponding phase differences. If Ω is the rotor speed, the corresponding mode shape in the rotating
reference is given by:
Using the sum and difference formulae for sine and cosine, it can be shown that the frequencies
appear in the solution. For example, the expression for  is given by:
This shows that the eigenfrequencies σ in the fixed reference frame are transformed to frequencies&lt;br&gt;
in the rotating reference frame. For the purpose of demonstration, consider a simple Jeffcott rotor model
shown in Figure 7-16. The rotor shaft is considered to be massless and rigid. The disk is attached at the center
of the shaft. p i=
u
v u0tu+ cos
v0tv+ cos
     &lt;/h1&gt;&lt;h1&gt;uv
u
v t cos t sin
t sin– t cosu0tu+ cos
v0tv+ cos
     &lt;/h1&gt;&lt;p&gt; u
u1
2&amp;mdash;u0tut –u– + cos + + + cos =
1
2&amp;mdash;v0tvt –v + sin + + + sin
&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;215 Chapter 7: Complex Eigenvalue Analysis for Rotors&lt;/dt&gt;
&lt;dt&gt;Example&lt;/dt&gt;
&lt;dt&gt;Main Index&lt;/dt&gt;
&lt;dt&gt;Figure 7-16  Simplified rotor model&lt;/dt&gt;
&lt;dt&gt;The Campbell diagram for this case is shown in Figure 7-17. Here, mode 1 and mode 2 correspond to the&lt;/dt&gt;
&lt;dt&gt;translational motion whereas the mode 3 and mode 4 correspond to rotation of the shaft. The variation of&lt;/dt&gt;
&lt;dt&gt;these modes with rotor speed is different in fixed and rotating coordinate reference frame. However, for this&lt;/dt&gt;
&lt;dt&gt;simple case, it is possible to obtain the Campbell diagram in a rotating coordinate reference frame using the&lt;/dt&gt;
&lt;dt&gt;Campbell diagram in a fixed reference frame by using the following expressions:&lt;/dt&gt;
&lt;dd&gt;First backward whirl mode&lt;/dd&gt;
&lt;dd&gt;Firs t forward whirl m ode&lt;/dd&gt;
&lt;dd&gt;Second backward whirl mode&lt;/dd&gt;
&lt;dd&gt;Second forward whirl mode
Results obtained using this transformation are compared with those obtained in the rotating reference frame
analysis in Figure 7-18. It can be seen here that both the set of results match very well.
11+ =
22– =
33+ =
44– =&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example216
Main Index
Figure 7-17  Campbell Diagram in Fixed and Rotating System
Figure 7-18  Campbell Diagram in Rotating System
Additional Options for Damping
Additional options are introduced in MSC Nastran to control damping applied to rotor and stator portion
of the model. In order to implement these changes, an additional parameter called “RDBOTH” was&lt;/p&gt;
&lt;p&gt;217 Chapter 7: Complex Eigenvalue Analysis for Rotors
Example
Main Index
introduced in the MDLPRM entry. The parameter is allowed to take values of 1, 2, 4, 8, 16 or any
combination of it them except both 4 and 8 are included, such as 12, 13, 14, etc. D efault value for this
parameter is 0.
Effect of MDLPRM, RDBOTH, 1
1.Rayleigh damping specified in the model through “PARAM, ALPHA1” and “PARAM, ALPHA2” is
applied to the complete model (both stator and rotor).
2.Rayleigh damping specified through “ALPHAR1” and “ALPHAR2” in RSPINR/RSPINT is set to
0.0.
3.Rayleigh damping is also applied to “ User supplied system ” matrices that are supplied to MSC Nastran
via TF, K2PP, M2PP, and B2PP Nastran input
Modified equation of motion when “MDLPRM, RDBOTH, 1” is used in the analysis is given by:
Note that here Rayleigh Damping parameters, α1 and α2, defined for the non-rotating component are
applied to the mass and stiffness matrix of the complete model (including rotors).
Effect of MDLPRM, RDBOTH, 2
When the parameter RDBOTH is assigned a value of “2”, the circulation terms are ignored in the analysis.
In this case, no distinction is made between damping applied to rotor and stator and both are included as
part of [ B] matrix. Modified equation of motion when “ MDLPRM, RDBOTH, 2 ” is used in the analysis is given
by: Mg··t+
BS1M2KBHjrefGjBRj + 
j1=n
+ + + +

g·t+

1iG+KSiK4iKH KRjjrefBC
RjGR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KC
Rj +
+

j1=n
+ + +
           
Ft =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example218
Main Index
Effect of differential stiffness
Figure 7-19  Hollow rotor model
Effects of stress stiffening are important for 3-D rotors, especially when the model includes large flexible
structure away from the axis of rotating, high rotational speeds, and/or large diameter blades. In order to
demonstrate its effect, a hollow shell rotor model is analyzed in rotating reference frame as shown in
Figure 7-19. Results shown in Figure 7-20 highlight the increase in stiffness with increase in rotor speed. The
flag for generating differential stiffness can be turned on by one of the following options:
MDLPRM RDBOTH 4
OR
MDLPRM RDBOTH 8Mg··t+
BS1MS2KSBHS + + + + 
jrefGjBRjBHRj1RjMR2RjKRj+ + + + + 
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4Rj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRj+ +     
j1=n

       
g·t+
1iG+KSiK4SiKHS KRj
j1=n
+ + +
              
Ft =&lt;/p&gt;
&lt;p&gt;219 Chapter 7: Complex Eigenvalue Analysis for Rotors
Summary for Equation of Motion
Main Index
Figure 7-20  Effect of stress stiffness in rotating reference frame
Solid Line: without stress stiffening, Dotted Lines: with stress stiffening
Summary for Equation of Motion
Equations of motion for complex eigenvalue analysis are converted to the standard second order system prior
to solving them. Standard second order equation used to determine complex eigenvalues in MSC Nastran is
given by:
where [M]eq, [B]eq and [K]eq are equivalent mass, damping, and stiffness matrices, respectively, and these
matrices can be real or complex. In rotordynamic analysis, these matrices need not be symmetric.
For the asynchronous and synchronous analysis in fixed and rotating reference frame, equivalent matrices are
listed in Table 7-5.
Table 7-5  Coefficients for second order system of equations
Fixed Reference Frame
Table 7-6&lt;br&gt;
[M]eq [B]eq [K]eq
ASYNC [M] [B]S + [B]R + Ω[G] [K]+Ω[KC]R
SYNC [M]-i β[G] [B]S + [B]R + α[G] - iβ[KC]R [K]+ α[KC]Rp2MeqpBeqKeqgp0= + + &lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Summary for Equation of Motion220
Main Index
Rotating Reference Frame
Damping and circulation terms used for analysis in Fixed Reference Frame
If RDBOTH=16, the following damping and stiffness terms will be used for Complex Modes (either ASYNC
or SYNC option) in Fixed Reference Frame.Table 7-7&lt;br&gt;
[M]eq [B]eq [K]eq
ASYNC [M] [B]S +[B]R+2Ω[C] [K]+Ω[KC]S – Ω2[Z] + Ω2[KG]
SYNC (FWD) [Z] - [ KG] -i[KC]S [K]
SYNC (BWD) 4[M] +4[ C]+[Z]-[KG] 2[BS]+2[BR]-i[KC]S [K]
Table 7-8&lt;br&gt;
Damping Circulation
Solution: ASYNC option  (PARAM WR3, WR4 and WRH defined)
Solution: SYNC option  (PARAM WR3, WR4 and WRH defined)iBR1RMR2RKR + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KR1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4R + +
1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHR       
refBC
R1RMC
R2RKC
R + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KC
R1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4C
R + +
1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHC
R        
iBR1RMR2RKR + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KR1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4R + +
1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHR       
RBC
R1RMC
R2RKC
R + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KC
R1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4C
R1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHC
R + +     
R+BC
R1RMC
R2RKC
R + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KC
R1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4C
R1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHC
R + +     &lt;/p&gt;
&lt;p&gt;221 Chapter 7: Complex Eigenvalue Analysis for Rotors
Summary for Equation of Motion
Main Index
The damping  changes to
and the  /[ /  will be
added into the stiffness term using the imaginary form .
Examples used in this chapter are available under the following folder:  ../tpl/ugrotor/ and ../tpl/rotv18/. A
brief description of these examples is given below:
Table 7-9&lt;br&gt;
Input File Name Description
rug_7_1 NM Rotor with CBEAM elements, Campbell Diagram (ROTORG).
rug_7_2 NM Rotor with CBAR elements, campbell Diagram (ROTORG).
rug_7_3 NM Rotor with CQUADX elements, campbell Diagram (ROTORAX).
rug_7_4 NM Rotor with Solid elements, campbell Diagram  (ROTOR).
rug_7_5 NM Rotor with CBEAM elements, Synchronous Analysis (ROTORG).
rug_7_6 M Rotor with CBAR elements, Synchronous Analysis (ROTORG).
rug_7_7 NM Rotor with CQUADX elements, Synchronous Analysis (ROTORAX).
rug_7_8 NM Rotor with Solid elements,Synchronous Analysis  (ROTOR).
rug_7_9 NM Rotor with CBEAM elements, Synchronous Analysis (ROTORG) - Case 2.
rug_7_10 NM Rotor with CBAR elements, (ROTORG)- Case 2.
rug_7_11 NM Rotor with CQUADX elements, (ROTORAX)- Case 2.
rug_7_12 NM Rotor with Solid elements, (ROTOR)- Case 2.
rug_7_13 NM Rotor with CBEAM elements, Synchronous Analysis (ROTORG) - Case 3,
Internal Damping.
rug_7_14 NM Rotor with CBEAM elements, Synchronous Analysis (ROTORG) - Case 3,
External Damping.
rug_7_15 CBEAM ROTOR in rotating co-ordinate system, Campbell Diagram.
rug_7_16 CBEAM ROTOR in rotating co-ordinate system, Forward whirl.
rug_7_17 CBEAM ROTOR in rotating coordinate system, Backward whirl.iBR1RMR2RKRBHR + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KR1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4R + +
1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHR +        
iBR1RMR2RKRBHR + + +   KRK4RKHR
iGRKRK4RKHR + +  &lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Summary for Equation of Motion222
Main Index
rug_7_18 Shell model without differential stiffness.
rug_7_19 Shell model with differential stiffness.
../tpl/rotv18/r3dmd
tr2.dat3D NM rotor model for mode tracking
../tpl/rotv18/r1d10
7mdchk_30.datMode Identification test caseTable 7-9&lt;br&gt;
Input File Name Description&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 8: Frequency Response Analysis
MSC Nastran Rotordynamics User’s Guide
8Frequency Response
Analysis
Introduction      224
Equation used in the Analysis (Reference Frame)      224&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction224
Main Index
Introduction
Frequency response analysis is a method used to compute structural response to steady-state oscillatory
excitation. Frequency response analysis can be performed with the rotors spinning at user specified rates or
excitation that is synchronous with the reference rotor. In frequency response analysis the excitation is
explicitly defined in the frequency domain. All of the applied forces are known at each forcing frequency.
Forces can be in the form of applied forces or synchronous loads due to unbalance in rotor.
In MSC Nastran, direct  frequency response can be obtained using SOL 108 while modal  frequency response
analysis can be performed using SOL 111.
Asynchronous Analysis
Calculation of response with the rotors spinning at set speeds is performed using the asynchronous option in
RGYRO . The user specifies the rotor speeds, and the corresponding gyroscopic terms are determined by the
code and added to the equation of motion, and the response is determined. Asynchronous analysis is required
when the excitation frequency is independent of the rotor speed and usually originating from outside the
rotor component.
Synchronous Analysis
Calculation of frequency response with the excitation synchronous with the reference rotor is performed
using the synchronous option in RGYRO . The user specifies the rotor speed range, the gyroscopic terms are
determined for each frequency and added to the equation of motion. There are two methods for determining
the gyroscopic terms. The first method calculates the terms for each frequency and adds them to the equation
of motion (default option). The second method estimates the gyroscopic terms using a least-mean-squared
fit of the terms within the analysis range (PARAM, GYROAVG &amp;lt; 0).
Equation used in the Analysis (Reference Frame)
Asynchronous Analysis
For frequency response with asynchronous excitation, Ω for each rotor is constant and can be determined
from the rotation speed of the reference rotor, Ωref, and relative rotation rates specified by the user. The
equation of motion to be solved is:
ωNatural frequency of the system
[M] Mass matrix
i     &lt;br&gt;
Ω(ω)Rotor Speed
[G]  Gyroscopic matrix–2MiGBRBS KKCR + + + + + gF = &lt;/p&gt;
&lt;p&gt;225 Chapter 8: Frequency Response Analysis
Equation used in the Analysis (Reference Frame)
Main Index
[BS] Stator damping matrix
[BR] Rotor damping matrix
[K]   Stiffness matrix
Circulation terms due to damping in rotating system
g(ω)Complex frequency response
Expanding the above equation to include all options available to define damping
where j references individual rotors. The factor 1/ω will be determined for each excitation frequency, similar
to frequency-dependent elements.
For the option to bypass the frequency-dependent lookup of rotor speeds (PARAM,GYROAVG,-1), the
equation of motion to be solved is:KRC
–2M+
iBS1MS2KSBHS + + + +
jrefGjBR +jBHRj1RjMR2RjKRj+ + +
   
j1=n

      
+
1iG+KSiK4SiKHS + + +
KRj1iGRj+ iK4RjiKHRj+ + +
jrefBRCjBHRCj1RjMRC2RjKRCj+ + + +
GR
&amp;mdash;&amp;mdash;&amp;ndash;KRCj1
&amp;mdash;-K4RCj1
&amp;mdash;-KHRCj+ + 

       
j1=n

                   
ga F =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation used in the Analysis (Reference Frame)226
Main Index
The main difference here is the usage of parameters WR3, WR4 and WRH for structural damping terms.
Use of these parameters avoids the division by excitation frequency observed in the previous equation. Also,
in case the parameters WR3, WR4 and WRH are not defined in the analysis, then the corresponding
structural damping terms are not included in the analysis.
Synchronous Analysis
For frequency response with synchronous excitation, the excitation frequency is equal to the spin rate of the
reference rotor, that is, ω = Ωref. The spin rates of the additional rotors can be determined from the relative
spin rates specified by the user. The equation of motion to be solved is:
Substituting
The above equation can be expanded based on different options available for defining damping for the stator
and for rotors.–2M+
iBS1MS2KSBHS + + +  +
jrefGjBR +jBHRj1RjMR2RjKRj+ + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4Rj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRj+ +    
j1=n

      
+
1iG+KSiK4SiKHS + + +
KRj+jrefBRCjBHRCj1RjMRC2RjKRCj+ + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ +

     
j1=n

                 
ga F =
2M – iBSBRjG KKCR + + + +  +
   g F =
ref=
ref2M – irefBSBRjrefG KjrefKCR + + + +  +
   gref  =
Fref &lt;/p&gt;
&lt;p&gt;227 Chapter 8: Frequency Response Analysis
Equation used in the Analysis (Reference Frame)
Main Index
As compared to the asynchronous analysis, the gyroscopic and the circulation terms for synchronous analysis
are treated differently.
For the option to bypass the frequency-dependent lookup of rotor speeds (PARAM,GYROAVG,-1), Ωj for
each rotor is written as a linear function dependent on the reference rotor spin rate:
The scaling factor,  and , is determined from the relative spin rates specified by the user on the RSPINR
entries. The Ωref in the 1/ Ωref terms are replaced by the values of user parameters WR3 and WR4. The
equation of motion to be solved is:–2M+
iBS1MS2KSBHS + + +  +
jGjBR +jBHRj1RjMR2RjKRj+ + +  
j1=n

      
+
1iG+KSiK4SiKHS + + +
KRj1iGRj+ iK4RjiKHRj+ +
+jBRCjBHRCj1RjMRC2RjKRCj+ + + +
GR
&amp;mdash;&amp;mdash;&amp;ndash;KRCj1
&amp;mdash;-K4RCj1
&amp;mdash;-KHRCj+ + 

       
j1=n

                   
ga F =
jjjref+ =
jj&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation used in the Analysis (Reference Frame)228
Main Index
As in the asynchronous case with GYROAVG parameter, in case the parameters WR3, WR4 and WRH are
not defined in the analysis, then the corresponding structural damping terms are not included in the analysis.
Example: NM (Nelson-McVaugh) Rotor
In this example, frequency response analysis is performed to obtain displacement in response to synchronous
excitation by the unbalance loads for the NM rotor described earlier. Here are the changes made in the
analysis deck to define synchronous unbalance loads
Case Control
FREQ = 100
DLOAD = 10&lt;br&gt;
Bulk Data
FREQ1   100     0.   1.0   1000
RGYRO       1       SYNC      4      RPM                   10000.0
$ UNBALANCE LOADS
UNBALNC 10       122.68         41      1.     0.     0.
1.-4      0.0    0.0        0.0       1000.
As described in the previous chapter, for synchronous frequency response analysis, the DLOAD in case
control points to an unbalance entry in the bulk data. Also, the GYRO field needs to show “SYNC” as the
analysis option.
For this particular case, the variation of unbalance loads and displacement at the point of unbalance with
frequency is shown in Figure 8-1. It can be seen here that the load due to unbalance increases with the square ref–2MijGj
j1=n
–

+

irefBS1MS2KSBHS + + +  +
jGjBRjBHRj1RjMRj2RjKRj+ + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4Rj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRj+ +     &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;+
ijBRCjBHRCj1RjMRC2RjKRCj+ + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ +     
–
           
j1=n

             
+
1iG+KSiK4SiKHS + + +
KRj+jBRCjBHRCj1RjMRCj2RjKRCj+ + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ + 

    
j1=n

                           
garef   0=&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P13</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_013/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_013/</guid>
      <description>
        
        
        &lt;p&gt;229 Chapter 8: Frequency Response Analysis
Equation used in the Analysis (Reference Frame)
Main Index
of the excitation frequency. Also, the displacement results show a peak at the first forward whirl critical speed,
as expected.
Figure 8-1  Loads due to unbalance and corresponding displacement
Effect of Damping
In the next step, damping is introduced in the analysis through the spring supports. It is possible to define
damping in the fixed or rotating reference frame though CBUSH elements as shown in Figure 8-2. If the
damping is defined in the rotating coordinate reference frame, then the corresponding circulation terms are
included for analysis in the equations of motion.
Figure 8-2  Defining spring supports in fixed and rotating reference frame&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation used in the Analysis (Reference Frame)230
Main Index
Results obtained with external damping, internal damping, and internal damping without circulation effects
(RDBOTH=2) are shown in Figure 8-3. As compared to the displacement results obtained in Figure 8-1, the
displacement obtained with internal damping is almost the same as no damping case, as shown in
Figure 8-3 (a). That means the viscous damping effect is almost canceled by the viscous damping circulation
terms when the damping is defined as the rotating components. For the external damping (defined on the
non-rotating components) case, the displacement obtained in Figure 8-3 (b) is much smaller due to the viscous
damping. If the circulation effect is turned off by setting RDBOTH=2, the internal and external damping
cases have the same results since the circulation terms are generated from the rotating components only in
the Fixed Coordinate. For this particular case, the difference between the displacements obtained with
external and internal damping including the circulation effect is significant, and using the external damping
definition and solving frequency response in the Fixed Reference Frame (FIX) is recommended to include the
viscous damping effect properly. For the same reason, using internal damping and solving frequency response
in the Rotating Reference Frame (ROT) is recommended for this beam rotor.
Figure 8-3  Effect of internal and external damping
Effect of GYROAVG parameter
The case with external damping was analyzed again with “PARAM, GYROAVG, -1”. The results obtained
for this case show small difference in results, see Figure 8-4. However, the computational time required for this
problem drops from 0.08 sec to 0.01 sec. Thus, this feature is useful for obtaining quick approximate results.
(a) (b)&lt;/p&gt;
&lt;p&gt;231 Chapter 8: Frequency Response Analysis
Equation used in the Analysis (Reference Frame)
Main Index
Figure 8-4  Effect of “Param, GYROAVG, -1 ”
Frequency Dependent Bearings
For linear frequency response analysis, linear frequency dependent bearing properties can be defined using
the PBUSHT card. Brief description of the PBUSHT card, which defines properties for the CBUSH  elements
is shown in Figure 8-5.
Figure 8-5  PBUSHT  entry to define frequency dependent bearing properties
Defines the frequency dependent properties or the stress dependent properties for a generalized spring and
damper structural element.
Format:PBUSHT Frequency Dependent or Nonlinear Force Deflection Spring and Damper Property
1 2 3 4 5 6 7 8 9 10
PBUSHT PID “K” TKID1 TKID2 TKID3 TKID4 TKID5 TKID6
“B” TBID1 TBID2 TBID3 TBID4 TBID5 TBID6
“GE” TGEID1 TGEID2 TGEID3 TGEID4 TGEID5 TGEID6
“KN” TKNID1 TKIND2 TKNID3 TKIND4 TKIND5 TKIND6
FDC FUSE DIR OPTION LOWER UPPER
FSRS LRGR&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation used in the Analysis (Reference Frame)232
Main Index
Modifications made in the bulk data to introduce the PBUSHT entry are shown below:
CBUSH   201     211     1091            0
CBUSH   202     211     1111            0
PBUSHT  211      K      1001    1001
B      1003    1003
PBUSH   211      K      4.38+7   4.38+7
B      2627.0   2627.0
TABLED1  1001
0. 4.38+7  250. 4.38+7 1000. 8.38+7 ENDT
TABLED1  1003
0. 2627.0  250. 2627.0 1000. 1627.0 ENDT
Note that both PBUSH and PBUSHT entries are defined in the analysis. For this analysis, the bearing
properties are kept unchanged till 250 Hz. Thereafter, the bearing stiffness has been increased while the
damping has been slightly reduced. Effect of these changes can be seen in  Figure 8-6 where the resonance peak
has shifted to the right due to increase in stiffness. Also there is small increase in peak amplitude due to
reduction in bearing damping.
Figure 8-6  Use of PBUSHT entry for frequency dependent bearing properties
Modal Analysis
In order to transform a test deck  from direct frequency response analysis to SOL 111 test deck, the following
changes are required:&lt;/p&gt;
&lt;p&gt;233 Chapter 8: Frequency Response Analysis
Equation used in the Analysis (Reference Frame)
Main Index
In Case Control
Change the solution sequence number and include a method card
SOL 111
CEND
METHOD = 100
Bulk Data
Include real eigenvalue analysis in the deck which points to METHOD defined in the case control.
EIGRL 100            10
The results obtained using SOL 111 show forces and displacement requested as part of output, just like direct
frequency response analysis. It also shows real eigenvalue analysis performed to extract the mode shapes for
modal analysis (see Figure 8-7).
Figure 8-7  Real Eigenvalue analysis performed for extracting modeshapes
Modal frequency response was performed using 10 eigenvalues and again with 50 eigenvalues. Results
obtained for these cases are shown in Figure 8-8 and compared with those obtained using SOL 108. It can be
seen that for all the three cases, the response is almost identical.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation used in the Analysis (Reference Frame)234
Main Index
Figure 8-8  Displacement obtained from real and modal frequency response analysis
Rotating Frame
The frequency response of the same beam rotor in rotating reference frame is approached by changing the
rotor definition as following. The damping from the spring support is defined as internal damping (CBUSH
attached to rotating portion).
As mentioned in Table 1-1, there are differences between analysis performed in the Fixed and the Rotating
reference system. T o compare the results of fixed and rotating frames, both the rotating structure and the non-&lt;/p&gt;
&lt;p&gt;235 Chapter 8: Frequency Response Analysis
Equation used in the Analysis (Reference Frame)
Main Index
rotating need to be axisymmetric about the spin axis. Under that limitation, the magnitude relationship
between the frames is  as explained briefly in Figure 8-9 for a circle orbit.
Results obtained using this transformation are compared with those obtained in the rotating reference frame
for a beam element rotor and a solid element rotor, as shown in Figure 8-10 and Figure 8-11. The results match
well for the beam element rotor. For the complicated solid element rotor case, the response in the rotating
reference frame is slightly ahead of the results in the fixed reference frame.
Figure 8-9  Relationship of Response between Fixed and Rotating Frames
Figure 8-10  Frequency response in fixed and rotating frames - Beam rotorMAGfix2 MAGrot=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation used in the Analysis (Reference Frame)236
Main Index
Figure 8-11  Frequency response in fixed and rotating frames - Solid rotor
The damping from the spring support can also be defined as external damping (CBUSH attached to non-
rotating portion) as mentioned previously in fixed analysis frame (FIX). For the external damping in rotating
analysis frame (ROT), ignoring the circulation effects for frequency response, however, is recommended by
setting RDBOTH to 2 through the Bulk Data entry MDLPRM.
Examples used in this chapter are available under the following folder:  .. \tpl\ugrotor. A brief description of
these examples is given below:
Table 8-1&lt;br&gt;
Input File Name Description
rug_8_1 Unbalance response for 1D beam rotor.
rug_8_2 Unbalance response for 1D beam rotor with external damping.
rug_8_3 Unbalance response for 1D beam rotor with internal damping.
rug_8_4 Unbalance response for 1D beam rotor with external damping and param
GYROAVG.
rug_8_5 Use of PBUSHT.
rug_8_6 Modal Analysis
rug_8_ 7 Unbalance response for beam rotor (ROT frame)
rug_8_ 8 Unbalance response for 3D solid element rotor (SOL111, FIX frame)
rug_8_ 9 Unbalance response for 3D solid element rotor (SOL111, ROT frame)&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 9: Transient Response Analysis
MSC Nastran Rotordynamics User’s Guide
9 Transient Response Analysis
Introduction      238
Equation of motion      238
Input file for transient analysis      241
Comparison with axisymmetric and 3D rotors      246
Usage of Nonlinear Elements      247
Mass and speed correction for Unbalance Loads      249
Rotating Frame Transient Analysis      254&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction238
Main Index
Introduction
T ransient analysis with rotordynamics includes gyroscopic terms and option to specify rotor imbalance. Both
nonlinear and direct linear transient response solutions internally calculate the gyroscopic and unbalance
force terms for each time step. The transient excitation is explicitly defined in the time domain. All of the
external forces applied to the structure are known at each instant in time. T ransient analysis also supports
usage of nonlinear bearing elements like NLRGAP , NLRSFD and NOLINi. Details related to general
transient analysis in MSC Nastran in provided in MSC Nastran Dynamic Analysis User’s Guide . Only details related
to rotordynamic analysis are provided in this section. Note that the modal transient solution sequence, SOL
112, is not supported for rotordynamic analysis. However, external SE approach can be used to obtain model
reduction, if required.
For transient analysis with rotordynamics, use of nonlinear transient solver like SOL 400 is recommended
due to enhanced numerical stability.
Equation of motion
Equation of motion solved in transient analysis is given by :
where, [KT] is a skew symmetric matrix and for each grid point in the model it is defined by:
Note that the equation of motion used for the transient analysis includes effect of rotor spin rate. Expanded
version of the above equation is given by:Mg··t BSBRtG + +  g·t KtKCR·
tKT + +  gt + + FSt =
KrT000000
000000
000000
000000
00000I11
0000-I110=&lt;/p&gt;
&lt;p&gt;239 Chapter 9: Transient Response Analysis
Equation of motion
Main Index
where ,
[M] T otal mass matrix for the model
[BS] Viscous damping from dampers in the stator portion
[MS] Mass matrix for the stator portion
[KS] Stiffness matrix for the stator portion
[BHS] Hybrid damping for the stator portion
α1, α2 Rayleigh damping parameters for stator portion
αj(t) Rotor speed for the jth rotor
[G] Gyroscopic matrix for the rotor
[BR] Viscous damping from dampers for the rotor
[MR] Mass matrix for the rotor
[KR] Stiffness matrix for rotor
[BHR] Hybrid damping for the rotor
α1R, α2R Rayleigh damping parameters for the rotor
GR Structural damping for the rotor defined in RSPINR
[K4R] Material damping for the rotor part
[KHR] Hybrid damping for the rotor part
WR3, WR4, WRH Parameters to convert structural damping to equivalent viscous damping.
G Structural damping for the stator portion
[K4S] Material damping for the stator portion
[KHS] Hybrid structural damping for stator
Circulation matrix due to [BR]
Circulation matrix due to [BHR]
Circulation matrix due to Rayleigh damping for rotors
Circulation matrix due to structural damping for rotors
Circulation matrix due to structural damping for rotorsMg··t+
BS1MS2KSBHS + + +  G
W3&amp;mdash;&amp;mdash;&amp;ndash;KS1
W4&amp;mdash;&amp;mdash;&amp;ndash;K4S1
WH&amp;mdash;&amp;mdash;&amp;mdash;KHS + + +
jtGjBRjBHRj1RjMR2RjKRj+ + + + +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4Rj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRj+ +    
j1=n

       
g·t+
KS+
KRjjtBRCjBHRCj1RjMRC2RjKRCj+ + + +
GRj
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRCj1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RCj1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRCj+ +     
·
jtKRTj+ +
     
j1=n

       
gt=Ft
BRC
BHRC
1MRC2KRC +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRC
1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RC&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation of motion240
Main Index
Unbalance Loads for Transient Analysis
Unlike its use in the frequency response, complex modes, and static solutions, the RGYRO  (Case)  does not
reference an RGYRO  Bulk Data entry. Instead, the RGYRO Case Control command references an UNBALNC&lt;br&gt;
Bulk Data entry. A brief description of the unbalance entry from QRG is shown in Figure 9-1.
Figure 9-1  Unbalance ( UNBALNC ) Entry for transient analysis
Variables relevant to describe the unbalance loads are described below:
Using these variables, forces and moments generated by unbalance loads can be expressed as:
Circulation matrix due to hybrid damping for rotor
{g (t)} State vector for transient analysis (D-set DOF)
F(t) Linear Loads and Nonlinear forces from bearings and connectors
MASS Mass of imbalance (m)
GRID Grid identification number for applying imbalance
X1, X2, X3 Components of vector used to define cylindrical coordinate system centered at GRID
ROFFSET Offset mass in the radial direction (r) in the unbalance coordinate system
ZOFFSET Offset mass in the Z direction (Z) in the unbalance coordinate system
THETA Angular position, in degrees, of the mass in the unbalance coordinate system.( θ)
UFT/UFR EPOINT to output unbalance forces and moments (for transient analysis only)1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRC
Used in rotordynamic analyses to specify a rotating unbalance load in terms of a cylindrical system with the
rotor rotation as the z-axis.
Format:UNBALNC Specifies an Unbalanced Load for Rotordynamic Transient or Frequency Response
Analysis
1 2 3 4 5 6 7 8 9 10
UNBALN
CSID MASS GRID X1 X2 X3
ROFFSET THETA ZOFFSET T/Fon T/FOFF
UFT1 UFT2 UFT3 UFR1 UFR2 UFR3
MCT1 MCT2 MCT3 MCR1 MCR2 MCR3
SCR1 SCR2 SCR3&lt;/p&gt;
&lt;p&gt;241 Chapter 9: Transient Response Analysis
Input file for transient analysis
Main Index&lt;/p&gt;
&lt;h1&gt;where,  (angular position for kth unbalance load)
Input file for transient analysis
The NM rotor described earlier is used again for the transient analysis. In this case, external loading is
obtained through the rotor imbalance, but any generic time dependent load can also be used in the analysis.
Figure 9-2  NM Rotor model for transient analysis
Changes required in different sections of the input file for transient analysis are described below:
a.Case Control Section
ECHO = SORT
SPC = 2
RGYRO = 10
TSTEP = 1&lt;br&gt;
SET 99 = 41
SET 98 = 95,92,93,94
DISP(SORT2,PHASE)=99
OLOAD(SORT2,PHASE)=99
NLLOAD(SORT2,PHASE)=99&lt;br&gt;
SDISP(SORT2) = 98F1t
F2tWTMASSmtrtj2tjkt cos ·
jtjt sin +  
mtrtj2tjkt sin ·
jtjt cos –       &lt;/h1&gt;&lt;p&gt;M1t
M2tZ01–
10F1t
F2t=
jtjttd
0+ =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Input file for transient analysis242
Main Index
b.Time Step and rotor speed definition in Bulk Data
TSTEPNL 1100000 .00001 10
+
+0
$ Rotors Relative Spin Rates
RSPINT 4910FREQ195
TABLED1 1
0.0 0.00.0050.0.5400.1000.400.
ENDT
c.Unbalance Load definition
$ UNBALANCE LOADS
UNBALNC 10     122.68   411.0.0.
1.-4 0.0  0.0     0.0     1000.
929394
EPOINT 92939495
Results obtained from the transient analysis are described below. Here also, we have considered the effect of
both internal and external damping, as described in the previous chapter. (also presented in Figure 9-3)
Figure 9-3  External and internal Damping for rotordynamic analysis&lt;/p&gt;
&lt;p&gt;243 Chapter 9: Transient Response Analysis
Input file for transient analysis
Main Index
Effect of External Damping
Variation of unbalance load and displacement with time is shown in Figure 9-4. The spin rate defined earlier
increases from 0 to 400 Hz in 0.5 seconds and then it stays constant. The unbalanced loads observed follow
the expected trend. The loads increase with square of rotor speed till 0.5 secs and then they stay constant for
rest of the analysis. Further insight into the results is presented in Figure 9-5 to Figure 9-8.
Figure 9-4  Unbalance loads and corresponding displacement from transient analysis
Figure 9-5  X-Y components of unbalance load
Figure 9-5 shows the variation of loads in X-Y direction due to rotor unbalance. Note that rotor is oriented
along the Z-direction and XY plane is perpendicular to the axis of rotation. It can be seen in the results that
loads in X and Y direction have a phase difference of 90 deg, as expected. The loads in the Y direction are
lagging behind by 90 deg.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Input file for transient analysis244
Main Index
Figure 9-6  Displacement near the critical speed region
The displacement shown in Figure 9-4 show increase in amplitude of displacement with time as the rotor speed
increases. However, after 0.37 seconds, there is decrease in amplitude and the amplitude is steady after 0.5
seconds. The variation of displacement between 0.35 to 0.55 seconds is shown in Figure 9-6. It highlights the
transition zone described earlier. This behavior for displacement can be explained by plotting displacement
along with rotor speed, as shown in Figure 9-7 and Figure 9-8. In these figures, the right axis (in green) shows
variation of rotor speed provided as input. The results presented in these figure show that the peak amplitude
in displacement is observed near 0.375 sec where the rotor speed is around 285 Hz. This frequency coincides
with the first forward whirl critical speed observed in the complex eigenvalue analysis of the rotor model.
Figure 9-7  Variation of rotor speed and displacement with time&lt;/p&gt;
&lt;p&gt;245 Chapter 9: Transient Response Analysis
Input file for transient analysis
Main Index
Figure 9-8  Variation of rotor speed and displacement with time near the forward whirl critical speed
Effect of Internal Damping
Effect of internal damping is studied by connecting bearing to the rotor directly in the rotating reference
frame (hypothetical case). Here two different cases are considered. In case 2, the damping and stiffness due
to bearings is same as in case 1, but the effect of circulation terms is reduced by half.
a.Internal damping 1
CBUSH   201     211     91 &lt;br&gt;
CBUSH   202     211     111&lt;br&gt;
PBUSH   211      K      4.38+7  4.38+7
B      2627.0  2627.0
b.Internal Damping 2
CBUSH   201     211     91&lt;br&gt;
CBUSH   202     211     111&lt;br&gt;
CBUSH   203     211     1091
CBUSH   204     211     1111
PBUSH   211      K      2.19+7  2.19+7
B      1313.5  1313.5
Results for these two cases with internal damping are shown in Figure 9-9 and compared with those obtained
using external damping (which does not produce any circulation matrix). Here it can be seen that for case 1,
displacements diverge after the first forward whirl critical speed. However, for case 2, where the effect of
circulation terms is reduced by half, the results do not diverge. But they show higher vibration as compared&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Comparison with axisymmetric and 3D rotors246
Main Index
to the externally damped bearing case. Thus, internal damping needs to be carefully analyzed as it may lead
to higher vibration or instability in the rotordynamic analysis.
Figure 9-9  Effect of internal and external damping
Comparison with axisymmetric and 3D rotors
The NM rotor used in this analysis can also be modeled using 2D axisymmetric harmonic and solid elements
as described earlier. Response obtained using these higher order elements is shown in Figure 9-10. It can be
seen here that the maximum amplitude predicted by these three analyses are close to each other.&lt;/p&gt;
&lt;p&gt;247 Chapter 9: Transient Response Analysis
Usage of Nonlinear Elements
Main Index
Figure 9-10  Transient Response obtained using higher order elements
Usage of Nonlinear Elements
In transient analysis, it is possible to include nonlinear bearing elements for rotordynamic analysis. Nonlinear
bearing elements can be specified using NLRGAP , NLRSFD  and NOLINi (p.2357)  entries.
In the previous example, the maximum displacement amplitude obtained is around 0.08 units. As a
hypothetical case, consider a scenario where the maximum amplitude is restricted to 0.05 units using a very
stiff spring. A behavior like this can be modelled using the nonlinear NLRGAP element. For simplicity, beam
rotor model defined using ROTORG entry is used in the analysis. Changes required in the input file to
include the above mentioned nonlinear NLRGAP element is described below:
Figure 9-11  Introducing nonlinear bearing element in the analysis
Changes in case Control
NONLINEAR = 1001
Changes in Bulk data entries
$ NLRGAP
GRID    141              0.      0.     0.0889&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Usage of Nonlinear Elements248
Main Index
GRID    1141              0.      0.     0.0889
RBE2 303141123456  41
NLRGAP 10011411141 XY 1112
CBUSH   203     212     1141       0
PBUSH   212      K      1.0+20  1.0+20
TABLED1 11
0.01.0+12 1000. 1.0+12 ENDT
TABLED1 12
0.00.051000.0.05 ENDT
Displacement obtained with the nonlinear NLRGAP element is shown in Figure 9-12 and Figure 9-13. Results
show that, although the displacement of Grid 41 is reduced to 0.05, it does not decay after crossing the first
forward whirl critical speed as observed in the earlier case.
Figure 9-12  Effect on nonlinear NLRGAP element on transient response&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P14</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_014/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_014/</guid>
      <description>
        
        
        &lt;p&gt;249 Chapter 9: Transient Response Analysis
Mass and speed correction for Unbalance Loads
Main Index
Figure 9-13  Displacement obtained using nonlinear NLRGAP element
Mass and speed correction for Unbalance Loads
The UNBALNC entry with CFLAG option and EPOINTS to output the correction terms is shown
below.
UNBALNC 10     122.68 41 1. 0.0.
1.-4 0.00.001   0.0     1000. CFLAG
202203204205206 207
208209210211212 213
214215216
EPOINT 201THRU216
Here, the CFLAG field can take following values: NONE (Default), SPEED, MASS and BOTH. In this
particular case, the value of mass used on the UNBALNC entry is unusually high while the radial distance
used is small to highlight how the correction terms can influence the results. Without the correction terms,
the unbalance forces generated depend only on the product of unbalance mass with radial distance. However,
when correction terms are included, both mass and variation of rotor speed with time can influence the
unbalance loads generated.&lt;br&gt;
The unbalance loads generated (as output through various EPOINTS) are shown in Figure 9-14 to Figure 9-18.
As expected, the basic unbalance loads generated without the correction terms are identical in all the four
cases considered, see Figure 9-14 and Figure 9-15. The effect of mass correction on forces and moments is shown
in Figure 9-16 and Figure 9-17, respectively. Here, the results obtained using CFLAG=MASS and
CFLAG=BOTH show large forces and non-zero moments being generated due to mass correction terms.
Similarly, CFLAG=NONE and CFLAG=SPEED produce similar results since they do not include mass&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Mass and speed correction for Unbalance Loads250
Main Index
corrections. The moments produced due to speed correction terms is shown in Figure 9-19. It can be seen here
that only CFLAG=SPEED produces noticeable moments due to speed correction. The moments generated
in this case are dependent on the variation of rotor speed with time and rotational displacement. As a result,
the moment produced diminishes to zero after 0.5 seconds after which the rotor speed stays constant. The
case with CFLAG=BOTH also generates moments due to speed correction, however due to smaller rotational
displacements (see Figure 9-19 and Figure 9-20), its magnitude is negligible as compared to the case where
CFLAG=SPEED. The displacement and rotation due to unbalance loads for different CLFAG options are
shown in Figure 9-19 and Figure 9-20, where the effect of large unbalance mass can be observed for the case
where CFLAG=MASS and CFLAG=BOTH.
Figure 9-14  Variation of unbalance forces without correction (Output from EPOINTs 202, 203 &amp;amp; 204)&lt;/p&gt;
&lt;p&gt;251 Chapter 9: Transient Response Analysis
Mass and speed correction for Unbalance Loads
Main Index
Figure 9-15  Variation of unbalance moments without correction (Output from EPOINTs 205, 206 &amp;amp; 207)
Figure 9-16  Forces generated due to mass correction (Output from EPOINTs 208, 209 &amp;amp; 210)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Mass and speed correction for Unbalance Loads252
Main Index
Figure 9-17  Moments generated due to mass correction (Output from EPOINTs 211, 212 &amp;amp; 213)
Figure 9-18  Moments generated due to speed correction (Output from EPOINTs 214, 215 &amp;amp; 216)&lt;/p&gt;
&lt;p&gt;253 Chapter 9: Transient Response Analysis
Mass and speed correction for Unbalance Loads
Main Index
Figure 9-19  X-Displacement due to different CFLAG options
Figure 9-20  X-Rotation due to different CFLAG options&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotating Frame Transient Analysis254
Main Index
Rotating Frame Transient Analysis
This time transient analysis of the same beam rotor in the rotating frame is performed using SOL129 and
SOL 400 (SOL 400 is recommended for this, as SOL 129 is in maintenance mode and will not receive new
capabilities). The rotor definition needs to be changed as following. The damping from the spring support is
defined as external damping (CBUSH attached to non-rotating portion).
As mentioned in Table 1-1, there are differences between analysis performed in the Fixed and the Rotating
reference system. T o compare the results of fixed and rotating frames, both the rotating structure and the non-
rotating need to be axisymmetric about the spin axis. The results are given in Figure 9-21 and Figure 9-22. The
magnitude of the time transient results in the rotating reference frame are compared with the displacement
of the time transient results from X or Y direction in the fixed reference frame (see the displacement equations
in Figure 8-9). As shown in the figures, the time transient results match very well for the beam rotor, especially
SOL400.
Circulation terms in rotating reference system
As described in  chapter Theoretical Formulation , the rotor structural damping is presented by the damping term
and the circulation term. The circulatory matrix ( ), which is generated from the rotating structure,
is used in a fixed reference system. In a rotating reference system, however, a circulatory matrix ( ),
which is generated from the stator, is used to present the additional rotor damping effect. This matrix adds
to the system stiffness matrix. It is multiplied to the operating rotor speed as well as the damping parameters
WR3/WR4/WRH. To ignore the circulation terms in transient analysis for comparison purpose, the
parameter RDBOTH can be defined to 2 using the Bulk Data entry MDLPRM.
KCR
KCS&lt;/p&gt;
&lt;p&gt;255 Chapter 9: Transient Response Analysis
Rotating Frame Transient Analysis
Main Index
Figure 9-21  Transient response of rotating reference system through SOL129
Figure 9-22  Transient response of rotating reference system through SOL400
Examples used in this chapter are available under the following folder:  ../tpl/ugrotor. A brief description of
these examples is given below:
Table 9-1&lt;br&gt;
Input File Name Description
rug_9_1 Analysis with unbalance loads in SOL 129.
rug_9_2 Analysis with unbalance loads in SOL 400.
rug_9_3 Analysis with unbalance loads in SOL 129 with internal Damping - case 1.
rug_9_4 Analysis with unbalance loads in SOL 129 with internal Damping - case 2.
rug_9_5 Unbalance analysis with ROTORAX.
rug_9_6 Unbalance analysis with solid rotor elements.
rug_9_7 T ransient analysis with nonlinear bearing element.
rug_9_8 Analysis with unbalance loads in SOL 129 (ROT frame)
rug_9_9 Analysis with unbalance loads in SOL 400 (ROT frame)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotating Frame Transient Analysis256
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 10: Nonlinear Frequency Response
MSC Nastran Rotordynamics User’s Guide
10Nonlinear Frequency
Response
Introduction      258
User Interface      259
Analysis Setup      266
Theoretical Details      270
Examples      286&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction258
Main Index
Introduction
There is a class of dynamic response analyses where a structure exhibiting nonlinearities is subjected to a
harmonic excitation in which the response is essentially periodic. That is to say that the degree of nonlinearity
in the system is light enough that the response may be described sufficiently accurately by a combination of
harmonic responses, i.e. periodic; this is achieved using Fourier series.
Some examples of this class of dynamic response problems are rotor/stator contact under abnormal running
conditions, an overload condition in an oscillating mechanism causing periodic contact or perhaps just
simply a nonlinear bearing stiffness. The response of such systems may exhibit multiple solutions in a steady-
state vibration response scenario, possibly with amplitude jumps as the system moves from one frequency to
another, such as might occur in a rotor that is increasing or decreasing in speed. These jumps reveal different
behavior of the dynamic system with increasing or decreasing excitation frequency.
The nonlinear harmonic response solution sequence uses the harmonic balance method to calculate the
periodic response of a non-linear system under harmonic excitation. This requires the definition of a
frequency domain problem in the presence of nonlinearities. The harmonic balance method assumes the
steady-state response consists of a sum of sinusoidal responses finding the coefficients of the sinusoids to
satisfy the equations of motion. Harmonic balance is only efficient if a small number of sinusoids are
necessary to approximate the solution to a desired accuracy and this is why the nonlinearities in the system
must be mild.
As with any nonlinearity, it must only be present in the residual structure, but this does not preclude the use
of superelements or ASET degrees of freedom to perform static condensation or dynamic reduction using
CMS (Component Mode Synthesis). In fact this is a recommended technique in order to keep the number
of degrees of freedom for harmonic balance to a minimum.
Nonlinear harmonic response is available in the presence or absence of rotors, but there must be at least one
degree of freedom defined on nonlinear force type entries such as the NLRGAP , NLRSFD and NOLINi
entries. Other types of nonlinearity that may be defined include the CBUSH2D element or indeed any
elements having frequency dependent properties.
MSC Nastran, which incorporates SCA technology, adds the possibility of creating a user defined service
whereby the NLRSFD entry is able to call external user defined behavior to replace the standard NLRSFD
behavior.
Its limitation therefore is that it can only capture harmonic components, so any frequencies which are not
pure sub- or super-harmonics of the excitation will be lost. It is also possible that either no solution exists (an
unstable dynamic system), or that more than one solution is possible. The nonlinear system being studied
may exhibit bifurcation or turning points, points for which a small incremental change in frequency results
in more than one solution. In addition the system may exhibit a step change in the response from one
frequency to the next, what is referred to in the literature as “jump phenomena”. In its present form, the
presence of bifurcation or turning points cannot be determined in nonlinear harmonic response analysis and
the resulting solution is just one of the possible states. Jump phenomena are revealed by examining the
response curves.
In a system with bearing clearance, like hydrodynamic or magnetic bearings, the stiffness of the system
changes depending on whether the bearing forces overcome the clearance in the bearing resulting in contact
or no-contact conditions. Each of the contact/no-contact states may have essentially linear behaviour, but the&lt;/p&gt;
&lt;p&gt;259 Chapter 10: Nonlinear Frequency Response
User Interface
Main Index
overall behavior is nonlinear if the system changes from one state to another. Probably the simplest example
of such a system is the Duffing oscillator. The Duffing equation is:
(10-1)
and is defined in any text book on nonlinear dynamics. This equation exhibits jump phenomena for certain
frequency values f where the solution “jumps” from one significantly different value to another for a small
change in frequency. To complicate matters, the jump differs depending on whether the change in frequency
is positive or negative.
When the system is nonlinear, there is also the possibility of sub and super harmonic responses. The response
frequencies in linear harmonic analysis are the same as the forcing frequency. Permanent oscillations whose
frequencies are a fraction of the forcing frequency (½, ¼, &amp;hellip;) may occur in a nonlinear system; these
oscillations are known as sub-harmonic response. Sub-harmonic responses require special conditions (e.g.
particular damping characteristics and a non-symmetric stiffness) whereas super-harmonic responses, i.e.
permanent oscillations whose frequencies are a multiple of the forcing frequency (2, 3, …), are always present;
whether they show significant response levels depends on the damping in the system. These are complex
phenomena which may in themselves exhibit jumps further complicating matters. Refer to book on Shock
and Vibration (Harris, 1987) for a more complete discussion of sub and super harmonic responses.
Nonlinear harmonic response uses an iterative procedure to find the coefficients for the combination of
sinusoids that form the steady-state response. Newton’s method of iteration is employed to solve a system of
nonlinear algebraic equations. A trial solution is attempted for displacements and the corresponding forces
in any NLRGAP , NLRSFD or NOLINi entries are calculated from the user supplied data. The residual forces
in the system are calculated and a convergence error is obtained. Based on the size of the convergence error,
the solution is either accepted or an updated displacement scaling is calculated and the new displacements
calculated. The sequence loops until either a diverging system is detected or convergence obtained.
User Interface
Frequency dependent loading for SOL 128 can be applied through standard forcing functions available in
MSC Nastran or through the unbalance loads in case rotors are present in the model.
File Management Section (FMS)
One modified FMS entry, related to the SCA UDS (Service Component Architecture User Defined
Subroutine), is required if a user defined service is to be used. When a user defined service (UDS) is to be
used to describe the behavior of the NLRSFD type nonlinearity in nonlinear harmonic response, the FMS
CONNECT entry is used with the SERVICE qualifier to make the connection between the GROUP name
on the NLRSFD bulk data entry and the name of the external service.
Executive Section
Nonlinear harmonic response is available as SOL 128 or SOL SENLHARM. This is a complete solution
sequence based around linear frequency response (SOL 108) in which nonlinearities may be taken into
account.ax··bx·cxdx3+ + + ft cos =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Interface 260
Main Index
Case Control
The case control entry NLHARM has been added for nonlinear harmonic response to reference the
NLHARM bulk data entry. The existing NONLINEAR case control entry, previously dedicated to transient
response analysis, may now also be used in nonlinear harmonic response to reference nonlinear force bulk
data entries (NOLIN1, NOLIN2, NOLIN3, NOLIN4, NLRGAP , NLRSFD).
NLHARM
The NLHARM case control entry is dedicated to nonlinear harmonic response; it is used to reference a bulk
data NLHARM entry.
NLHARM=n
where n is the ID of the NLHARM bulk data entry.
NONLINEAR
The existing NONLINEAR case control entry, which was previously dedicated to transient linear and
transient nonlinear analysis, may now be used in nonlinear harmonic response analysis.
The NONLINEAR case control command is used in exactly the same way in nonlinear harmonic response
as it is in transient response to refer to the collection of nonlinear force entries (NLRGAP , NLRSFD and
NONLINi).
Bulk Data Entries
There are three bulk data entries (NLHARM, NLFREQ and NLFREQ1) relating specifically to nonlinear
harmonic response. The NOLINi bulk data entries may now be used in nonlinear harmonic response, but
they do not require any special remarks.
NLHARM
The NLHARM bulk data entry is used to define the parameters for nonlinear harmonic response.
Remarks
1.The NLHARM ID must be unique among all NLHARM entries.1 2 3 4 5 6 7 8 9 10
NLHARM ID SUBFAC NHARM NLFREQ
ID Identification number referenced by the NLHARM case control entry (integer &amp;gt; 0).
SUBFAC Factor for capturing sub-harmonic response (Integer &amp;gt;=1, Default= 1). See remark 3.
NHARM The number of harmonics to include in the solution (integer &amp;gt; 0). See remark 2.
NLFREQ Identification number of the NLFREQ or NLFREQ1 entry specifying the forcing
frequency list (integer &amp;gt;0).&lt;/p&gt;
&lt;p&gt;261 Chapter 10: Nonlinear Frequency Response
User Interface
Main Index
2.The greater the degree of nonlinearity, the larger the number of harmonics required to find a solution.
The number of harmonics (NHARM) may therefore influence the ability of the algorithm to find
solutions to the nonlinear problem posed. However, the larger the number of harmonics, the more
computational effort is required to compute a solution.
3.The response frequencies in linear harmonic analysis are the same as the forcing frequency. Permanent
oscillations whose frequencies are a fraction of the forcing frequency (½, ¼, &amp;hellip;) may occur in a
nonlinear system; these oscillations are known as sub-harmonic response (Harris, 1987).
NHRMPRM
Format:
Example:1 2 3 4 5 6 7 8 9 10
NHRMPRM PARAM1 VAL1 PARAM2 VAL2
NHRMPRM MNCSF 3 NLHDIAG 1
Var Name Type/ Default Description
NLHRED I = -1 Use reduction for nonlinear analysis.
NHPLUS I = 20 Number of extra points to avoid aliasing.
NLHTOL R = 1.0E-5 Tolerance for convergence.
NLHTWK R = 1.1 Push-off factor for line search in case convergence fails.
MXICODE0 I = 5 If solution fails to converge for mxicode0 steps, new trial displacement is
used.
TICPNCH I = 0 If TICPNCH = -1 then write a TIC Bulk Data entry for each degree-of-
freedom in the d-set to be included in a subsequent transient analysis run.
MNCSF I = 1000 Max number of non-converged sequential frequencies for RESET .
MFRINT R = 10. Maximum frequency interval for RESET.
NLHDIAG I = 0 Output additional diagnostic messages.
CONTP I = 0 No Continuation procedure requested.
I = 1 Continuation procedure request with initial condition reset to zero for
non-converged frequency.
I = 2 Improved continuation procedure request based on modified Moore-
Penrose approximation method.
DECOMP CHAR = LU
(default)Method for matrix decomposition, use LU decomposition
CHAR = QR Method for matrix decomposition, use QR decomposition
HALFCNT I = 8 (default) Allows frequency step to be reduced by half nth iteration.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Interface 262
Main Index
Remarks:
1.Following parameters can also be specified using PARAM option: NLHRED, NHPLUS, NLHTOL,
NLHTWK, TICPNCH and MXICODE0.
See description under PARAM for more details about these variables.
In case a parameter is specified in NHRMPRM and also using PARAM, the value specified using
PARAM entry is used.
2.Parameters MNCSF or MFRINT can be used to reset initial condition in case of non-convergence.
If both these parameters are specified, the condition which is satisfied first is used.
3.CONTP =1 or 2 is used to initiate continuation procedure method. In this case, following parameters
are not used in the analysis: NLHRED, MNCSF, MFRINT. Currently, the CONTP=1 option is
available for frequency-independent analysis only.
Here, NLHRED is set to 0 to not use the reduction method. And initial condition for the
continuation procedure is determined using the results from two previously converged solutions.
4.CONTP=2 does not support frequency-dependent elements, such as PBSH2DT, CBUSHD2DA,
and frequency-dependent material. For multiple rotor systems, the rotor spin ratio at unit speed (1.0
radian per unit time) is calculated and used for both SYNC and ASYNC. To make convergence faster
for a strong nonlinear system, use an ‘average’ frequency formulation (PARAM, GYROAVG, -1) or
ignore circulation terms (MDLPRM, RDBOTH, 2).
5.DECOMP option with QR is supported only with CONTP = 2 in NHRMPRM entry. If used with
CONTP = 0 or 1, a UFM will be issued.
6.It is not required to define DECOMP option when using CONTP = 0 or 1. For either of the
continuation procedure choice, default LU decomposition will be used. Refer remarks 3 and 4 for use
of frequency-dependent analysis.
NLFREQ
The NLFREQ entry is used to define the forcing frequencies for nonlinear harmonic response.
Remarks
The frequencies may be specified in any order; they do not have to be in ascending or descending order.
Only one NLFREQ or NLFREQ1 entry with the same ID is allowed.1 2 3 4 5 6 7 8 9 10
NLFREQ ID F1 F2 F3 … Fn
ID Identification number referenced by the NLFREQ field (field 5) of an NLHARM bulk
data entry. (Integer &amp;gt; 0).
Fi Forcing frequency values in cycles per unit time (Real &amp;gt;= 0.0).&lt;/p&gt;
&lt;p&gt;263 Chapter 10: Nonlinear Frequency Response
User Interface
Main Index
NLFREQ1
The NLFREQ1 entry is used to define the forcing frequencies for nonlinear harmonic response by using a
start frequency, a frequency interval and a number of intervals.
Remarks
1.If DF is positive, it defines a frequency increment. In this case, the first excitation frequency will be
F1 with all subsequent excitations frequencies being of larger value than F1.  If DF is negative, it
defines a frequency decrement. In this case, the first excitation frequency will still be F1, but now all
subsequent excitations frequencies will be of smaller value than F1. In both cases, the initial
conditions for a frequency are the response configuration at the previous excitation frequency. The
initial conditions for the first frequency are zero.
2.Only one NLFREQ or NLFREQ1 entry with the same ID is allowed.
NLFREQC
Frequency List for Nonlinear Harmonic Response Specific for Improved Continuation Procedure.
Defines a set of forcing frequencies for nonlinear harmonic response by specification of a starting frequency,
frequency increment, and the number of increments/decrements desired. .
Example:
NLFREQC 88      10.0    0.01    0.      0.      6000    10.     43.5
1.0E-5  YES
DFOUT   0.25    5.0     28.     36.
OR
NLFREQC 88      40.0    -0.01   0.      0.      6000    10.     40.1 2 3 4 5 6 7 8 9 10
NLFREQ1 ID F1 DF NDF
ID Identification number referenced by the NLFREQ field (field 5) of an NLHARM bulk
data entry. (Integer &amp;gt; 0)
F1 First forcing frequency in the set (real &amp;gt;= 0.0)
DF Frequency increment (real &amp;lt;&amp;gt; 0.0, required).  See remark 1.
NDF Number of frequency increments (Integer &amp;gt; 0, Default= 1)
1 2 3 4 5 6 7 8 9 10
NLFREQC ID FREQINI STEPINI MINSIZE MAXSIZE MAXSTEP MINFREQ MAXFREQ
DERINC PRTOUT
&amp;ldquo;DFOUT&amp;rdquo; DFQ DFQTOL BEGFQ ENDFQ&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Interface 264
Main Index
1.0E-5  YES
DFOUT   0.25    5.0     25.     35.
The definition and description of the added parameters are listed as follows:
Remarks :
1.This entry is supported only for SOL128.
2.Only one NLFREQC entry with the same ID is allowed.Describer Meaning
ID Identification number referenced by the NLFREQ field (field 5) of an NLHARM Bulk
Data entry.
(Integer &amp;gt; 0).
FREQINI Initial/start frequency f0 for CONTP = 2 (a previous stable frequency solution).
(REAL ≥ 0.0)
MINSIZE Magnitude of the minimum step size for iteration.
(REAL ≥ 0.0, default = 1.0E-5 * ABS(STEPINIT) )
MAXSIZE Magnitude of the maximum step size for iteration.
(REAL ≥ 0.0, default = 100.0 * ABS(STEPINIT) )
MAXSTEP Maximum number of steps allowed when using continuation procedure CONTP=2
MINFREQ Minimum frequency to terminate the continuation procedure CONTP = 2.
(REAL ≥ 0.0, default = 0.0)
MAXFREQ Maximum frequency to terminate the continuation procedure CONTP = 2.
(REAL ≥ 0.0, default = FREQINI + ABS(STEPINIT) * MAXSTEP)
DERINC Central difference in computing derivative of linear/nonlinear load.
(REAL, Default =1.E-03)
PRTOUT Print output request in case convergence fails: &amp;ldquo;NO&amp;rdquo; (default) or &amp;ldquo;YES&amp;rdquo;
DFOUT Flag indicating that the next 4 fields are for user specific output request (Character,
Optional)
DFQ Frequency step interval for output. The solution frequency BEGFQ + N&lt;em&gt;DFQ +/-
DFQTOL (where N is an integer &amp;gt;= 0) and BEGFQ + N&lt;/em&gt;DFQ is less than or equal to
ENDFQ will be saved for output. (REAL, Required)
DFQTOL T olerance in terms of % to identify closest frequency step for post-processing. This is given
in terms of percent of DFQ. (REAL, Default = 5.0%)
BEGFQ Initial/start frequency for output request. (REAL, Default = ‘FREQINI’ value in
NLFREQC card)
ENDFQ Maximum frequency for output request. (REAL, Default = ‘MAXFREQ’ value in
NLFREQC card)&lt;/p&gt;
&lt;p&gt;265 Chapter 10: Nonlinear Frequency Response
User Interface
Main Index
3.When using CONTP = 2 on the NHRMPRM entry, an NLFREQC entry is required, if not defined,
a UFM will be issued.
4.Use of the DFOUT option will provide output selected by the case control commands for the selected
frequency range from BEGFQ to ENDFQ.
5.Only the output for converged solution’s in the requested range will be available.
TABLED5
The TABLED5 entry is used generally to define a value as a function of two variables for use in generating
frequency-dependent and time-dependent dynamic loads. In nonlinear harmonic response it is used to define
an NLRGAP whose force-penetration characteristics vary with frequency.
Remarks
1.This table returns a value that is a function of 2 variables . The first variable value x is specified on
this entry as X(i), the function versus y for the specified value for X(i) is specified on the referenced
table TID(i).
2.When used with the NLRGAP entry to define a frequency dependent gap force as a function of
penetration, the frequency values are input as X(i) and the variation of force vs. penetration is input
on a series of TABLED1 entries referenced by the table values TID(i), one for each required change
in properties with respect to frequency.
3.2D linear interpolation is carried out for values of (x,y) not specified on the tabular entries.
NLRGAP
The NLRGAP entry defines a nonlinear radial (circular) gap for transient response or nonlinear harmonic
response.
NLRSFD
The NLRSFD entry defines a nonlinear radial squeeze film damper for transient response or nonlinear
harmonic response.1 2 3 4 5 6 7 8 9 10
TABLED5 TID
X(1) TID(1) X(2) TID(2) X(3) TID(3) X(4) TID(4)
… … ENDT
TID Table identification number. (Integer &amp;gt; 0)
X(i) X value for the function specified by TID(i) (Real, no Default).
TID(i) ID of a TABLED1, TABLED2, TABLED3 or TABLED4 defining the function Y for the
given value of X.  (Integer &amp;gt; 0, no Default).&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis Setup266
Main Index
Analysis Setup
Setting up a nonlinear harmonic analysis is relatively easy and is a natural progression from a direct frequency
response analysis (SOL 108). It is strongly recommended that you set up the analysis to run linear direct
frequency response and establish a healthy model. Linear CELASi elements along with rigid elements, if
necessary, may be used to connect the degrees of freedom (DOFs) at which the nonlinearities will eventually
be defined. It is also possible at this stage to establish a condensation strategy in order to reduce the number
of degrees of freedom that will be retained for the eventual nonlinear harmonic response analysis. SOL 128
is a completely integrated implementation and it is therefore possible to use any of the condensation methods
usually available for linear and nonlinear analysis. These include:
Superelements with or without CMS
A-set definition with or without CMS
O-set definition with or without CMS
Automated CMS (MDACMS)
Generally, it is desirable to retain only the DOFs (degree of freedom) connected to nonlinearities for the
resolution of the nonlinear problem, but ultimately the user decides which DOFs to retain. The only
requirement is that the DOFs attached to nonlinearities must be retained; thereafter, any other DOFs may
be added to the retained set. Typically, the number of DOFs connected to nonlinearities is small, even if the
total number of DOFs in the model is large, so using a condensation strategy can yield a significant saving in
elapsed time for the calculation. Condensation may be carried out using static (Guyan) reduction or using
modal synthesis (CMS). T o learn more about these methods please refer to the MSC Nastran Superelements and
Modules User’s Guide .
Once you have the linear direct frequency response set up, there are only a few simple modifications necessary
to turn this into a nonlinear harmonic response analysis.
1.Change SOL 108 to SOL 128
2.Remove the FREQUENCY= specification in the case control.
In SOL 108, the FREQUENCY= case control command is used to call the set of FREQi entries in
the bulk data which define the set of excitation frequencies for the frequency response problem. In
nonlinear harmonic response, the excitation frequencies are a sequence of frequencies where the initial
conditions of one frequency are the steady state response from the previous excitation frequency.
Consequently, the excitation frequencies are defined on either an NLFREQ or NLFREQ1 bulk data
entry referenced by the NLHARM bulk data entry.
3.Add a case control NLHARM (Case) = entry which references the ID of a bulk data NLHARM  entry.
4.Add a NONLINEAR (Case) = case control entry which refers to the set of nonlinear force entries (NOLINi,
NLRGAP, NLRSFD).
5.Remove the modelling technique you used in place of the nonlinear forces.&lt;/p&gt;
&lt;p&gt;267 Chapter 10: Nonlinear Frequency Response
Analysis Setup
Main Index
If CELASi and/or rigid elements were used, these should be removed ready to be replaced by one or
more of the nonlinear force entries NOLINi, NLRGAP or NLRSFD. Note: you may actually wish
to retain some or all of these entries in order to avoid singular structures. This may happen if the
nonlinear force specification results in zero forces between an otherwise unconnected component; in
this case a small spring stiffness between the potentially singular structures can be used to stabilize an
otherwise unstable problem.
6.Add nonlinear force entries at the required degrees of freedom.
There must be at least 1 dof referenced by a nonlinear force entry. The set ID of the collection of
NOLIN1, NOLIN2, NOLIN3, NOLIN4, NLRGAP and NLRSFD entries is called up by the ID of
the case control NONLINEAR= entry.
7.Add a bulk data NLHARM entry.
This is referenced by the case control NLHARM= entry and defines any sub-harmonic content
(optional), the number of harmonics (required), and the NLFREQ or NLFREQ1 entry which defines
the set of excitation frequencies. See the section above for the format of the NLHARM entry.
8.Add an NLFREQ or NLFREQ1 entry.
If you want to excite the structure at specific frequencies, use the NLFREQ entry. Use the NLFREQ1 entry
to define an increasing or decreasing frequency sequence. See the section above for the format of the
NLFREQ and NLFREQ1 entries.
It is recommended for the first run that the nonlinear force entries define linear characteristics.  This will
allow the results to be checked against the linear direct frequency response; the answers should be the same,
even though the problem will be solved using an iterative technique.
Parameters for controlling the analysis
The interface to nonlinear harmonic response is driven by the inputs defined below. The sequence of
excitation frequencies is defined on NLFREQ or NLFREQ1 entries and harmonic response control data
supplied on the NLHARM entry. This allows specification of the number of harmonics and sub-harmonics
to consider for the nonlinear harmonic response analysis as well as referencing the excitation frequency bulk
data entries NLFREQ or NLFREQ1.
PARAM, MXICODE0, 5
In nonlinear harmonic response analysis, if the solution fails to converge more than MXICODE0 times in
succession, a new trial displacement vector is calculated. MXICODE0 allows the number of successive failed
convergences to be modified before a new trial displacement vector is calculated. (Default is 5).
PARAM, NHPLUS, 20
In nonlinear harmonic response analysis, in order to avoid aliasing in the calculation of the Fourier
coefficients, a certain number of extra evaluation points are used. NHPLUS allows the number of extra points
to be defined. (Default is 20).
This technique comes from a paper (Bellinger, 1995) where the number of time steps, S, selected should be
in the range (2K-1)  S  3(2K-1) and K is the number of frequencies present in the signal.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis Setup268
Main Index
PARAM, NLHTOL, 1.0E-5
During the iteration procedure of nonlinear harmonic response, the norm of the residual load vector for the
current step is divided by the norm of the residual load vector for the previously converged step; this value is
then compared with NLHTOL. If the value is smaller than NLHTOL, the system is considered to have
converged. (Default is 1.0E-5).
PARAM, NLHTWK, 1.1
In nonlinear harmonic response analysis, if convergence is not obtained, a line search procedure is initiated
to calculate a scaling factor for the displacement vector from which updated nonlinear loads are subsequently
calculated. If the solution fails to converge more than 5 times in succession (modifiable by
PARAM,MXICODE0), a new trial displacement vector is calculated using a push off factor the size of which
is defined by NLHTWK. (Default is 1.1).
Handling Non-Convergence in Nonlinear Harmonic Response
During the ascending or descending sequence of excitation frequencies defined on the NLFREQi entries, if
instability is encountered at a particular frequency, the solution may fail to converge at that frequency. Non-
convergence may be attributed to several causes, and the possibility must always be considered that there
simply is no solution to the system at a particular frequency because the system has become dynamically
unstable.
In most cases of non-convergence not attributed to dynamically unstable conditions, either the number of
harmonics or the sub-harmonic content is insufficient, or the system has reached a bifurcation or turning
point. T ry increasing the number of harmonics or sub-harmonics (NLHARM entry) as well as adjusting the
parameters described above. If none of these is successful, the system may have struck a bifurcation point. T ry
adjusting the excitation frequencies slightly; for example, if using the following excitation frequencies 5.0,
10.0, 15.0, 20.0…etc., try adjusting these to 5.1, 10.1, 15.1, 20.1. In the current implementation, there is
no automatic treatment for possible bifurcation points and the subject of using a continuation strategy is
under discussion for a future development.
In the case of non-convergence, the response quantities are set to zero, and the calculation continues to the
next excitation frequency in the sequence retaining the initial conditions of the solution from the last
converged frequency. If the solution at the next excitation frequency does not converge, the same procedure
is followed until a converged solution is found.
There may come a time when it is judicious to change the initial conditions particularly when the next
excitation frequency becomes distanced from the last converged frequency after a sequence of failed to
converge excitation frequencies. In this situation, where the initial conditions for an excitation frequency have
become somewhat distanced from the previously converged excitation frequency, it may not mean very much
physically to continue to use the initial conditions from that previously converged excitation frequency.
It would perhaps therefore be favorable to start from zero conditions as always happens for the first frequency
of an analysis starting from scratch. There is some difficulty in deciding how far away from the previously
converged excitation frequency is acceptable to return to zero initial conditions.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P15</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_015/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_015/</guid>
      <description>
        
        
        &lt;p&gt;269 Chapter 10: Nonlinear Frequency Response
Analysis Setup
Main Index
No method of resetting initial conditions to zero is programmed as standard, except starting from cold an
analysis with a different frequency specification. For the current implementation, the user must take action
to initiate a strategy.
It is possible that the solution at a particular frequency falls directly on a bifurcation point which creates a
singular problem.
Comments on Nonlinear Forces
As already mentioned, there must be at least one degree of freedom defined on nonlinear force type entries
such as the NLRGAP , NLRSFD and NOLINi entries. If no nonlinear force entries are defined in the input
file, the following message will be issued:
USER   FATAL   MESSAGE 9187 (SENLHARM)&lt;br&gt;
THERE ARE NO NONLINEAR DEGREES OF   FREEDOM FOR NONLINEAR HARMONIC
RESPONSE ANALYSIS &lt;br&gt;
Nonlinear forces may be defined as functions of displacement or velocity depending on the choice of bulk
data entry. The NLRGAP and NLRSFD entries were designed for defining nonlinear forces in a radial
manner in support of rotating structures, but their use is not limited to these cases. The NLRSFD entry may
be used in conjunction with a user defined service (UDS) to define an arbitrary external function to calculate
forces as a function of several different parameters. The NOLINi entries allow tabular (piecewise) definition
of nonlinear forces (NOLIN1), a scaled product of 2 DOFs (NOLIN2), or a power function in the case of
NOLIN3 and NOLIN4.
For tabular input, the interpolation of nonlinear forces does not undergo any smoothing after the values are
read from the force-displacement definition, so sharp changes in their characteristics can cause convergence
difficulties.
Figure 10-1  Bilinear force interpolation&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Theoretical Details270
Main Index
Figure 10-1 shows a bilinear force-displacement variation for a nonlinear bushing stiffness. In order to avoid a
step change in the definition of the nonlinear force-displacement characteristics, a cubic law may be used to
configure a close match to the bilinear variation using a NOLIN3 and NOLIN4 entry, rather than defining
the bilinear behaviour directly on a NOLIN1 and TABLED1 entry. In some cases, it may not be possible to
do this; in this case, ensure many points are used to define the characteristics on the TABLED1, seeking
gradual changes in characteristics rather than step changes.
Response analysis in the frequency domain involves handling complex quantities to define the real and
imaginary parts of the response. This notion is more easily understood as the magnitude and phase angle of
the response quantities. It must be remembered, however, that nonlinear force definition involves only real
quantities. This is entirely consistent with the way in which the nonlinear harmonic response problem is
solved as the frequency domain (complex) problem is transform to a time domain (real only) problem by
Fourier coefficients in order that an iteration procedure may establish force equilibrium. Once force
equilibrium is established (convergence), the resulting time domain response is then transformed to the
frequency domain using the same Fourier coefficients.
Theoretical Details
Harmonic balance intrinsically uses a linear combination of sinusoidal responses to represent the total
response. If the steady-state response consists of just a few dominant sinusoids, which may easily be the case
if the nonlinearities are mild, then harmonic balance is able to represent the periodic response accurately.
The harmonic balance method converts a system of nonlinear differential equations into a system of
nonlinear algebraic equations, the solution to which is the set of coefficients for the sinusoids making up the
steady-state response. The nonlinear algebraic equations are solved using Newton’s method of iteration.
The general equation of motion reads:
(1)
where:
To include nonlinear displacement, velocity, and acceleration dependent properties, these can be added as
nonlinear forces
(2)[M] System mass
[B] System damping
[K] System stiffness
{u(t)} Displacement at time t
Velocity at time t
Acceleration at time t
{P(t)} Applied load at time tMu··t Bu·t Kut Pt = + +
u·t
u··t
Fu··tu·tut    nl
Mu··t Bu·t Kut Fu··tu·tut    nl Pt = + + +&lt;/p&gt;
&lt;p&gt;271 Chapter 10: Nonlinear Frequency Response
Theoretical Details
Main Index
Equation (2) can be rewritten as,
(3)
If the loading and response are periodic, the above equation can be transformed to the frequency domain.
(4)
where
The presence of nonlinear forces requires an iterative procedure to minimize the function . A
common method to solve this type of problem is Newton’s method, but before applying this procedure,
equation is split into real and imaginary parts and written in matrix format.
Newton’s Method uses the following approximation to attempt to solve nonlinear problems,
(5)
or
(6)
The solution uses an iterative approach:
1.The harmonic response is converted to a time-domain response.
2.Nonlinear bearing force derivatives are determined using the responses from step 1.&lt;br&gt;
3.The new bearing force derivatives are used to recalculate the harmonic response.
4.This procedure is repeated until the solution converges.ω is&lt;br&gt;
f0is the assumed fundamental frequency of the response
v is the sub-factor for sub-harmonic response
is the Fourier T ransform of Rut M = u··t Bu·t Kut Fu··tu·tut    nlPt –  + + +
0 =
Run
n0=N
Mu··n = Bu·n Kun FˆnnlPn –  + + +
n0=N
0=
2f0
Fˆnnl Fu··tu·tut    nl
Run
Ruu+RuRu
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-u 0 = + =
Ru
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-u Ru –=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Theoretical Details272
Main Index
(7)
where
(8)
Continuation Procedure
Current Harmonic Balance equation being solved
This equation has (2*NHARM+1)&lt;em&gt;NDOF unknown variables.
{u}OLD = (uR(), uR(), uI(), uR(), uI()…. uR( ), uI( )).
Also, [G] matrix above has size of (2&lt;/em&gt;NHARM+1)&lt;em&gt;NDOF and R{u} has size (2&lt;/em&gt;NHARM+1)*NDOF.
For continuation procedure, rotor speed is added as the new variable. Thus, the new state vector is given by:
{u}NEW = ((uR(), uR(, uI(, uR(, uI(…. uR( , uI( ), )
The equations are now solved using the approximate Moore-Penrose method. In this method, the tangent
direction for the solution curve is also solved iteratively. The approximate method is simplified version of the
actual Moore-Penrose method since it avoids computing a null vector needed for iteration. The iteration
procedure is modified as shown in equation below:
where;  denotes the tangent vector for the current iteration step.
The first term of the Jacobian  is already determined.Rui
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;ui1+Rui–=
ui1+uiui1++ =
01122NHARMNHARM
01122NHARMNHARM
u

i1+u

iRuui
TiT1–Rui
0– =
Ti
RuuiR
u&amp;mdash;&amp;mdash;R
&amp;mdash;&amp;mdash;- =
R
u&amp;mdash;&amp;mdash;
Ru
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- GFnu nl
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; + =&lt;/p&gt;
&lt;p&gt;273 Chapter 10: Nonlinear Frequency Response
Theoretical Details
Main Index
The most complicated term in the Jacobian is the  term which is important to determine for the usage
of continuation process. From the definition of residual vector, its partial derivative with respect to frequency
can be written as:
For determining , two different cases are considered based on the problem type.
Frequency Independent Analysis
For simpler problems where the nonlinear force, linear force and system matrices are independent of
frequency, it is possible to obtain a simpler analytical solution for  term. In this case,
Many problems described in literature can be solved using these expressions. The V2019.0 release only
supports frequency independent analysis with continuation procedure.
Frequency Dependent Case
The rotordynamics problems will fall under this category. For the general case, the  term can be
written as:
The tangent vector is determined using following steps:
and
This implies that the tangent vector satisfies following linear system of equations: R
&amp;mdash;&amp;mdash;-
Ru{,}
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;G
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;uFnu, nl
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-P
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- – + =
R
&amp;mdash;&amp;mdash;-
R
&amp;mdash;&amp;mdash;-
G
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- -2n2MinB + =
G
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
G
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash; -n2M
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-inB
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;K
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-2n2MinB + + + + =
WRuui1–
Ti1–T   1–0
1=
TiW
W&amp;mdash;&amp;mdash;- =
RuuiW 0=
Ti1–TW 1=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Theoretical Details274
Main Index
Thus, in Moore-Penrose correction approach, each correction occurs in plane orthogonal to the kernel of
and the tangent is in the same direction as the previous tangent vector. The second equation
above prevents the continuation procedure from turning back which can occur in case of constant arc-length
method.
In Moore-Penrose method, the initial prediction for solution at the (K+1)th frequency step is given by:
where;  is the tangent vector obtained at the Kth step.
Approach for Improved Continuation Procedure (CONTP = 2):
The continuation procedure uses the derivative of unbalance load with respect to both displacement and
frequency.
Frequency  is treated as an unknown.
Equation to solve,
Derivatives,
where,
= Non-linear force
= DLOAD, RLOADRuui
u

1,K1+u

0,KhT0,K+ =
T0,K
Ru n2M – inBK + +  u Fuu·u··   nlP – +  0=
Ru
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- n22M – inBKFnl
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; + + +
subsup
=
Ru
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- n2M – inB+G +  KKC2KG + +   + +  
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;u
Fnl
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;Prload
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-Punb
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash; – – +=
Fnl
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
Prload
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&lt;/p&gt;
&lt;p&gt;275 Chapter 10: Nonlinear Frequency Response
Theoretical Details
Main Index
= UNBALNC
For mild non-linearities,
and Punb
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
Punb
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash; 2em =Fnl
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; 0=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
SOL 128 QR Decomposition Procedure Approach276
Main Index
SOL 128 QR Decomposition Procedure Approach
The new QR decomposition procedure uses a dense LAPACK routine.
The improved continuation procedure (invoked through CONTP = 2 in NHRMPRM entry) treats the
fundamental frequency to be unknown along with displacement. The nonlinear problem takes the general
form as,
Equation to solve,
(10-2)
Now, the number of unknowns in the problem has increased from “NDOF(2NH+1)” to “NDOF(2NH+1)+1”
When solving for the R{u, } using Newton&amp;rsquo;s method, the iteration step is given by,
(10-3)
For general form, Ax = b and t(A) * x = 0 , A is an N X (N+1)  matrix with maximal rank, and t(A) is the
tangent vector.,
Equation (10-3) can be written in Ax = b form where
b = R ({u}i,{})
x = ({ u}i,{})
N = NDOF (2NH+1)
Using the dense QR decomposition routine, transpose of A can be expressed as,
Where, Q is an (N +1) X (N +1) orthogonal matrix with QTQ = I, and R is a nonsingular N X N upper
triangular matrix. If z denotes the last column of Q, then Az = 0  and |z| = 1.
The Moore Penrose inverse of the A matrix is given by:
A simple Euler predictor based on the tangent computed is used to calculate the initial guess for the next step.
Now if the Newton-Raphson corrector does not converge in a certain number of iterations (once again to be
specified by the user), the arc length step is halved and a new predictor based on the tangents is calculated
and the process repeated until convergence. The user also provides a minimum and maximum size for the arc
length step.Ru Gu Fnu(,) nlP – + 0 = =
ui1+uiRuui1–Rui  – =
AR uii   
u&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
uui==R uii   
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
ui=
ATQR
0&amp;mdash;=
A+QRT1–
0T&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
=&lt;/p&gt;
&lt;p&gt;277 Chapter 10: Nonlinear Frequency Response
SOL 128 QR Decomposition Procedure Approach
Main Index
Sample definition
SOL 128
$
CEND
…
$&amp;ndash;01&amp;ndash;$$&amp;ndash;02&amp;ndash;$$&amp;ndash;03&amp;ndash;$$&amp;ndash;04&amp;ndash;$$&amp;ndash;05&amp;ndash;$$&amp;ndash;06&amp;ndash;$$&amp;ndash;07&amp;ndash;$$&amp;ndash;08&amp;ndash;$$&amp;ndash;09&amp;ndash;$
NHRMPRM NLHRED  0       NHPLUS  20      NLHTOL  1.0e-5  NLHTWK 1.1
MXICODE0 500    TICPNCH 0       MNCSF   1000    MFRINT  1.0
NLHDIAG 1       CONTP   2       DECOMP  QR
$&amp;ndash;01&amp;ndash;$$&amp;ndash;02&amp;ndash;$$&amp;ndash;03&amp;ndash;$$&amp;ndash;04&amp;ndash;$$&amp;ndash;05&amp;ndash;$$&amp;ndash;06&amp;ndash;$$&amp;ndash;07&amp;ndash;$$&amp;ndash;08&amp;ndash;$$&amp;ndash;09&amp;ndash;$
NLFREQC 88      80.0    1.0     0.      0.      500     0.      0.
1.0E-5  YES
$
NLHARM  2000    1       1       88
…
ENDDATA
Guidelines and Limitation
Use of DECOMP = QR in NHRMPRM is allowed only when CONTP is set to 2. A User Fatal
Message will be issued when using with CONTP = 0 or 1.
Default of DECOMP options is LU.
Examples
SOL128 with QR decomposition and improved continuation procedure having mild and strong non-
linearity. The loading used are UNBALNC &amp;amp; RLOAD/DLOAD combination. Example files are available in
TPL directory (..\tpl\ rotor128).
Example file name Setup description
1contp2_rlo_qr.dat SOL128, CONTP = 2 DECOMP = QR, with DLOAD, RLOAD
loading, forward scan
2contp2_rlo_qr_b.dat SOL128, CONTP = 2 DECOMP = QR, with DLOAD, RLOAD
loading, backward scan
3contp2_unb_qr.dat SOL128, CONTP = 2 DECOMP = QR, with UNBALNC loading,
forward scan
4contp2_unb_qr_b.dat SOL128, CONTP = 2 DECOMP = QR, with UNBALNC loading,
backward scan&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
SOL 128 QR Decomposition Procedure Approach278
Main Index
Below are the results from NOLIN and NLRGAP nonlinearity modeling, as well as loading through
DLOAD/RLOAD combination and UNBALNC entries for the above examples.5e05_base_2.dat SOL128, CONTP = 2 DECOMP = QR, with DLOAD, RLOAD
loading, mild nonlinearity
6e05_base_2_unb.dat SOL128, CONTP = 2 DECOMP = QR, with DLOAD, RLOAD
loading, strong nonlinearity
7e10_base_2.dat SOL128, CONTP = 2 DECOMP = QR, with UNBALNC loading,
mild nonlinearity
8e10_base_2_unb.dat SOL128, CONTP = 2 DECOMP = QR, with UNBALNC loading,
strong nonlinearityExample file name Setup description
contp2_rlo_qr.dat contp2_unb_qr.dat
contp2_rlo_qr_b.dat contp2_unb_qr_b.dat&lt;/p&gt;
&lt;p&gt;279 Chapter 10: Nonlinear Frequency Response
SOL128 Post Processing features.
Main Index
SOL128 Post Processing features.
NHRMITR case control entry provides displacement and nonlinear load for selected grid-dof pairs at end of
each iteration.
In addition, User can select a frequency range to get desired outputs at end of the fully converged solution
through DFOUT option in NLFREQC entry.
User Interface
NHRMITR case control entry: to generate iterative displacement and nonlinear load outputs in CSV file
format.
Format:
Example:
set 30=200/t2,200/t3,500/t2,500/t3,500/r1
set 20=200/t2,500/t2,500/t3
NHRMITR DISP=30, NLLOAD=20
NHRMITR DISP=30
NHRMITR NLLOAD=30
e05_base_2.dat and e10_base_2.dat e05_base_2_unb.dat and e10_base_2_unb.dat
NHRMITRDispnone
setdof&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
  NLLOADnone
setdof&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
= , =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
SOL128 Post Processing features.280
Main Index
Remarks:
1.The output is in CSV file format only.
2.DISP and NLLOAD requests each create separate CSV files.
3.The file names will be jobname_disp.csv and jobname_nlload.csv
NLFREQC
Update to the existing NLFREQC entry: select frequency range to create desired output for converged
solutions.
Example:
NLFREQC 88      10.0    0.01    0.      0.      6000    10.     43.5
1.0E-5  YES
DFOUT   0.25    5.0     28.     36.
OR
NLFREQC 88      40.0    -0.01   0.      0.      6000    10.     40.
1.0E-5  YES
DFOUT   0.25    5.0     25.     35.Describer Meaning
DISP Requests displacement outputs for selected set of GRID points and dof at the end of each
iteration.
NLLOAD Requests nonlinear load outputs for selected GRID points and dof at the end of each
iteration.
1 2 3 4 5 6 7 8 9 10
NLFREQC ID FREQINI STEPINI MINSIZE MAXSIZE MAXSTEP MINFREQ MAXFREQ
DERINC PRTOUT
&amp;ldquo;DFOUT&amp;rdquo; DFQ DFQTOL BEGFQ ENDFQ
Describer Meaning
ID Identification number referenced by the NLFREQ field (field 5) of an NLHARM Bulk
Data entry. (Integer &amp;gt; 0).
FREQINI Initial/start frequency f0 for CONTP = 2 (a previous stable frequency solution). (REAL ≥
0.0)&lt;/p&gt;
&lt;p&gt;281 Chapter 10: Nonlinear Frequency Response
SOL128 Post Processing features.
Main Index
Remarks:
1.This entry is supported only for SOL128.
2.Only one NLFREQC entry with the same ID is allowed.
3.When using CONTP = 2 on the NHRMPRM entry, an NLFREQC entry is required, if not defined,
a UFM will be issued.
4.Use of the DFOUT option will provide output selected by the case control commands for the selected
frequency range from BEGFQ to ENDFQ.
5.Only the output for converged solutions in the requested range will be available.
Example 1:
SOL 128STEPINI Initial/start step length for CONTP = 2 (Solutions at f0 and f0+STEPINI must be stable
to find converged responses first. STEPINIT can be either a positive or negative value).
(REAL  0.0).
MINSIZE Magnitude of the minimum step size for iteration. (REAL ≥ 0.0, default = 1.0E-5 
ABS(STEPINIT) )
MAXSIZE Magnitude of the maximum step size for iteration. (REAL ≥ 0.0, default = 100.0 
ABS(STEPINIT) )
MAXSTEP Maximum number of steps allowed when using continuation procedure CONTP=2
MINFREQ Minimum frequency to terminate the continuation procedure CONTP = 2. (REAL ≥ 0.0,
default = 0.0)
MAXFREQ Maximum frequency to terminate the continuation procedure CONTP = 2. (REAL ≥ 0.0,
default = FREQINI + ABS(STEPINIT)  MAXSTEP)
DERINC Central difference in computing derivative of linear/nonlinear load
PRTOUT Print output request in case convergence fails: “NO” (default) or “YES”
DFOUT Flag indicating that the next 4 fields are for user specific output request (Character,
Optional)
DFQ Frequency step interval for output. The solution frequency BEGFQ + N DFQ 
DFQTOL (where N is an integer &amp;gt;= 0) and BEGFQ + N DFQ is less than or equal to
ENDFQ will be saved for output. (REAL, Required)
DFQTOL Tolerance in terms of % to identify closest frequency step for post-processing. This is given
in terms of percent of DFQ. (REAL, Default = 5.0%)
BEGFQ Initial/start frequency for output request. (REAL, Default = &amp;lsquo;FREQINI&amp;rsquo; value in
NLFREQC card)
ENDFQ Maximum frequency for output request. (REAL, Default = &amp;lsquo;MAXFREQ&amp;rsquo; value in
NLFREQC card)Describer Meaning&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
SOL128 Post Processing features.282
Main Index
$
CEND
…
SUBCASE 1001
disp(phase,sort2,phase)=1001
nlload(phase,sort2,phase)=1001
DLOAD=201
RGYRO=301
METHOD=1001
RESVEC=NO
nonlinear = 1000
NLHARM=2000
set 30=200/t2,200/t3,200/r1,200/r2,500/t2,500/t3,500/r1
set 20=200/t2,200/t3,500/t2,500/t3
nhrmitr DISP=30, NLLOAD=20
$
BEGIN BULK
NLHARM,2000,1,1,88
NHRMPRM,MNCSF,2,NLHDIAG,1,CONTP,2,NLHRED,0,MXICODE0,1000,DECOMP,QR
$&amp;ndash;01&amp;ndash;$$&amp;ndash;02&amp;ndash;$$&amp;ndash;03&amp;ndash;$$&amp;ndash;04&amp;ndash;$$&amp;ndash;05&amp;ndash;$$&amp;ndash;06&amp;ndash;$$&amp;ndash;07&amp;ndash;$$&amp;ndash;08&amp;ndash;$$&amp;ndash;
09&amp;ndash;$
NHRMPRM NLHRED  0       NHPLUS  20      NLHTOL  1.0e-5  NLHTWK 1.1
MXICODE0 500    TICPNCH 0       MNCSF   1000    MFRINT  1.0
NLHDIAG 1       CONTP   2       DECOMP  QR
NLFREQC 88      10.0    0.01    0.      0.      6000    10.     43.5
1.0E-5  YES
DFOUT   0.25    5.0     28.     36.
$
…
ENDDATA&lt;/p&gt;
&lt;p&gt;283 Chapter 10: Nonlinear Frequency Response
SOL128 Post Processing features.
Main Index
Guidelines and Limitation
•Use of DFOUT on the NLFREQC is allowed only when CONTP is set to 2. A User Fatal
Message will be issued when using with CONTP = 0 or 1.
•Request of NHRMITR (iteration outputs) will result in slower run time as the .csv files are
opened to write the data and closed after each converged solution. This means that if the run
fails, the .csv files will be available up to the last converged solution.
Examples
SOL128 with NHRMITR request and DFOUT request are available in TPL directory ( ..\tpl\
rotor128\ )
Below are the results for the decks in TPL.
sol128_dfout_a.datSr. Example file name Setup description
1 sol128_dfout_a.dat NLFREQC with DFOUT request for UNBALNC forward scan
2 sol128_dfout_d.dat NLFREQC with DFOUT request for UNBALNC forward scan
3 nhrmitr_same_id.dat NHRMITR iterative output request with different set ids
4 nhrmitr_unit.dat NHRMITR iterative output request with same set ids&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
SOL128 Post Processing features.284
Main Index
sol128_dfout_d.dat
nhrmitr_same_id.dat
set 30=200/t2,200/t3,200/r1,200/r2,500/t2,500/t3,500/r1
nhrmitr DISP=30, NLLOAD=30&lt;/p&gt;
&lt;p&gt;285 Chapter 10: Nonlinear Frequency Response
SOL128 Post Processing features.
Main Index
Output: nhrmitr_same_id_disp.csv
Output: nhrmitr_same_id_nlload.csv&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples286
Main Index
Examples
Example 1
Reset Initial Condition
a.Using maximum number of frequency step failures
NHRMPRM MNCSF2 NLHDIAG 1
Input File: s128_mncsf.dat
b.Using maximum frequency interval
NHRMPRM MFRINT 0.0002 1
Reference case: s128_ori.dat
Output for Multiple Harmonics
Example: r1d128nhrm.dat
NLHARM 60, 2, 3, 20&lt;/p&gt;
&lt;p&gt;287 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
NLLOAD Output&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples288
Main Index
Continuation Procedure
Example: s128_contp1.dat
Example: s128_contp2.dat&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P16</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_016/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_016/</guid>
      <description>
        
        
        &lt;p&gt;289 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
Example Summary
All the test cases analyzed for testing are available in &amp;quot; ../tpl/s128_v19/ &amp;quot; folder. Here is a brief description for
all the test cases:
Example 2
This example from (Zu and Ji, 1998) shows a rotor bearing system (see Figure 10-2) in which an out-of-balance
load excites a rigid overhung disk mounted on a flexible shaft turning in bearings exhibiting nonlinear
stiffness.
Figure 10-2  Rotor Bearing System
The round solid shaft of diameter 0.1 meter is 1.0 meter long and runs in two bearings, one located at one
end of the shaft while the other is positioned just inboard of the disk such that the disk is overhung. The
bearings are mounted on an isolation material that exhibits nonlinear stiffness varying with a cubic law. The
overhung massive rigid disk exhibits a small eccentricity in its mass distribution.
Shaft material properties:
Disk properties:Output for multiple harmonics and NLLOAD r1d128nhrm
Continuation procedure for 2 DOF system S128_contp1
Continuation procedure for 1 DOF system S128_contp2
FATAL message when NHARM &amp;lt; SUBFAC in NLHARM entry S128_fat1
Reset of initial condition when frequency interval limit is reached S128_mfr
Reset of initial condition when frequency steps limit is reached S128_mncsf
Original test case without the reset option S128_ori
Young’s modulus 2.07E+11 Nm-2
Density 7750 kgm-3
Mass of disk 2000 kg&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples290
Main Index
Bearing stiffness and damping (symmetrical)
Firstly, the analysis is run in a linear direct frequency response with linear bearing properties. The analysis is
then repeated in the nonlinear harmonic solution sequence, still with linear bearing properties and the answer
is compared. Finally, the nonlinear bearing stiffness properties are added and the response compared against
theory (Zu and Ji, 1998).
Model Data
The bulk data for the model is shown; this data is common to all runs (common.dat).
PARAM,GRDPNT,0
PARAM,COUPMASS,1
$
$ ROTOR
ROTORG,1,1,2,3,4
RGYRO,66,SYNC,1,FREQ
RSPINR,1,1,4,FREQ,1.
GRID,1
GRID,2,,.5
GRID,3,,1.
GRID,4,,.99
CBEAM,1,1,1,2,,1.
CBEAM,2,1,2,4,,1.
CBEAM,3,1,4,3,,1.
PBEAM*   1               1               7.8539820-3     4.9087390-6&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;   4.9087390-6                     9.8174780-6
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;+
.68     .68
MAT1,1,2.07+11,,.27,7.75+3
$
$ DISK MASS &amp;amp; INERTIA
CONM2,6,3,,2000.
,200.,,100.,,,100.
$
$ STATOR
GRID,5
GRID,6,,.99
$
$ ROTOR TO STATOR CONNECTIONInertia (polar) 200 kgm2
Inertia (diametral) 100 kgm2
Linear stiffness 1.5E+7 Nm-1
Nonlinear stiffness
(d is the value of displacement)1E+12d3 Nm-3
Damping 1.72E+4 Nsm-1&lt;/p&gt;
&lt;p&gt;291 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
RBE2,941,5,123456,1
RBE2,953,6,123456,4
$
$ GROUND
GRID,105
GRID,106,,.99
$
$ BEARING DAMPING
CDAMP2,20442,1.72+4,105,2,5,2
CDAMP2,20443,1.72+4,105,3,5,3
CDAMP2,20552,1.72+4,106,2,6,2
CDAMP2,20553,1.72+4,106,3,6,3
$
$ REMOVE SINGULAR DOFS
SPC1,1,14,2,3,5,6
SPC1,1,123456,105,106
$
$ OUT OF BALANCE FOR ROTOR
UNBALNC,77,2000.,3,,1.
,1.4142-3
Linear Frequency Response – SOL 108
In this first analysis, only the linear stiffness of the bearings is considered. This allows easy comparison
between a linear frequency response in SOL 108 and nonlinear harmonic response (with linear nonlinearities)
in SOL 128.
Here is the case control and additional bulk data required for the linear frequency response.
SOL 108
CEND
LINE=9999999
DISP(SORT2,PHASE)=ALL
SPC=1
RGYRO=66
DLOAD=77
FREQ=88
BEGIN BULK
include ‘common.dat’
$
$ BEARING STIFFNESS
CELAS2,10442,1.5+7,105,2,5,2
CELAS2,10443,1.5+7,105,3,5,3
CELAS2,10552,1.5+7,106,2,6,2
CELAS2,10553,1.5+7,106,3,6,3
$
FREQ1,88,9.549296,.0530516,240
ENDDATA
Linear Frequency Response – SOL 128
In this second analysis, the same problem is now run in nonlinear harmonic response which solves the
problem in an iterative manner.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples292
Main Index
Here is the case control and additional bulk data required for the linear harmonic response in SOL 128.
SOL 128
CEND
LINE=9999999
DISP(SORT2,PHASE)=ALL
SPC=1
RGYRO=66
DLOAD=77
NONLINEAR=1000
NLHARM=2000
BEGIN BULK
include ‘common.dat’
$
$ LINEAR BAERING STIFFNESS (HALVED)
CELAS2,10442,7.5+6,105,2,5,2
CELAS2,10443,7.5+6,105,3,5,3
CELAS2,10552,7.5+6,106,2,6,2
CELAS2,10553,7.5+6,106,3,6,3
$
$ LINEAR BEARING STIFFNESS (HALF PROVIDED BY NOLIN1)
NOLIN1,1000,5,2,-1.,5,2,1001
NOLIN1,1000,5,3,-1.,5,3,1001
NOLIN1,1000,6,2,-1.,6,2,1001
NOLIN1,1000,6,3,-1.,6,3,1001
TABLED1, 1001,
, -1.0, -7.5+6, 1.0, 7.5+6, ENDT
$
NLFREQ1,88,9.549296,.0530516,240
NLHARM,2000,1,1,88
$
ENDDATA
For these two linear analyses, the  magnitude response of grid point 3 in Y direction is shown in Figure 10-4.
The linear frequency response curve is hidden by the nonlinear harmonic response curve; this demonstrates
that the linear problem can be solved using the 2 different methods (SOL 108 and 128) and the response is
the same.
Nonlinear Frequency Response – SOL 128
In this third analysis, the cubic nonlinear stiffness of the bearings is added.
Here is the case control and additional bulk data required for the nonlinear harmonic response in SOL 128.
SOL 128
CEND
LINE=9999999
DISP(SORT2,PHASE)=ALL
SPC=1
RGYRO=66
DLOAD=77
NONLINEAR=1000
NLHARM=2000&lt;/p&gt;
&lt;p&gt;293 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
BEGIN BULK
include ‘common.dat’
$
$ BEARING STIFFNESS
CELAS2,10442,1.5+7,105,2,5,2
CELAS2,10443,1.5+7,105,3,5,3
CELAS2,10552,1.5+7,106,2,6,2
CELAS2,10553,1.5+7,106,3,6,3
$
$ CUBIC NONLINEAR STIFFNESS (TENSION)
NOLIN3,1000,5,2,-1+12,5,2,3.
NOLIN3,1000,5,3,-1+12,5,3,3.
NOLIN3,1000,6,2,-1+12,6,2,3.
NOLIN3,1000,6,3,-1+12,6,3,3.
$ CUBIC NONLINEAR STIFFNESS (COMPRESSION)
NOLIN4,1000,5,2,-1+12,5,2,3.
NOLIN4,1000,5,3,-1+12,5,3,3.
NOLIN4,1000,6,2,-1+12,6,2,3.
NOLIN4,1000,6,3,-1+12,6,3,3.
$
$ Spin up
NLFREQ1,88,9.549296,.1591549,240
$ Spin down
$NLFREQ1,88,47.74648,-.1591549,240
NLHARM,2000,1,1,88
$
ENDDATA
The analysis is run in two parts, the first starting from a cyclical frequency of 9.55 Hz (60 radians/second)
with an increasing frequency up to a frequency of 47.7 Hz (300 radians/second); this simulates a spin-up
event where each frequency is considered in its steady state condition.  The second part of the analysis
simulates a spin-down event starting from a cyclical frequency of 47.7 Hz with a decreasing frequency.
The magnitude of the Y direction response of GRID point 3 is plotted against rotational frequency with the
resulting two curves:&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples294
Main Index
Figure 10-3  The Y direction response of GRID point 3
Clearly there is a zone of bifurcation near 20 Hz ; that is to say, after 20 Hz, two possible states exist. In the
spin-down case, the solution jumps from one solution to the other and then retraces the spin-up response
curve; an unstable condition exists between these two.
The results are in good agreement with those reported in reference (Zu and Ji, 1998).
Example 3
Use of NLRGAP element
The NLRGAP element can be used to define nonlinear force-displacement relation as a function of frequency
for nonlinear frequency response analysis performed using SOL 128. Brief description of this feature is given
in QRG description of NLRGAP element.
For nonlinear harmonic response either a TABLED1 entry or a TABLED5 entry may be referenced leading
to three possible scenarios:
a.The number entered in the TABK field is a positive integer referencing a TABLED1 entry. In this
case, the pairs of values defined on the TABLED1 entry are frequency vs. gap stiffness.
b.The number entered in the TABK field is a negative integer, the absolute value of which references
a TABLED1 entry. In this case, the pairs of values defined on the TABLED entry are gap
penetration vs. gap force.
c.The number entered in the TABK field is a positive integer referencing a TABLED5 entry. In this
case, the pairs of values defined on the TABLED5 entry are frequency vs. a TABLED1 ID that
defines pairs of gap penetration vs. gap force.&lt;/p&gt;
&lt;p&gt;295 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
Example: Consider the NM rotor used earlier in the analysis.
Figure 10-4  NM rotor used in the analysis
The rotor used in this example problem is shown in Figure 10-4. The unbalance load is defined on the Grid
41 while the rotor is supported using linear bearings at Grid 91 and Grid 111. For this analysis, additional
nonlinear bearing elements are defined at Grid 91. Nonlinear element used in this analysis is NLRGAP and
it defines nonlinear force-deflection relationship which varies with frequency, see Figure 10-5. Changes made
in the input file to introduce the nonlinear bearing element is described below:&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples296
Main Index
Figure 10-5  Nonlinear Force deflection curve as a function of frequency
For this particular case, introduction of the nonlinear NLRGAP elements results in an increase in the stiffness
of support structure. As a result, the peak frequency is shifted to the right, as seen in Figure 10-6.
Figure 10-6  Effect of nonlinearity&lt;/p&gt;
&lt;p&gt;297 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
Examples used in this chapter are available under the following folder:  ..\tpl\ugrotor  and
..\tpl6\ugrotor . A brief description of these examples is given below:
Example 4
Use of NLRGAP element
A typical rotordynamics nonlinear frequency response solution with NLRGAP is chosen. The NLRGAP
setup is similar to Example 2.
Here, “GAMMA” flag with SMVAL = 1.0E+6 is added.
This smoothing function call helps in convergence of the solution. The displacement and non-linear load
are plotted.
SOL 128
CEND
LINE = 999999
TITLE = GYROSCOPIC INFLUENCE OF A RIGID DISK ROTATING ON A SHAFT
SPC = 2
CMETHOD = 1
RGYRO = 1
DLOAD = 10&lt;br&gt;
NONLINEAR = 1000
NLHARM=2000
SET 99 = 212,224
SET 2222 = 2222
DISP(SORT2,PUNCH,PHASE)=99
NLLOAD(SORT2,PRINT,PUNCH,PHASE)=99
BEGIN BULK
$
NLFREQ1 88      0.0     1.0     500
NLHARM  2000    1       1       88
$&amp;ndash;01&amp;ndash;$$&amp;ndash;02&amp;ndash;$$&amp;ndash;03&amp;ndash;$$&amp;ndash;04&amp;ndash;$$&amp;ndash;05&amp;ndash;$$&amp;ndash;06&amp;ndash;$$&amp;ndash;07&amp;ndash;$$&amp;ndash;08&amp;ndash;$$&amp;ndash;09&amp;ndash;$
NHRMPRM NLHRED  1       nhplus  20      nlhtol  1.0e-5  nlhtwk 1.1
mxicode0 5      ticpnch 0       mncsf   1000    MFRINT  1.0
NLHDIAG 1          Table 10-1&lt;br&gt;
Input File Name Description
rug_10_1 Linear response
rug_10_2 Linear response in SOL 128
rug_10_3 Nonliner response in Spin up.
rug_10_4 Nonlinear response in spin down.
rug_10_5 NM model with nonlinear NLRGAP element.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples298
Main Index
$&amp;ndash;1&amp;mdash;|&amp;mdash;2&amp;mdash;|&amp;mdash;3&amp;mdash;|&amp;mdash;4&amp;mdash;|&amp;mdash;5&amp;mdash;|&amp;mdash;6&amp;mdash;|&amp;mdash;7&amp;mdash;|&amp;mdash;8&amp;mdash;|&amp;mdash;9
$NLRGAP SID     GA      GB      PLANE   TABK    TABG    TABU    RADIUS
$       GAMMA   SMVAL
NLRGAP  1000    212     224     XY      1403    1401            0.06
GAMMA   1000000.
$
TABLED1 1403
0.      1.0e6    1000.   1.0e6      ENDT
$
TABLED1     1401                                                        +
+0.00.00106000.00.0010  ENDT
$
Example 3 “sm_nlrgap.dat” is available under \qa\nastran\tpl\rotor128&lt;br&gt;
Results plots for displacement and non-linear load at NLRGAP GA is plotted as below.&lt;/p&gt;
&lt;p&gt;299 Chapter 10: Nonlinear Frequency Response
Examples
Main Index
Example 5
Continuation Procedure (CONTP = 2)
SOL128 with new continuation procedure is carried out for simple rotor model having mild non-linearity.
The loading using UNBALNC and RLOAD/DLOAD combination are available as 2 different example files
in TPL directory ( ..\tpl\ rotor128\ contp2_unbl.dat, contp2_rload.dat )
Non-linear analysis setup calls:
Results from the 2 runs are compared as shown:&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples300
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 11: Superelement Analysis with Rotors
MSC Nastran Rotordynamics User’s Guide
11Superelement Analysis with
Rotors
Introduction      302
Support for Copy and Move/Mirror Capability      303
Sample Problem      305
Results from External SE Analysis      313&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction302
Main Index
Introduction
The principle used in superelement (SE) analysis is often referred to as substructuring. That is, the model is
divided into a series of components, each of which is processed independently resulting in a set of matrices
that are reduced to a boundary and describe the behavior of the component as seen by the rest of the structure.
Often these components are comprised of logical groupings of elements (an engine, a wing, a fender, the
exhaust system, etc.), hence the term superelement.
There are three methods available for defining superelements:
List Superelement: Commonly referred to as “SESET” superelements
PART Superelement: Commonly referred to as “BEGIN SUPER” superelements
External Superelement: Commonly referred to as “EXTSEOUT” or “EXTOUT” or “DMIG”
superelements
Of the three available methods, rotors can be defined in PART or External SEs
PART Superelements
PART superelements are defined by defining each superelement in its own Partitioned Bulk Data section.
These separate sections of the bulk data are self-contained in that each section contains all geometry,
elements, properties, constraints, parameters, and loading data for that component of the model. When
PARTs are used the program works in a manner similar to an assembly process. That is, a series of separate
components are assembled into the final finite element model, i.e. the residual structure.
External Superelements
The external superelement (SE) capability involving the use of the EXTSEOUT Case Control command was
added to MSC Nastran in 2004. Since then, this capability has become the most popular and most widely
employed SE usage. External Superelements are similar to PART superelements in many respects, except
rather than solving the model in a single run, the superelement can be processed and output for use at a later
time. There are many advantages of external superelements: 1) the reduced matrices are compact and can be
added to another structure while maintaining full fidelity of the component behavior on the system, 2) they
can be easily re-used as many times as necessary at a very low runtime cost, 3) they can protect design
information (proprietary geometry) and material information (composite layup), 4) key results can be
monitored without the need for full data recovery, 5) files can be easily shared and maintained across different
organizations or design groups.
Support for rotors in external SE was implemented in V2014, while support for rotors in PART SE is
introduced since V2018. With these enhancements in MSC Nastran, any number of ROTORG, ROTOR
(in fixed reference) and/or ROTORAX Bulk Data entries that define rotors may be specified in external or
part SEs and the residual, but Bulk Data entries that pertain to usage of rotors (like RGYRO, RSPINR,
RSPINT and UNBALNC entries) are allowed and processed only in the residual.
This design has the advantage that, once the rotors are defined in the SEs, different variations of their usage
may be accomplished in the assembly job by having different variations of the RGYRO, RSPINR and/or
RSPINT rotor usage entries. Thus, this design gives the user the freedom to form different Rotordynamic&lt;/p&gt;
&lt;p&gt;303 Chapter 11: Superelement Analysis with Rotors
Support for Copy and Move/Mirror Capability
Main Index
configurations in assembly jobs for performing specific types of analysis like complex eigenvalue analysis or
frequency or transient response analysis.
With the above design, gyroscopic matrices and other rotor related matrices are computed for rotors in the
SE in which they are defined (whether it be an external SE, part SE or the residual). Speed factors are applied
to rotor related matrices of all rotors only in the residual. All of these matrices are then combined
appropriately to perform the analysis specified by the user.
The above scenario also introduces another interesting aspect into the design. With the enhancements in
MSC Nastran 2014, it is quite possible that there may very well be rotors with duplicate IDs across external
and part SEs and the residual. In order to allow for this scenario, rotors whose usage is specified in the
assembly job need to be identified not only by their rotor IDs, but also by the IDs of the SEs in which they
are defined. T o facilitate this, a field called ROTRSEID has been added to the existing RGYRO, RSPINR
and RSPINT Bulk Data entries to specify the ID of the SE in which a particular rotor is defined.
Yet another point to consider is that the mass summary information for rotors is generated and output only
in the jobs that define the rotors. Thus, for instance, if there are rotors in both SEs and the residual, the
assembly job generates and outputs rotor mass summary information only for the rotors defined in the
residual. The mass summary information for the rotors defined in upstream external SEs is available only in
the corresponding external SE creation jobs. The program points this out via an appropriate user information
message in the assembly job if any rotors defined in external SEs are referenced in the assembly job.
Support for Copy and Move/Mirror Capability
There are many practical cases in which we encounter geometrically identical components. Blades of turbines
and engines and many components in airplanes and automobiles are examples of such cases.
When external SEs are employed to represent such components, the copy and move/mirror feature available
since MSC Nastran 2014 allows the user to employ additional copies of an already reduced external SE (the
“primary” SE) in an assembled configuration without having to perform reduction operations on each of the
additional geometrically identical components (the “secondary” SEs). Instead, the boundary matrices for all
of the “secondary” external SEs are obtained automatically via appropriate internal transformations of the
corresponding boundary matrices of the “primary” external SEs. The translation and rotation of element
coordinate system during the copy and mirror procedure is shown in Figure 11-1.
The following important points should be noted with regard to the usage of the copy and move/mirror
feature:
The primary SE does not include SEs upstream of the primary SE.
If the primary SE is a part SE, then the secondary SE is a &amp;quot; G-set &amp;quot; copy of the primary SE. In this
case, the boundary, loads, constraints and reduction procedure of a secondary SE can be different
from those of its primary SE.
If the primary SE is an external SE resulting from the use of the EXTSEOUT Case Control
command in an earlier job, then the secondary SE is an &amp;ldquo;A-set &amp;quot; copy of the primary SE. In this case,
the boundary, loads, constraints and reduction procedure of the secondary SE are set and are the
same as those of its primary SE.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Support for Copy and Move/Mirror Capability304
Main Index
A secondary SE requires the specification of either an SELOC entry or an SEMPLN entry. If an
SELOC entry is specified, then an identical copy of its primary SE will be positioned at the location
implied by the SELOC entry. If an SEMPLN entry is specified, then a mirror image of the primary
SE will be positioned.
It should be noted that even a primary external SE can be re-positioned in an assembly run by use of
an SELOC or SEMPLN entry.
The above capability greatly enhances user convenience and productivity by eliminating the need to
individually model geometrically identical external SEs and contributes to enhanced efficiency for
performing the analysis of such assembled configurations.
Figure 11-1  Copy/Move feature in MSC Nastran for superelements
Main differences in the implementation for supporting rotors in the external SE and the part SE are as
follows:
Table 11-1  Differences in External SE and PART SE implementation
Part SE External SE
Multilevel SE Rotors can be defined in any of the
SEs in a multilevel SE modelRotor can only be defined one level
below the residual.
Grids on RSPINR/T Grids defined on RSPINR/RSPINT
need not be part of ASET for that SEGrids defined on RSPINR/RSPINT
MUST be part of ASET for that SE
QSET for secondary SEs For a secondary SE generated using
mirror/move option, QSET DOFs
must be redefined to include their
effect in the analysis. For a secondary SE generated using
mirror/move option, all the DOFs
are defined automatically.&lt;/p&gt;
&lt;p&gt;305 Chapter 11: Superelement Analysis with Rotors
Sample Problem
Main Index
Sample Problem
The sample problem consists of a model plane with two identical engines is analyzed where each engine
includes two axisymmetric rotors. For this case, rotors are defined in SEs one level below the residual. Thus,
this problem can be solved using any of the external SE or PART SE approaches. Here only the external SE
approach is demonstrated, however, similar steps can be used for PART SE approach too.
In order to compare the results, three different cases are considered as indicated below.
a.Single-shot run: Here, the complete plane with both the engines is analyzed at once, without the
usage of external superelements (see Figure 11-2)
b.External SE assembly run using two external SEs: In this case, the left and right engines are part
of two separate external superelements with IDs of 200 and 400, respectively. The model used for
the creation run of the right engine is shown in Figure 11-3. The model includes both rotating and
non-rotating components. Besides the physical DOFs of the boundary points shown in
Figure 11-3, modal DOFs for the complete model are also used in the analysis performed in the
assembly run.
The model for the assembly run with the left and right engines included as external superelements
is shown in Figure 11-4.
c.External SE assembly run using one external SE and the MIRROR feature: In this case, only the
external SE model for the right engine is used. The left engine is attached to the residual structure
by mirroring  the right engine about the mirror plane as shown in Figure 11-5.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Sample Problem306
Main Index
Figure 11-2  Model for single-shot run
Figure 11-3  Engine model used for external SE creation run&lt;/p&gt;
&lt;p&gt;307 Chapter 11: Superelement Analysis with Rotors
Sample Problem
Main Index
Figure 11-4  Model with engines as two external SEs
Figure 11-5  Model with left engine obtained using mirror  feature
Input File for Creation Run
Both SOL 101 and SOL 103 can be used for the creation run. Additional features required in different
sections of the input file for creating external SE is described below:
File Management
$ ASSIGN STATEMENTS FOR STORING EXTERNAL MATRICES IN THE OP2 FILE
ASSIGN OUTPUT2=&amp;lsquo;freedom_103a_op2&amp;rsquo; UNIT=35 DELETE
Case Control
$ INCLUDE THE EXTSEOUT COMMAND
extseout(asmbulk=auto, extbulk, extid=200, dmigop2=35)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Sample Problem308
Main Index
Bulk data Entries
Figure 11-6  ASET and QSET DOFs for the creation run&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P17</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_017/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_017/</guid>
      <description>
        
        
        &lt;p&gt;309 Chapter 11: Superelement Analysis with Rotors
Sample Problem
Main Index
Successful execution of the input file for creation run generates following files at output
a.*.asm File
This file identifies SE in the model and ID corresponding OP2 file. This file can be included anywhere in
the assembly run. Snapshot of the file is shown in Figure 11-7.
Figure 11-7  Snapshot of the *.asm file&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Sample Problem310
Main Index
b.*.pch File
The PCH files includes all the bulk data entries pertaining to the external SE. It identifies external boundary
points, and lists out grid location of all the ASET DOFs to be used in the assembly run. Information
regarding modal DOFs is also included in this analysis. Snapshot of the PCH file is shown in Figure 11-8
Figure 11-8  Snapshot of the PCH file
c.OP2 file
This file contains all the matrices generated during the creation run.
Assembly Run
The analysis for the assembled structure with all the external SEs created earlier can be performed in any of
the solution sequences where rotors are supported. In order to include an external SE with rotor in the
residual run, following changes need to be made in the assembly run:
File Management section
$ ASSIGN STATEMENTS FOR READING EXTERNAL MATRICES FROM THE OP2 FILE
ASSIGN INPUTT2=&amp;lsquo;freedom_103a_op2&amp;rsquo; UNIT=35 $&lt;/p&gt;
&lt;p&gt;311 Chapter 11: Superelement Analysis with Rotors
Sample Problem
Main Index
Bulk data Section
Copying an External SE
Copying an external SE created apriori and then relocating it to a different location in the model requires
usage of the SEBULK and SELOC bulk data entries.
Figure 11-9  Snapshot of SELOC  entry
In the example shown below, a new external SE with SE ID 4 is created by repeating SE with ID 3. And then
it is repositioned in the model by defining three points (19, 20, and 36) that belong to the SE and three points
(1027, 1028, and 1042) that are part of residual model.
SEBULK,4,REPEAT,3
SELOC,4,19,20,36,1027,1028,1042
Generating mirror image of an external SE
A mirror image of an existing external SE can be created by using combination of SEBULK and SEMPLN
entries. Brief description of the SEMPLN entry is given in Figure 11-10. It requires the user to list three grids
or points that define the plane of symmetry. The user needs to ensure that there exists corresponding grid
Defines a partitioned superelement relocation by listing three noncolinear points in the superelement and
three corresponding points not belonging to the superelement.
Format:SELOC Partitioned Superelement Location
1 2 3 4 5 6 7 8 9 10
SELOC SEID PA1 PA2 PA3 PB1 PB2 PB3&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Sample Problem312
Main Index
points in the residual model to make the connection between the new external SE and residual. This
connection can be verified by looking at the output in.F06 file, as shown in Figure 11-11.
Figure 11-10  Snapshot of the SEMPLN  entry
In the example shown below, a mirror image of an existing SE with ID 400 is created using YZ as the mirror
plane.
sebulk,200,repeat,400
sempln,200,plane,800001,800002,800003
POINT    800001         0.0 0.00.0
POINT    800002         1.0 0.00.0
POINT    800003         0.0 0.01.0
Information in the Output File
Besides the actual output requested in case control, the external SE assembly run provides information about
the boundary connection and rotors defined in the external SEs, as shown in Figure 11-11 and Figure 11-12,
respectively. Figure 11-11 shows the connection made between the grid points defined in the assembly
(residual) run and grid points defined as part of ASET in the external superelement creation run. It also lists
all the modal DOFs defined in the creation run. User need to ensure that correct connection has been made
between the grid points defined in residual and in EXT SE to obtain correct results. In case rotors are present
in the EXT SE creation run, the .F06 file for the assembly run lists all the rotors defined in the external
superelements as shown in Figure 11-12. Other details related to rotor mass and spin direction is available in
the .F06 file of the creation run. Defines a mirror plane for mirroring a partitioned superelement.
Format:SEMPLN Superelement Mirror Plane
1 2 3 4 5 6 7 8 9 10
SEMPLN SEID “PLANE” P1 P2 P3&lt;/p&gt;
&lt;p&gt;313 Chapter 11: Superelement Analysis with Rotors
Results from External SE Analysis
Main Index
Figure 11-11  Boundary connection information in .F06 file
Figure 11-12  Rotor information in .F06 file
Results from External SE Analysis
In order to validate the external Superelement analysis, three different types of models described previously
are analyzed using:
i) SOL 107 to obtain complex eigenvalue frequencies;
ii) SOL 108 to obtain frequency response for external applied force, and
iii) SOL 109 to obtain direct transient response.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Results from External SE Analysis 314
Main Index
SOL 107 Results (Complex Eigenvalue Analysis)
The Campbell diagram obtained for the three cases, shown in Figure 11-13, Figure 11-14 and
Figure 11-15, are similar.
Figure 11-13  Campbell diagram for single-shot run (without tracking)&lt;/p&gt;
&lt;p&gt;315 Chapter 11: Superelement Analysis with Rotors
Results from External SE Analysis
Main Index
Figure 11-14  Campbell diagram for the external SE assembly run with two external SEs (without tracking)
Figure 11-15  Campbell Diagram for external SE assembly run using mirror  feature (without tracking)
Further comparison is performed for frequencies 1, 5, 9 and 13, as shown in Figure 11-16. The results obtained
in this section demonstrate that the complex eigenfrequencies obtained for each of the three cases are similar,
thus validating the implementation for the external SE analysis.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Results from External SE Analysis 316
Main Index
Figure 11-16  Comparison for different frequencies (with mode tracking)
SOL 108 Results (Direct Frequency Response)
For this analysis, a force of fixed amplitude at varying frequency (same as the rotational speed of the rotor) is
applied to the rotors in the engine and the response at the tip of the right wing and tip of the tail is observed.
The results shown in Figure 11-17 and Figure 11-18 show good agreement between the results obtained for the
three cases.&lt;/p&gt;
&lt;p&gt;317 Chapter 11: Superelement Analysis with Rotors
Results from External SE Analysis
Main Index
Figure 11-17  Displacement at the tip of the right wing
Figure 11-18  Displacement at the tip of the tail&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Results from External SE Analysis 318
Main Index
SOL 109 Results (Direct Transient Response)
As in the previous case, time-dependent forces of fixed amplitude and frequency is applied to the rotors in
the engine whose rotational speed is increasing linearly with time and the response at the tip of the right wing
and tip of the tail is observed. The results obtained for direct transient response match very well for the three
cases considered here (see Figure 11-19 and Figure 11-20).
Figure 11-19  Displacement at the tip of Right wing
Figure 11-20  Displacement at the tip of the tail&lt;/p&gt;
&lt;p&gt;319 Chapter 11: Superelement Analysis with Rotors
Multilevel SE Setup
Main Index
Multilevel SE Setup
This feature is supported for rotors defined in PART SE only. The user interface for this feature is similar to
the existing approach used for standard Part SEs and for defining rotors in External SE. Here, the rotor is
defined in the BEGIN SUPER section of the model and corresponding RSPINR/RSPINT entries and
RGYRO entry are defined in the MAIN BULK DATA section of the deck. Unlike external superelements,
the grids specified on the RSPINR/RSPINT need not be part of the ASET for part SE rotor is defined in.
However, if unbalance loads need to be applied on any of the rotors in upstream superelements, then the grid
where unbalance loads are defined, MUST be part of the ASET and should have a corresponding connection
point in the residual.
A hypothetical test case is shown in Figure 11-21 where multiple rotors are defined in multilevel PART SE
setup.
Rotor and QSET definition in SE 442
QSET definition in SE 441
Rotor and QSET definition in SE 88
Rotor and QSET definition in SE 44
BEGIN SUPER=442
ROTORG 12 25 26 27 28  ROTORG 15 51 52 53 54 QSET1  0 6001 THRU 6010
SPOINT 6001 THRU 6010
QSET1  0 5001 THRU 5015
SPOINT 5001 THRU 5014 SPOINT 16001 THRU 16010
BEGIN SUPER=88
ROTORG 4 21 22 23 200
ROTORG 14 41 42 43 423 44  QSET1  0 2001 THRU 2012 SPOINT 2001 THRU 2012&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Multilevel SE Setup320
Main Index
Rotor definition and SE connection in Residual
RSPINR/RSPINT definition in residual
SEs are analyzed based on the process order determined using description provided in SETREE.
Mass summary for each rotor is produced as the SE it is defined in is analyzed. Final rotor spin direction for
each rotor is determined based on the grid order prescribed in RSPINR/RSPINT entries. BEGIN SUPER=44
ROTORG   5       17      THRU      19
ASET    140 123456 18 123456&lt;br&gt;
QSET1  0 1001 THRU 1016
SPOINT 1001 THRU 1016 SPOINT 12001 THRU 12012  SPOINT 15001 THRU 15014&lt;br&gt;
DTI  SETREE 1 442 441 441 44 88 44&lt;br&gt;
44 0 ROTORG    6       7      THRU      12 SECONCT 44 0   140 14 1001 THRU 1016 11001 THRU 11016   18 18&lt;br&gt;
SPOINT 11001 THRU 11016
SECONCT 88 44   200 20 2001 THRU 2012 12001 THRU 12012 &lt;br&gt;
SECONCT 441 44
5001 THRU 5012 15001 THRU 15012 220 20     SECONCT 442 441   6001 THRU 6010 16001 THRU 16010 25 250&lt;/p&gt;
&lt;p&gt;RSPINR   4       21       22      RPM    1. 88
RSPINR   14      41       42      RPM    1. 88
RSPINR   5       18       19      RPM    1. 44 RSPINR   12      25       26      RPM    1. 442 RSPINR   15      51       52      RPM    1. 442 RSPINR   6       7        12      RPM    1.
0                                             SUPERELEMENT DEFINITION TABLE (SORTED BY SEID)          &lt;br&gt;
0               PRIMARY    PROCESS  DOWNSTREAM
SUPERELEMENT SUPERELEMENT  ORDER  SUPERELEMENT            TYPE                                 LABEL&lt;/p&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;p&gt;0            0         5          0    RESIDUAL STRUCTURE                                    &lt;br&gt;
44            0         4          0    PRIMARY (BEGIN SUPER)                                 &lt;br&gt;
88            0         2         44    PRIMARY (BEGIN SUPER)                                 &lt;br&gt;
441            0         3         44    PRIMARY (BEGIN SUPER)                                 &lt;br&gt;
442            0         1        441    PRIMARY (BEGIN SUPER)&lt;/p&gt;
&lt;p&gt;321 Chapter 11: Superelement Analysis with Rotors
Multilevel SE Setup
Main Index
Results obtained using PART SE approach are compared with those obtained without SE.
Results at rotor speed of 10000 RPM
Table 11-2  Complex eigenvalues for multilevel Part SE case
Mode Number NO PS (Hz) Mixed (Hz) RotorG (Hz)
1 0.461 0.461 0.461
2 0.461 0.461 0.461
3 0.485 0.485 0.485
4 0.485 0.485 0.485
5 0.869 0.869 0.869
6 0.869 0.869 0.869
7 1.302 1.302 1.302
8 1.302 1.302 1.302
9 3.761 3.763 3.763
10 3.761 3.763 3.763
11 4.029 4.030 4.030
12 4.029 4.030 4.030
13 6.128 6.132 6.132
14 6.128 6.132 6.132
15 6.538 6.543 6.543
16 6.538 6.543 6.543* USER INFORMATION MESSAGE 2064 (ROTOR2)
FOR ROTOR WITH ID        4 AND SEID       88, SPIN DIRECTION IS SAME AS THE
ASSUMED DIRECTION&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;USER INFORMATION MESSAGE 2064 (ROTOR2)
FOR ROTOR WITH ID        5 AND SEID       44, SPIN DIRECTION IS SAME AS THE
ASSUMED DIRECTION&lt;/li&gt;
&lt;li&gt;USER INFORMATION MESSAGE 2064 (ROTOR2)
FOR ROTOR WITH ID        6 AND SEID        0, SPIN DIRECTION IS SAME AS THE  ASSUMED DIRECTION&lt;/li&gt;
&lt;li&gt;USER INFORMATION MESSAGE 2064 (ROTOR2)
FOR ROTOR WITH ID       12 AND SEID      442, SPIN DIRECTION IS SAME AS THE
ASSUMED DIRECTION&lt;/li&gt;
&lt;li&gt;USER INFORMATION MESSAGE 2064 (ROTOR2)
FOR ROTOR WITH ID       14 AND SEID       88, SPIN DIRECTION IS SAME AS THE
ASSUMED DIRECTION&lt;/li&gt;
&lt;li&gt;USER INFORMATION MESSAGE 2064 (ROTOR2)
FOR ROTOR WITH ID       15 AND SEID      442, SPIN DIRECTION IS SAME AS THE  ASSUMED DIRECTION&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Multilevel SE Setup322
Main Index
Examples used in this chapter are the same as those used in the v2014 release guide. These examples are
available in the following folder: ../tpl/extsecopy/ and ../tpl/rotv18/17 9.773 9.782 9.782
18 9.773 9.782 9.782
19 10.847 10.858 10.858
20 10.847 10.858 10.858
Table 11-3&lt;br&gt;
Input File Name Description
freedom_103a.dat Creation run for the left engine
freedom_103b.dat Creation run for the right engine
freedom_107a.dat Assembly run for model with two ext SEs in SOL 107
freedom_107b.dat Assembly run for model with mirrored ext SE in SOL 107
freedom_107s.dat Single-shot run for freedom plane in SOL 107
freedom_108a.dat Assembly run for model with two ext SEs in SOL 108
freedom_108b.dat Assembly run for model with mirrored ext SE in SOL 108
freedom_108s.dat Single-shot run for freedom plane in SOL 108
freedom_109a.dat Assembly run for model with two ext SEs in SOL 109
freedom_109b.dat Assembly run for model with mirrored ext SE in SOL 109
freedom_109s.dat Single-shot run for freedom plane in SOL 109
../tpl/rotv18/r1d10
7nops_18.datMultiple Rotors in residual (No PART SE case)
../tpl/rotv18/rbd10
7mlps_19.datRotors defined using ROTOR and ROTORG in multilevel PART SEs
../tpl/rotv18/r1d10
7mlps_20.datRotors defined using ROTORG in multilevel part SETable 11-2  Complex eigenvalues for multilevel Part SE case
Mode Number NO PS (Hz) Mixed (Hz) RotorG (Hz)&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 12: Multiple Rotors In Fixed System
MSC Nastran Rotordynamics User’s Guide
12Multiple Rotors In Fixed
System
Introduction      324&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction324
Main Index
Introduction
MSC Nastran supports multiple rotors in an analysis model. They can be all of the same type or different
(ROTORG, ROTORAX, or ROTOR). (In case, the ROTOR entry is used for analyzing a rotating structure
in rotating reference frame, then ROTORAX and ROTORG cannot be used since they are defined in fixed
reference frame.)
For analysis in the fixed reference frame, rotor speed of each rotor can be specified independently. User has
the option to specify rotor speed as a real multiple of the reference rotor&lt;code&gt;s speed or using a table lookup. For  complex eigenvalue analysis and for frequency response analysis, both asynchronous and synchronous  analysis are supported. For synchronous analysis in SOL 107 and synchronous analysis in SOL 108 with the  GYROAVG option, the rotor speed of each rotor is approximated as linear function of reference rotor&lt;/code&gt;s
speed. For all other cases, actual rotor speed of each rotor is used in the analysis. (See further details in QRG
under the RSPINR  entry, or equations in Chapter 7 and Chapter 8)
Example
For the purpose of demonstration, consider a second cantilever rotor defined next to a NM rotor as shown
in Figure 12-1. Here, both the rotors are defined using ROTORG and they are completely independent of each
other.
NM Rotor
Cantilever Rotor
Figure 12-1  Rotor models used for analysis
The second rotor defined above is analyzed first separately using SOL 103 and SOL 107 to determine real
eigenvalues and critical eigenvalues, respectively.  The results obtained are shown in Table 12-1.&lt;/p&gt;
&lt;p&gt;325 Chapter 12: Multiple Rotors In Fixed System
Introduction
Main Index
Steps to introduce multiple rotors in the analysis
For each rotor defined in the analysis, corresponding rotor definition card and RSPINR entry need to be
defined. Also, only one RGYRO entry is required in the analysis which identifies reference rotor and rotor
speed for asynchronous analysis.
Case 1 : Rotors spinning at same speed
RGYRO    1       SYNC      1      RPM                   1000.0
$&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- ROTOR 1 &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;br&gt;
$ Rotor Dynamics data
ROTORG   1       1      THRU      15
ROTORG   1      41 91       111
RSPINR   1 9       10      RPM    1.&lt;br&gt;
$&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- ROTOR 2 &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
ROTORG 2 21 THRU 26
RSPINR 2 21 22 RPM 1.
In this model, both Rotor 1 and Rotor 2 are defined with Rotor 1 as the reference rotor. When complex
eigenvalue analysis is performed for this model with the SYNC option, following critical speeds are obtained: Table 12-1  Real and critical eigenvalue for cantilever rotor (Hz)
Mode Real Eigenvalues Critical Frequencies
1 189.91 188.47
2 189.91 191.38
3 1152.22 1088.12
4 1152.22 1222.50
5 1236.60 1236.60
Table 12-2  Critical Frequencies for model with multiple rotors
Mode Frequencies (Hz) Source
1 188.47 Rotor 2
2 191.38 Rotor 2
3 257.31 Rotor 1
4 284.75 Rotor 1
5 767.55 Rotor 1
6 820.14 Rotor 1
7 1025.38 Rotor 1
8 1088.12 Rotor 2
9 1088.70 Rotor 1
10 1222.50 Rotor 2&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction326
Main Index
Here, the MSC Nastran results do not identify corresponding dominant rotor for the critical frequencies
obtained. However, MSC Nastran provides rotor energies for each mode as shown in Figure 12-2. Based on
this information, the dominant rotor for each critical frequency was identified as shown in  Table 12-2.
Figure 12-2  Rotor Energy Distribution
In case the rotors are spinning at different rotor speeds, there are two options currently available in MSC
Nastran to provide different rotor speeds as a function of reference rotor spin speed. These options are shown
below:
Case 2 : Rotors spinning at different speed
Option 1
RSPINR    1       9       10      RPM    1.
RSPINR 2       21      22  RPM    10.
Option 2
RSPINR   1       9       10      RPM    11     &lt;br&gt;
DDVAL     11      100.    200.
RSPINR   2       21       22    RPM     22
DDVAL     22      1000.    2000.
In this first option, the speed of second rotor is direct multiple of reference rotor speed. However, in case 2
option 2, any generic piecewise linear variation can be specified. Critical frequencies obtained for this case
are shown in Table 12-3 and compared with those obtained earlier in Table 12-2. Note that the critical
frequencies of the second rotor have shifted slightly in this case. This is due to the fact the synchronous&lt;/p&gt;
&lt;p&gt;327 Chapter 12: Multiple Rotors In Fixed System
Introduction
Main Index
analysis is now looking for the frequencies where the rotor speed is half of the structural frequency. Critical
speeds for the reference rotor is the same both cases.
For the analysis with multiple rotors spinning at different speeds, correct critical frequencies for Rotor 2 can
be obtained by performing the synchronous complex eigenvalue analysis again with Rotor 2 as the reference
rotor.
RGYRO    1       SYNC      2      RPM                   1000.0
RSPINR   1       9         10     RPM        11
RSPINR   2       21        22     RPM       22
DDVAL    22      1000.     2000.
Results obtained for this case are shown in Table 12-4. It should be noted that in this case, the critical
frequencies obtained for Rotor 1 will be incorrect. Table 12-3  Results from SOL 107 analysis (SYNC option)
Case 2 Option 1 Case 2 Option 2
Mode Frequencies (Hz) Source Frequencies (Hz)
1 176.54 Rotor 2 176.54
2 205.84 Rotor 2 205.84
3 275.31 Rotor 1 275.31
4 284.75 Rotor 1 284.75
5 750.68 Rotor 2 750.68
6 767.55 Rotor 1 767.55
7 820.14 Rotor 1 820.14
8 1025.38 Rotor 1 1025.38
9 1088.70 Rotor 1 1088.70
10 1236.60 Rotor 2 1236.60
Table 12-4  Reference Rotor: Rotor2
Reference Rotor: Rotor2
Mode Frequencies (Hz) Source
1 188.47 Rotor 2
2 191.38 Rotor 2
3 268.93 Rotor 1
4 271.68 Rotor 1
5 792.51 Rotor 1
6 797.76 Rotor 1&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction328
Main Index
Complex Frequency Response analysis
MSC Nastran allows the user to specify multiple unbalance loads. These loads can be specified on the same
rotor or on different rotors. Unbalance loads are currently determined based on the reference rotor speed.
Multiple unbalance loads can be specified in the bulk data section in following way:
$ Multiple Unbalance Loads
$ For ROTOR 1
RSPINR   1       9       10      RPM    1.
UNBALNC 10        122.68        41    1.    0.    0.
1.-4       0.0    0.0      0.0     1000.
$ For ROTOR 2
RSPINR  2       21      22        RPM     1.
UNBALNC 10        122.68          26     1.    0.  0.
1.-4       0.0     0.0        0.0     1000.
Note that both the unbalance entries have same ID which is referenced by the DLOAD entry in CASE
Control. Also, the user does not need to specify the rotor ID for unbalance loads explicitly. MSC Nastran
automatically identifies rotor for applying unbalance load based on the grid point specified. Unbalance loads
generated due to above bulk data entries and corresponding displacement is shown in Figure 12-3 and
Figure 12-4, respectively. The results of displacement in Figure 12-4 show peaks at the forward whirl critical
speed for each of the rotor, as obtained earlier in Table 12-2.
For frequency response SYNC analysis, the GRID field of UNBALNC entries should be on the reference
rotor and the non-reference rotors with the same spin speed as the reference rotor. Speed ratio is calculated
based on the ratio of SPTID entry of its RSPINR entry to SPDIT field of its reference rotor RSPINR entry.
A User Fatal Message will be issued if any UNBALNC, which is specified by the DLOAD Case Control
command, is placed on the non-reference rotor with spin ratio not equal to 1.0.
If RLOAD1/RLOAD2 entries are used for rotordynamic frequency response SYNC analysis, the GRID field
of DAREA/DPHASE entries should be on the reference rotor and the rotors with the same spin speed as the
reference rotor for rotordynamic unbalance response. a User Fatal Message will be issued if any
DAREA/DPHASE, which is specified by the DLOAD Case Control command and by DAREA/DPHASE
fields of RLOAD1/RLOAD2, is placed on the non-reference rotor with spin ratio not equal to 1.0.7 1025.38 Rotor 1
8 1088.12 Rotor 2
9 1222.50 Rotor 2
10 1236.66 Rotor 2Table 12-4  Reference Rotor: Rotor2
Reference Rotor: Rotor2
Mode Frequencies (Hz) Source&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P18</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_018/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_018/</guid>
      <description>
        
        
        &lt;p&gt;329 Chapter 12: Multiple Rotors In Fixed System
Introduction
Main Index
Figure 12-3  Unbalance loads on the two rotors
Figure 12-4  Displacement due to unbalance loads (undamped case)
Transient Analysis
MSC Nastran supports transient analysis with multiple rotors operating at different rotor speeds. In this
analysis, no approximation is made for determining the rotor speeds. Multiple unbalance loads or any kind&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction330
Main Index
of external loads can be applied to the rotating or non-rotating components of the model. Changes to be
made in the input file to model multiple rotors are described below.
Case Control Section
In case control, the RYGRO entry is specified. It also includes set of EPOINTS which store force output from
the unbalance loads and variation of rotor speed with time. Output from EPOINTS can be extracted using
SDISP .
RGYRO = 10
TSTEP = 1&lt;br&gt;
SET 99 = 41,26
SET 98 = 92,93,94,95,96,97,98,99
DISP(SORT2,PHASE)=99
OLOAD(SORT2,PHASE)=99
NLLOAD(SORT2,PHASE)=99&lt;br&gt;
SDISP(SORT2) = 98
Bulk Data Section
Rotor speed for each of the rotors can be specified independently through the RSPINT entry. It also includes
the option to define an EPOINT which can be used to save variation of rotor speed with time at each time
step. In this case, EPOINT 95 and 96 are used to save rotor speed information for rotor 1 and rotor 2
respectively.
$ Rotors Relative Spin Rates
RSPINT    1     9      10       FREQ      1      95
TABLED1   1
0.0   0.0   0.005   0.0      .5      400.    1000.     400.
ENDT
RSPINT    2     21      22      FREQ      2      96
TABLED1   2
0.0    0.0   0.005   0.0     .5       800.    1000.     800.
ENDT
Unbalance loads are specified in the similar manner as in the frequency response analysis case. The unbalance
entry ID is same as that specified by RGYRO in case control.
$ Multiple Unbalance Loads
$ Rotor 1&lt;br&gt;
UNBALNC 10              122.68        41        1.       0.       0.
1.-5    0.0      0.0     0.0         1000.
92   93    94
$ Rotor 2
UNBALNC 10              122.68        26        1.       0.       0.
1.-5    0.0      0.0     0.0         1000.
97   98    99
EPOINT   92    93       94     95
EPOINT   96    97       98     99
Results obtained for this model are in Figure 12-5, Figure 12-6 and Figure 12-7. The variation of rotor speed with
time is shown in Figure 12-5. For both the rotors, the rotor speed increases linearly with time till 0.5 seconds
and then it stays constant. Maximum speed for rotor 1 is 400 Hz, whereas for rotor 2, it is 800 Hz. The loads&lt;/p&gt;
&lt;p&gt;331 Chapter 12: Multiple Rotors In Fixed System
Introduction
Main Index
due to unbalance for the rotor speed variation described earlier is shown in Figure 12-6. Here, the loads
increase with square of rotor speed till 0.5 sec and then it stays constant.
Figure 12-5  Variation of rotor speed with time
Figure 12-6  Unbalance Loads on the two rotors
The displacement produced due to unbalance loads is shown in Figure 12-7. For each of the rotor maximum
response is observed when the rotor speed is near the first forward whirl critical speed. For rotor 1, maximum
amplitude is observed at 0.375 sec where the rotor speed is around 290 Hz. Similarly, for the second rotor,
maximum amplitude is observed at 0.137 sec where the rotor speed is around 200 Hz. Both these frequencies
are in the neighborhood of their respective rotor`s first forward whirl critical speed.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction332
Main Index
Figure 12-7  Variation of displacement and rotor speed with time
Examples used in this chapter are available under the following folder:  ../tpl/ugrotor. A brief description of
these examples is given below:
Table 12-5&lt;br&gt;
Input File Name Description
rug_12_1 Real Eigenvalue Analysis for Rotor 2
rug_12_2 Synchronous complex eigenvalue analysis for Rotor 2
rug_12_3 Synchronous complex eigenvalue analysis for model with 2 rotors
rug_12_4 Synchronous complex eigenvalue analysis for model with 2 rotors, at different
speeds
rug_12_5 Synchronous complex eigenvalue analysis for model with 2 rotors, at different
speeds with Rotor 2 as reference rotor
rug_12_6 Complex frequency analysis for model with 2 rotors
rug_12_7 T ransient analysis for model with 2 rotors&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 13: Kinks and Offsets on a Rotor
MSC Nastran Rotordynamics User’s Guide
13 Kinks and Offsets on a Rotor
Introduction      334
User Interface      335
Guidelines and Limitations      340
Examples     341&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction334
Main Index
Introduction
Rotors can have initial deformations, which means that the rotor center axis may not be a straight line. This
can be due to manufacturing defects or thermal effects. The presence of “kinks and offsets”, “bends” or “initial
deformations” in the rotor can result in additional loads on the structure, even for very small deformation.
A new input entry, ROTBENT, has been developed for the analysis of the initially deformed line rotors,
considering both the rotor model and the support structure. This feature is available in SOL 400 for static
analysis, complex eigenvalues and frequency response.
Through the new ROTBENT input, the initial rotor geometry is calculated and a static solution, pulling the
rotor into the support structure, is performed in STEP 1. Subsequent steps will perform the requested
rotordynamic analysis using the static solution from STEP 1 as the starting point.
The ROTBENT entry provides a convenient method to perform rotordynamic analysis of line rotors (1D
rotor) w hich have initial deformations (kinks and offsets).
The ROTBENT entry has the following features:
ROTBENT is available for SOL 400 only.
Model the straight-line rotor using line elements with the axis of rotating at geometric center.
Define rotor via ROTOR entry.
Model any supports and bearings
Define the rotor kinks and offsets using a ROTBENT entry.
Assign LOAD, SPC, MPC sets in the subcase for the initially deformed rotor.
In STEP 1, the program automatically modifies the rotor geometry using the kinks and offsets and
calculates the offsets between the rotor GRID points and those of the support structure. MPC
equations, SPOINTs, SPCs, and SPCD entries are created to &amp;lsquo;pull&amp;rsquo; the rotor and support structure
together at the listed GRID points on the ROTBENT entry.
STEP 1 is nonlinear static (NLSTAT) analysis to obtain rotor static deformation, and the
subsequent STEP is for rotordynamic analysis using the results from STEP 1 .
ROTBENT can process rotor kink and offset information of the defined ideal axisymmetric 1D rotor
through ROTOR entry and ROTBENT case control parameter. In SOL 400, the first step of the analysis
needs to be a NLSTATIC analysis, the following step is the related rotordynamic analysis.
Case Control: ANALYSIS, SPC, MPC, LOAD, ROTBENT:
The ROTBENT case control command selects the ROTBENT entry, which causes the program to process
the rotor kink and offset information and modify the geometry of the defined ideal axisymmetric 1D rotor.
In SOL 400, the first STEP needs to be a STATIC analysis, the following STEP is the subsequent
rotordynamic analysis.
ANALYSIS selects the type of analysis, SPC selects the single point constraint set, MPC selects a multipoint
constraint set, and the LOAD Case Control command in the first STEP must match the LOAD ID in the
ROTBENT entry selected.&lt;/p&gt;
&lt;p&gt;335 Chapter 13: Kinks and Offsets on a Rotor
User Interface
Main Index
The rotor must be defined using the ROTOR entry. In SOL 400, the 1st step of the SUBCASE must have
ANALYSIS=NLSTAT. The following step defines the rotordynamic analysis to be performed after the rotor
and support structure are &amp;lsquo;pulled&amp;rsquo; together.
Format:
ANALYSIS = type
SPC = n
MPC = n
LOAD = n
Examples:
SOL 400
SUBCASE 10
STEP1
ANALYSIS=NLSTAT
LOAD=1
SPC=1
MPC=10
STEP2
ANALYSIS=DCEIG/MCEIG (solution type for the rotordynamic analysis)
SPC=1
MPC=10
Remarks:
1.The load set ID should match the LOAD ID in ROTBENT card entry.
2.Same SPC ID or MPC ID should be used in all steps. Changing the SPC or MPC set between steps
is not supported when a ROTBENT entry is used.
3.Campbell diagram has been extended to SOL400 (ANALYSIS=DCEIG/MCEIG). The case control
(CAMPBELL) and Bulk Data (CAMPBLL) entry are same in SOL 107/110
User Interface
Case Contro l
Specifies rotor the initial deformation (kink and offset) parameters .
Requests bent rotor initial deformation and added constraints, such as SPOINTs, MPCs, SPCs and SPCDs
due to ROTBENT data bulk entryROTBENT (Case) (Case) Specifying rotor initial deformation  and requesting outputs of initial deformation&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Interface336
Main Index
Format:
Example:
ROTBENT = 10
ROTBENT (PRINT)= 10
ROTBENT (PUNCH) = 10
ROTBENT (PRINT, PLOT, PUNCH) = 10
Remark:
1.ROTBENT option is only supported for SOL400 analysis. ROTBENT analysis will require 2 step
analysis, with step 1 being NLSTATIC and step 2 being rotordynamic analysis.
Bulk Data Entry
Format:Describer Meaning
PRINT or (blank)
PUNCH
PLOT&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The .op2 binary database file will be generated with “PARAM,POST , X” (or the POST Case Control
command), while the .h5 binary database file will be generated with “HDF5OUT” entry specified in Bulk
Data Section.  Both .op2 and .h5 file can be created simultaneously. Note .xdb file is being deprecated.
n Identification number in Bulk Data ROTBENT Entry (Integer &amp;gt;0).
ROTBENT (Case) Define kinks and offsets to be applied on a rotor, pull the rotor on to its bearing
and then carry out rotordynamic analysis (SOL 400 only).
1 2 3 4 5 6 7 8 9 10
ROTBENT Bent ID Rotor ID Load ID
Unbcord x1 x2 x3ROTBENTPRINTPUNCH
PLOT    n=
Printer File (.f06) Punch File (.pch) Plot File (.op2/.h5)
X X*
X X*
X*&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;337 Chapter 13: Kinks and Offsets on a Rotor
User Interface
Main Index
Example:Kink Station Kink angle Phase angle
Offset Station Offset
valuePhase angle
Brgdpr Rotor Grid
IDStator Grid
ID
ROTBENT 101 10 99
Unbcord 1.0 0.0 0.0
Kink 30.0 0.06 135.0
Brgdpr 1 111
51 151
81 181
ROTBENT 200 10 1
Offset 3.82 0.001 30.0
15.54 0.002 130.0
28.45 0.003 230.0
38.45 0.004 330.0
Kink 10.35 0.06 45.0
22.02 0.12 145.0
33.45 0.18 245.0
48.45 0.24 345.0
Brgdpr 11 111
17 117
35 135
Unbcord 0.0 -1.0 2.0
Describer Meaning
Bent ID Identification number of ROTBENT. (Integer &amp;gt; 0, required, no default).
Rotor ID Rotor identification number for which the kinks and offsets are defined. See Remark 2., 3.
(Integer &amp;gt; 0, required, no default).
Load ID Load identification number, to be selected by LOAD case control in the first STEP. See
Remark 4. (Integer &amp;gt; 0, required, no default).
Unbcord Components of the vector to determine the X-Y plane of the rotor system for Kinks and
Offsets. See Remark 6. (Real, required, no default).
Kink Flag indicating that the next 3 fields are for kink definition. See Remark 7. (Character,
optional)1 2 3 4 5 6 7 8 9 10&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Interface338
Main Index
Remarks:
1.ROTBENT is supported only in SOL 400 analysis.
2.One ROTBENT entry with unique BENT ID value is allowed. ROTBENT analysis is supported for
only one SUBCASE definition, having 2 STEP analyses. STEP1 analysis should be
NLSTATIC/NLSTAT. STEP 2 analysis runs rotordynamics analysis (complex eigenvalue, frequency
response).
3.ROTBENT only support 1D element rotor defined by ROTOR entry.
4.ROTBENT uses Load ID to perform STEP 1 NLSTATIC analysis.
5.In a ROTBENT bulk data card, the keywords (Kink, Offset, or Brgdpr) can only be defined once.
Multiple rows for each keyword are allowed, except for Unbcord.
6.ROTBENT can take only one set of &amp;lsquo;Unbcord&amp;rsquo; input, with three REAL values. The first 2 grids in
AXIS option of ROTOR entry determine the X-axis of the Rotor system, with origin of this system
to be at the first grid entry in AXIS option. Unbcord entries will form the vector used to determine
the X-Y plane of Rotor system, defined using the CD of the first grid on AXIS option of ROTOR
entry linked to the Rotor ID.Station Location on rotor from ROTOR ID 1st grid along the rotor axis, from where the Kink starts.
(Real, required if kink is specified, no default).
Kink angle Kink angle based on Unbcord defined rotor Z-axis. See Remark 8. (Real, DEG, required if
kink is specified, no default).
Phase
anglePhase angle about the rotor X-axis, based on Unbcord defined rotor X-Y plane. (Real, DEG,
required if kink is specified, no default).
Offset Flag indicating that the next 3 fields are for offset definition. See Remark 7. (Character,
optional)
Station Location on rotor from ROTOR ID 1st grid along the rotor axis, from where the Offset starts.
(Real, required if offset is specified, no default).
Offset
valueOffset value on the axis of the rotor. (Real, required if offset is specified, no default).
Phase
anglePhase angle based on Unbcord defined rotor X-Y plane. (Real, DEG, required if offset is
specified, no default). A phase angle of 0.0 results in an offset in the positive Rotor Y-axis.
Brgdpr Flag indicating that the next 2 fields are for paired grids. See Remark 12. (Character, required).
GRID IDi Paired grids ID to indicate paired connection between rotor and support after initial
deformation. (Integer &amp;gt; 0, required, no default). First grid should be part of ROTOR and
second grid should be part of Stator.Describer Meaning&lt;/p&gt;
&lt;p&gt;339 Chapter 13: Kinks and Offsets on a Rotor
User Interface
Main Index
7.A rectangular coordinate (rotor system) formed in remark 6., is used to determine the phase angle,
which starts from the X-Y plane based on UNBCORD, and the kink angle, which rotates about Z-
axis. In the following figures in the Rotor system, the rotor axis is X, and X-Y plane is determined by
the Unbcord vector.
8.Kink is calculated in the rotor system X-Y plane, where the phase is zero (See Remark 7.), by rotating
the shaft at the station point about Z-axis to the defined kink angle, then the Kink shaft is rotated
about the shaft axis (X) to the defined phase angle from the X-Y plane.
9.Offset is calculated in the rotor X-Y plane, where the phase is zero (See. Remark 7.) then the Offset
is rotated about the shaft axis (X) to the defined phase angle from the X-Y plane and applied to the
rotor.
10. Offsets and Kinks are calculated separately at the shaft axis or the shaft center line. All the Kinks and
Offsets are then accumulated to generate the initial unconstrained rotor geometry. Grid coordinate
of unconstrained rotor will be printed out in f06 file.
11. Brgdpr entry needs at least one pair of existing GRID IDs. First id of the pair of entries of Brgdpr
keyword should be part of referenced rotor and second id should be part of bearing (stator) connected
to the rotor. All the first grid ids of each pair of entry should be added to AXIS option of reference
ROTOR. It is recommended that both grid ids should not be part of any MPC, RBEs definition.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Guidelines and Limitations340
Main Index
12. The initial step (NLSTATIC) updates the rotor geometry, writes the bulk data (program internally
created MPC, SPOINTs, SPC1 &amp;amp; SPCD) entries to pull the rotor into the bearings and runs the
static solution. This static solution step will result in the deformed shape of the model with the rotor
pulled into the bearings. At this point, the rotor and bearing GRIDs of BRGDPR entry are
coincident.
13. It is advised to have both grid entries of Brgdpr keyword to be at the same axial location. A small Kink
angle is assumed (&amp;lt;1 deg) and the deformation in axial direction (axial and angular displacement) of
the rotor grids is ignored.
14. The following figures are the brief description of the Kinks &amp;amp; Offsets in a rotor, where B1 and B2 are
support locations and are paired with rotor grids in Brgdpr keyword.
Guidelines and Limitations
1.ROTBENT entry requires a ROTOR ID pointing to an existing ROTOR entry and only a single
rotor is supported. In addition, ROTORG, ROTORAX is not supported.
2.Currently, although the 3D ROTOR entry is used to define the rotor, ROTBENT only supports a
line rotor, with 1D elements.
3.ROTBENT is available for SOL400 only. STEP 1 analysis should be NLSTATIC &amp;amp; STEP 2 analysis
can be DCEIG/MCEIG/DFREQ/MFREQ only.
4.MPC, SPC, and LOAD case control commands must be provided in the initial
(NLSTAT/NLSTATIC) step to calculate rotor static deformation. It is recommended to also set
PARAM,LGDISP, -1 in the nonlinear static analysis step (ANALYSIS=NLSTATIC) since large
rotation effect is not considered in MPC relationship.
5.User defined SPC can NOT be applied to rotor grids that have been paired by ROTBENT.&lt;/p&gt;
&lt;p&gt;341 Chapter 13: Kinks and Offsets on a Rotor
Examples
Main Index
6.The updated coordinates of ROTOR grids based on kink &amp;amp; offset definition are output to OP2 file
(with PARAM, POST, -1) and can be confirmed with Patran.
Examples
Rotordynamic analysis of a beam rotor with initial deformation defined by ROTBENT is performed in the
examples ( ..\tpl\rotbent\ rotbent01.dat , rotbent02.dat ). The beam rotor is defined by
ROTOR entry:
The supports are three bearings connect to the ground. The other ends are connected to the grids located on
the rotor axial center line, are not connect to the rotor grids directly. These bearing grids are paired with the
rotor grids to pull the initial deformed rotor into the bearing locations.
The initial rotor deformation is defined by ROTBENT entry. In the examples, the rotor axis is X-axis; the X-
Y plane is defined by the rotor axis and the Unbcord vector (0,1,0); the kink rotates about Z-axis. As
mentioned earlier, three paired grids pull the rotor into the bearings.
In SOL 400, the first STEP is NLSTATIC analysis, and the following STEP is the subsequent rotordynamic
analysis. Analysis types, SPCs, MPCs, and LOADs case control commands are chosen in the steps.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples342
Main Index
As mentioned earlier, the rotor&amp;rsquo;s initial geometry due to kinks and offsets is calculated first, and the MPC,
SPC, and SPCD entries are automatically generated to calculate the rotor&amp;rsquo;s final static deformation by pulling
the rotor into the paired bearing locations.
The calculated rotor deformation due to kinks and offsets from STEP1:&lt;/p&gt;
&lt;p&gt;343 Chapter 13: Kinks and Offsets on a Rotor
Examples
Main Index
The Campbell Diagram and unbalance response. Campbell diagram has been extended to SOL 400
(ANALYSIS=DCEIG/MCEIG). The case control (CAMPBELL) and Bulk Data (CAMPBLL) entry are
same as SOL 107/110.
Examples used in this chapter are available under the following folder: ..\tpl\ugrotor . A brief
description of these examples is given below:
Input File Name Description
rotbent01.dat Campbell Diagram
rotbent02.dat Unbalance Response&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Examples344
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Appendix A: Axisymmetric Harmonic Elements for Rotordynamic Analysis
AAxisymmetric Harmonic
Elements for Rotordynamic
Analysis
Introduction      346
Element Details      346&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction346
Main Index
Introduction
In the MSC Nastran 2013.1 release, axisymmetric harmonic elements were introduced for rotordynamic
analysis. For this purpose, two new axisymmetric harmonic elements are developed : CQUADX and
CTRIAX. These are similar to  solid elements since the degrees of freedom are displacements (not rotations).
The CQUADX element has four vertex points and up to four (optional) mid edge points. The CTRIAX
element has three vertex points and up to three (optional) mid edge points. These elements resemble the
existing shell elements available in MSC Nastran (MSC Nastran Reference Guide, 2014) but refer to the
PAXSYMH card to define material properties.
A detailed description about dynamics of rotors and finite element discretization using axisymmetric
harmonic elements is provided in Geradin and Kill (1984) and Stephenson et. al (1989). In this appendix,
additional details related to implementation inside MSC Nastran are provided. The process used for
developing axisymmetric finite element models from an axisymmetric 3 -D solid structure is shown in Finite
element modeling using axisymmetric harmonic elements .
Element Details
Figure 1-1  Finite element modeling using axisymmetric harmonic elements
Axisymmetric harmonic element analysis is performed in a cylindrical coordinate system.  In the following,
“x” is the radial coordinate, “y” is the axial coordinate, and “ θ” is the azimuthal angle in an element coordinate
system. Grid points lie in the (x,y) plane with “x” greater than or equal to zero, as shown in Finite element
modeling using axisymmetric harmonic elements . An error check is performed inside the code to ensure that
the axisymmetric rotor model being analyzed does not violate this requirement.
Let {r, y, θ}T represent the position vector for a grid point in the cylindrical coordinate system (r=radial,
y=axial, and θ=azimuthal). The displacements at a grid point using Fourier coefficients can be written as:
UrnUrnc cos n sin Us
rnsymmetric            a ntisymmetric
+
n0=
=
UynUync cos n sin Us
yn +
n0=
=&lt;/p&gt;
&lt;h1&gt;347 Appendix A: Axisymmetric Harmonic Elements for Rotordynamic Analysis
Element Details
Main Index
where, “ n” is the harmonic index and “ θ” is the azimuthal angle.  In this manner, non-axisymmetric solutions
may be found for axisymmetric structures. For linear analysis, the harmonics are not coupled, and the
harmonic analysis finds the solution for a single specified “ n”. The value for “ n” may be 0, 1, 2, 3, …. For
rotordynamic problems, n = 1  is used for lateral-bending analysis and n = 0  is used for axial/torsion analysis.
The solution variables are not local displacements, but coefficients of either or. For the Ur and Uy
displacements, the coefficients of represent solutions symmetric about the (x,y) plane while the coefficients
of represent solutions anti-symmetric about the (x,y) plane. For n = 0,  and  are used for expansion and  is
used for torsion; is uncoupled from the other two.
For rotordynamic analysis, bending deformation that corresponds to n = 1 is sufficient to capture the
gyroscopic effects. For harmonic n = 1, the simplified equations are:
The strain displacement law for axisymmetric harmonic elements is given by:
This expression is used to determine the stiffness matrix for these elements.
The element displacement vector at each node can be written as: Un sin Us
n nUnc cos–
n0=
=
Ur
Uy
UUrc sin Urs + cos
Uyc sin Uys + cos
 sin Us
Uc
 cos–=
rr
rr

rr
yy
rrdd0 0
0ydd0
1
r&amp;mdash; 01
r&amp;mdash;dd
ydd
rdd0
01
r&amp;mdash;dd
rdd
1
r&amp;mdash;dd0rdd1
r&amp;mdash;–Ur
Uy
U
= =
x UrcUycUs
UrsUysUc
–
   T&lt;/h1&gt;&lt;h1&gt;MSC Nastran Rotordynamics User’s Guide
Element Details348
Main Index
For interpolation, standard Lagrangian shape functions [N] can be used. Using these shape functions, the
displacements can be written as:
where i = number of nodes in the element.
Based on the kinetic energy expression (Geradin and Kill, 1984), the element mass matrix is the following:
The gyroscopic matrix for the element is given by:
where
Each submatrix gi,j is the following: Ur
Uy
U
Nx1
:·
xi&lt;/h1&gt;&lt;p&gt;MNTNVNTNrdrdzd =d
V=
G gr2rdzd=
gg11g12g1n
g21g22g2n
:·:·:·:·
gn1gn2gnn=
gij0 0 0 0 0 0
0 0 0 0 0Nj
y&amp;mdash;&amp;mdash;&amp;ndash;Ni
0 0 0 0Ni
y&amp;mdash;&amp;mdash;&amp;ndash;Nj0
0 0 0 0 0 0
0 0Nj
y&amp;mdash;&amp;mdash;&amp;ndash;– Ni0 0 0
0Ni
y&amp;mdash;&amp;mdash;&amp;ndash;– Nj0 0 0 0=&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P19</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_019/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_019/</guid>
      <description>
        
        
        &lt;p&gt;349 Appendix A: Axisymmetric Harmonic Elements for Rotordynamic Analysis
Element Details
Main Index
The material properties may be isotropic or anisotropic, and they can also be temperature dependent. The
material temperature is assumed to be axisymmetric. If an anisotropic material is used, it is required that the
material be axisymmetric. Material damping is also supported in the analysis.
Constraints/Boundary Conditions
A configuration consisting of the new axisymmetric harmonic elements need not always define a rotating
structure. It could very well define a stationary structure like the casing of an engine or a water tank. A point
is defined to be on the axis of symmetry if its “X” coordinate is less than 1.E-4 from the axis of symmetry (see
Finite element modeling using axisymmetric harmonic elements ). Points on the axis of symmetry require
special constraints to ensure continuity of displacements. These constraints are automatically supplied by the
program. For externally applied forces and thermal loads, it is necessary to be consistent with the convention
used for matrices. The stiffness, mass and gyroscopic matrices are for 2π radians.
The new axisymmetric harmonic elements may share grid points with other spring and damper elements.
However, much care is needed. This connection is made between the harmonic displacement components of
the axisymmetric harmonic elements and the global displacement components of other elements. The usage
of the new connector element RBAX3D to make connections to a 3 -D grid point is recommended.
The new RBAX3D connector helps to connect points of the axisymmetric harmonic elements to regular 3 -
D points on the axis of symmetry. This has only been implemented for harmonic n=1 and n=0.
Multi-point constraints may also be used with axisymmetric harmonic elements. Rigid body elements are
generally not compatible with these elements since rotation degrees of freedom are not used. However, they
can be used for the special case when there are two coincident grid points (no offset).&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Element Details350
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Appendix B: User Defined Subroutines Using CBUSH2D
BUser Defined Subroutines
Using CBUSH2D
Analysis in Windows Machine      352
Analysis on Linux      359&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis in Windows Machine352
Main Index
Analysis in Windows Machine
This appendix describes steps involved in defining a user defined subroutine for usage in CBUSH2D entry.
Steps to modify the external CBUSH2D
1.Copy the implementation folder from the installation directory:
C:\MSC.Software\MSC_Nastran\ ver_num \util_ver \nast\services\Implementations
(Available with standard MSC Nastran download)
To
E:\test_cbush2d
(You can put the implementation folder anywhere you prefer, if you do, modify the commands
appropriately)
2.Also you need to copy the three files SConopts,SConscript,SConstruct  to the same folder as
E:\test_cbush2d
3.Put the buildit.bat into the same location as E:\test_cbush2d
4.Modify the buildit.bat so that the scons is pointing from :
C:\MSC.Software\SDK\ver_num\Tools\sconsi8
(or the correct directory on your computer)T est machine Windows 7 Professional, DELL PRECISION M 4700
Requirements Windows MSC Nastran ver_num  i8 version&lt;br&gt;
SDK folder  in: C:\MSC.Software\SDK\ ver_num&lt;/p&gt;
&lt;h2&gt;353 Appendix B: User Defined Subroutines Using CBUSH2D
Analysis in Windows Machine
Main Index
The following is the contents of buildit.bat&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;the-following-is-the-contents-of-builditbat&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#the-following-is-the-contents-of-builditbat&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h2&gt;setlocal
rem
rem batch file to build a SCA object
rem in order to build,
rem   after unzipping the zip file.
rem   *replace C:\SCA_Example\solver_SDK with the directory you put
the files in and run this file .
rem   if desired, specify different locations for apps_local and
sca_object
rem
C:\MSC.Software\SDK\ ver_num\Tools\sconsi8 % *
APPS_LOCAL=E:\test_cbush2d\sdk\apps_local
SCA_OBJECT=E:\test_cbush2d\sdk
Endlocal&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;endlocal&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#endlocal&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;5.We can now modify the source code:
E:\test_cbush2d\Implementations\Elements\src\cbush2d\ ext_cbush2d.F
Please note that the source file must be in the implementation folder.
6.We can build the object at E:\test_cbush2d
Open a DOS prompt at this location, and type: buildit cbush2d
Therefore we are only creating the object cbush2d at the APPS_LOCAL at
E:\test_cbush2d\sdk\apps_local\WIN8664I8\lib\SCA\MDSolver\Obj\Uds\Elements
You can see the cbush2d.dll  there.  Make sure that the cbush2d.dll has the correct time when you
execute the buildit  script.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis in Windows Machine354
Main Index
7.In order to run MSC Nastran using your dll, it is recommend that you use a bat file to set the SCA
environment variables, and also point to the MSC Nastran exe correctly.
8.The following bat file is used: run_test.bat
set SCA_SERVICE_CATALOG=E:\test_cbush2d\sdk\apps_local\res\SCAServiceCatalog.xml
set SCA_RESOURCE_DIR=E:\test_cbush2d\sdk\apps_local\res
set SCA_LIBRARY_PATH=E:\test_cbush2d\sdk\apps_local\WIN8664I8\lib
set SCA_KERNEL_DEBUG=SvcLoad=all,ShrLibLoad=all,SvcTableDump=all,SvcCatalogDump=all
call nastver_num.exe beam_108_cbush2d old=no scr=yes notify=no
Name of the BAT file: run_test.bat. Make sure that your library path, and the MSC Nastran exe is at the
correct path.
In the DOS prompt you can type: run_test
Modifying ext_cbush2d.F
The information provided in the ELEMUDS is made available to ext_cbush2d.F through the following
arrays:
iarray : for integers
rarray : for real numbers
ciarray: for characters
Output produced by cbush2d routine are:
2x2 stiffness matrix (KXX, KYX, KXY and KYY)
2X2 damping matrix (CXX, CYX, CXY and CYX)
The input variable “freqva” corresponds to the frequency currently being used in the analysis. The code inside
ext_cbush2D.F can be customized to generate 2x2 stiffness and damping matrices for the current frequency
“freqva” using the inputs provided through ELEMUDS.
Example
Spring stiffness that needs to be included in the analysis:
Table 2-1&lt;br&gt;
Frequency(f) KXX KYX KXY KYY
f = 0 3.503e7 8.756e6 8.756e6 3.503e7
0 &amp;lt; f ≤ 45. 3.503e7 8.756e6 8.756e6 3.503e7
45 &amp;lt; f ≤ 85. 4.503e7 7.756e6 7.756e6 4.503e7
85 &amp;lt; f ≤ 115. 5.503e7 6.756e6 6.756e6 5.503e7
f &amp;gt; 115. 6.503e7 5.756e6 5.756e6 6.503e7&lt;/p&gt;
&lt;p&gt;355 Appendix B: User Defined Subroutines Using CBUSH2D
Analysis in Windows Machine
Main Index
CXX=CYX=CXY=CYY=0
Changes required to input test deck and ext_cbush2d.F to obtain this distribution is described below:
a.Changes in input file:
File management statement:
CONNECT SERVICE TESTF &amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.cbush2d&amp;rsquo;
In Bulk data:
CBUSH2D   16  1000    911 912     XY
PBUSH2D   1000   0.0 0.0
ELEMUDS   1000   PBUSH2D    TESTF   cbush2d  FREQ
real   0.0 3.503+7   8.756+6     8.756+6  3.503+7    0.00.0
0.0  0.0 45.4.503+7   7.756+6    7.756+6   4.503+7
0.0 0.00.00.0  85.5.503+7      6.756+6
6.756+6   5.503+7     0.00.00.00.0115.
6.503+7   5.756+6     5.756+6   6.503+7     0.00.00.0
0.0
b.ext_cbush2D.F
subroutine ext_cbush2d(freqva, iarray, rarray, ciarray, kxx, kyx,
&amp;amp;             kxy, kyy, cxx, cyx, cxy, cyy, len_iarray, len_rarray,
&amp;amp;             len_carray, elid, error_code)
implicit none
integer, intent(in)  :: len_iarray, len_rarray, len_carray, elid
integer, intent(out) :: error_code
real,    intent(in)  :: freqva
real(8), intent(out) :: kxx, kyx, kxy, kyy, cxx, cyx, cxy, cyy
integer, intent(in), dimension(len_iarray) :: iarray
real,    intent(in), dimension(len_rarray) :: rarray
integer, intent(in), dimension(len_carray) :: ciarray
character(len=4) :: carray
integer err
integer           :: scaReturn
integer i
integer, external :: printf06
if (len_carray &amp;gt; 0) carray = transfer(ciarray, carray)
err = printf06(&amp;ldquo;hello worldyy&amp;rdquo;)
write(6,&lt;em&gt;) &amp;rsquo;ext_cbush2d top: freqva&amp;rsquo;, freqva
write(6,&lt;/em&gt;) &amp;rsquo;len_iarray, len_rarray&amp;rsquo;,len_iarray,len_rarray
write(6,*) (rarray(i), i=1,len_rarray)
if (freqva.eq.rarray(1)) then
c
c nominal frequency call
c&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis in Windows Machine356
Main Index
scaReturn = printf06(&amp;rsquo;nominal call&amp;rsquo;)
kxx = rarray(2)
kyx = rarray(3)
kxy = rarray(4)
kyy = rarray(5)
cxx = rarray(6)
cyx = rarray(7)
cxy = rarray(8)
cyy = rarray(9)
else if (freqva.le.rarray(10)) then
c     frequency dep call
c
scaReturn = printf06(&amp;lsquo;freq dep call&amp;rsquo;)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  kxx = rarray(2)
  kyx = rarray(3)
  kxy = rarray(4)
  kyy = rarray(5)
  cxx = rarray(6)
  cyx = rarray(7)
  cxy = rarray(8)
  cyy = rarray(9)
  else if (freqva.le.rarray(19)) then
  kxx = rarray(11)
  kyx = rarray(12)
  kxy = rarray(13)
  kyy = rarray(14)
  cxx = rarray(15)
  cyx = rarray(16)
  cxy = rarray(17)
  cyy = rarray(18)
  else if (freqva.le.rarray(28)) then 
  kxx = rarray(20)
  kyx = rarray(21)
  kxy = rarray(22)
  kyy = rarray(23)
  cxx = rarray(24)
  cyx = rarray(25)
  cxy = rarray(26)
  cyy = rarray(27)
  else if (freqva.gt.rarray(28)) then
  kxx = rarray(29)
  kyx = rarray(30)
  kxy = rarray(31)
  kyy = rarray(32)
  cxx = rarray(33)
  cyx = rarray(34)
  cxy = rarray(35)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;357 Appendix B: User Defined Subroutines Using CBUSH2D
Analysis in Windows Machine
Main Index
cyy = rarray(36)   &lt;br&gt;
endif
write(6,&lt;em&gt;) &amp;lsquo;inside EXT_CBUSH2D&amp;rsquo;
write(6,&lt;/em&gt;) &amp;lsquo;Dimensional Stiffness (lb/in):(KXX,KYX,KXY,KYY)&amp;rsquo;
write(6,&amp;rsquo;(ES10.3E1)&amp;rsquo;)KXX,KYX,KXY,KYY
write(6,&lt;em&gt;) &amp;lsquo;Dimensional Damping (lb&lt;/em&gt;s/in):(CXX,CYX,CXY,CYY)&amp;rsquo;
write(6,&amp;rsquo;(ES10.3E1)&amp;rsquo;) CXX,CYX,CXY,CYY
end subroutine ext_cbush2d
Example
In order to verify if the code works as expected, analysis is performed using SOL 107 and SOL 108 and results
obtained are compared with those obtained for a test deck using DMIG entries.
SOL 107
For the SOL 107 analysis, the spring and damping stiffness corresponding to f = 0 Hz are used in the analysis.
Corresponding DMIG entries in beam_107_sync_dmig.dat
DMIG STIF  0 1 1
DMIG STIF 91 1 91 1 3.503+7
91 2 8.756+6
DMIG STIF 91 2 91 1 8.756+6
91 2 3.503+7
Test deck with CBUSH2D used for comparison is: beam_107_sync_cbush2d.dat
Identical results are obtained for critical frequencies using both the decks, as shown below.
SOL 108
Frequency range used for the analysis:
FREQ1  100 30.0  10.0 10
In order to compare the results, four different test cases are used with varying spring stiffnesses set up&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis in Windows Machine358
Main Index
using DMIG entries.
a.Comparison with beam_108_dmig1.f06
Here, results match for 30 and 40 Hz frequencies.
b.Comparison with beam_108_dmig2.f06
Here, results match for 50, 60, 70 and 80 Hz frequencies. Table 2-2&lt;br&gt;
Test Deck KXX KYX KXY KYY
beam_108_dmig1.dat 3.503e7 8.756e6 8.756e6 3.503e7
beam_108_dmig2.dat 4.503e7 7.756e6 7.756e6 4.503e7
beam_108_dmig3.dat 5.503e7 6.756e6 6.756e6 5.503e7
beam_108_dmig4.dat 6.503e7 5.756e6 5.756e6 6.503e7&lt;/p&gt;
&lt;p&gt;359 Appendix B: User Defined Subroutines Using CBUSH2D
Analysis on Linux
Main Index
c.Comparison with beam_108_dmig3.f06
Here, results match for 90, 100 and 110 Hz frequencies.
d.Comparison with beam_108_dmig4.f06
Here, results match for 120 and 130 Hz frequencies.
Analysis on Linux
Requirements:
1.MSC Nastran ver_num  i8 version
2.SDK installation is separate and must be installed. In this example as shown below it is installed in&lt;br&gt;
/scratch/ssp/sdk_ ver_num . Make a note of the Tools Folder. The sconsi8  executable resides here.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis on Linux360
Main Index
Compiling External CBUSH2D
1.Copy the services folder from the MSC Nastran installation directory to a local directory.
This example has copied them to /scratch/ssp/services.
Following shows the MSC Nastran installation where services directory can be found.
Only files pertaining to CBUSH2D under the elements subdirectories need to be present. Others can be
deleted. This will improve the compilation time.
Your directory structure should look similar to images shown below.
Your directory structure should look similar to images shown below.&lt;/p&gt;
&lt;p&gt;361 Appendix B: User Defined Subroutines Using CBUSH2D
Analysis on Linux
Main Index
2.Change over to src directory where the routine is located. (shown in image below.)
3.We can now modify the source code: ext_cbush2d.F
Please leave the source file in this directory. Scons will automatically recognize it and compile/link it
when scons is run in step5.
4.After modifying the routine switch the directory to root level where services are installed. In this
example /scratch/ssp/services is being used.
5.To compile and link the routine to MSC Nastran issue the scons command
For the i8 version:    /scratch/ssp/sdk_ ver_num Tools/sconsi8 &amp;gt; scons.log
This step will go thru and creation of Object and Apps local directories and end with
scons: done building targets.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis on Linux362
Main Index
After the successful build in the services folder other directories would have been created and folder will look
as follows.
Environment variables to this path must be setup prior to the running MSC Nastran .
For mode = i8, libcbush2d.so is available in:
/scratch/ssp/services/ LX8664I8_RHE63/Implementations/Elements/src/cbush2d
6.Following SCA environment variables needs to be set prior to running the MSC Nastran. Depending
on the shell being used following environment variables should be set.
Following is the example using csh.
setenv SCA_SERVICE_CATALOG
/scratch/ssp/services/Apps/res/SCAServiceCatalog.xml
setenv SCA_RESOURCE_DIR /scratch/ssp/services/Apps/res
setenv SCA_LIBRARY_PATH /scratch/ssp/services
/Apps/LX8664I8_RHE63/lib
7.After setting the environmental variables MSC Nastran job can be submitted using following
command .
prod_ver  test_cbush2d old=no scr=yes notify=no mode=i8
Definitions Used in this document
The Rotordynamics guide uses certain definitions to denote installation directories, and product versions of
MSC Nastran.
install_dir The full path to the directory used in the installation
Example: The system RC file is install_dir /conf/nast 20241r c.
prod_ver The Product and Version of  MSC Nastran
Example: For MSC Nastran 2024.1 prod_ver=nast20241
ver_num The version number. For MSC Nastran 2024.1 , this is 20241.
util_ver The version number used for building utilities.&lt;/p&gt;
&lt;p&gt;363 Appendix B: User Defined Subroutines Using CBUSH2D
Analysis on Linux
Main Index
Example: For MSC Nastran 2024.1 util_ver=msc20241
msc_arch The architecture of the platform.
Example: win64i 8 for Windows 64 i 8 version
Example: linux64i8 for Linux 64 i8 version&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Analysis on Linux364
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Nomenclature
MSC Nastran Rotordynamics User’s Guide Rotordynamics User’s Guide
Nomenclature&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide 366
Main Index
[B] Damping in the model
[BS] Damping due to non-rotating portion of the model (Stator Damping)
[BR] Damping due to rotating portion of the model (Rotor Damping)
[BHR] Hybrid damping for the rotor
[BHS] Hybrid damping for the stato r
Circulation matrix due to [BR ]
Circulation matrix due to [BHR]
[DR] Viscous damping matrix in the rotating system
{FR} External force vector in rotating coordinate system.
{FS} External force vector in fixed coordinate system
[K] Stiffness matrix for the model
[Kc]R Circulation terms due to damping in rotating components
[Kc]S Circulation terms due to damping in fixed components
[KS] Stiffness of the non-rotating portion of the model
[KG] Differential Stiffness due to axial centrifugal load
[KHS] Hybrid structural damping for stator
[K4R] Material damping for the rotor part
[KHR] Hybrid damping for the rotor par t
Circulation matrix due to Rayleigh damping for rotor s
Circulation matrix due to structural damping for rotor s
Circulation matrix due to structural damping for rotor s
[M] T otal mass matrix for the model
[MS] Mass matrix for the stator portion
[MR] Mass matrix for the rotor
[G] Gyroscopic matrix for the rotor
[T] T ransformation matrix from fixed to rotating coordinate system
[Z] Centrifugal softening matrixBRC
BHRC
1MRC2KRC +
GR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRC
1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RC&lt;/p&gt;
&lt;p&gt;367 Nomenclature
Main Index
D Dissipative energy
G Structural damping parameters for stator
GR Structural damping parameters for rotor
g Damping Coefficient
g(ω) Complex frequency response
i
{ga(p)} Modeshape corresponding to complex eigenvalue p
L Lagrange&lt;code&gt;s Potential Id, Ip Diametral and polar moment of inertia N(t) Nonlinear forces due to bearing elements p Complex eigenvalue U System&lt;/code&gt;s Potential Energy
W Work done by non-dissipative forces
W3, W4, WH Parameters for converting structural damping to equivalent viscous damping for
stator
WR3, WR4, WRH Parameters for converting structural damping to equivalent viscous damping for
rotors
u,v T ranslational velocities in the fixed system in X and Y direction
α, β Parameters determined by a least-mean-square fit of the relative rotor speeds
input on the RSPINR between SPDLOW and SPDHIGH of the reference rotor
α1, α2 Rayleigh Damping Parameters for stator
α1R, α2R Rayleigh Damping Parameters for rotor
Ω Rotor Operating Speed
Rotation and angular velocity about Z axis in the fixed frame
Rotation and angular velocity about X axis in the fixed frame
Rotation and angular velocity about Y axis in the fixed frame
The instantaneous angular velocities about the , and  (Rotating
coordinate system)1–
·
·
·
xyz XY Z&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide 368
Main Index
Derivative with respect to time
Variable defined in rotating coordinate system·
&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P2</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_002/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_002/</guid>
      <description>
        
        
        &lt;p&gt;9 Preface
Technical Support
Main Index
You may find any of these documents from Hexagon at:
&lt;a href=&#34;https://simcompanion.hexagon.com/customers/s/article/MSC-Nastran-Support-Home-Page&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://simcompanion.hexagon.com/customers/s/article/MSC-Nastran-Support-Home-Page&lt;/a&gt;
Technical Support
For technical support phone numbers and contact information, please visit:
&lt;a href=&#34;https://simcompanion.hexagon.com/customers/s/article/support-contact-information-kb8019304&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://simcompanion.hexagon.com/customers/s/article/support-contact-information-kb8019304&lt;/a&gt;
Support Center (h ttp://simcompanion.hexagon. com)
The SimCompanion link above gives you access to the wealth of resources for Hexagon p roducts. Here you
will find product and support contact information, product documentations, knowledge base articles,
product error list, knowledge base articles, and SimAcademy Webinars. It is a searchable database which
allows you to find articles relevant to your inquiry. Valid customer entitlement and login is required to access
the database and documents. It is a single sign-on that gives you access to product documentation for
complete list of products from Hexagon,  allows you to manage your support cases, and participate in our
discussion forums.
Training and Internet Resources
The Hexagon corporate site has the information on the latest events, products, and services for the
CAD/CAE/CAM marketplace.
Design and Engineering e-Learning
The above link will point you to schedule and description of seminars. Following courses are recommended
for beginning MSC Nastran users.
NAS122 - Basic Dynamic Analysis using MSC Nastran and Patran
The course covers a wide range of dynamic analysis topics from basic to advanced using an integrated
approach. Patran is used for data set up and postprocessing and MSC Nastran is used for the solver. Many
unique practical hints and tips are given which do not exist in other material. Case studies are used in each
topic to help understand the physics and engineering behind the techniques in a practical way. A
comprehensive set of over 20 fully detailed student workshops is used to obtain real &amp;ldquo;hands on&amp;rdquo; experience.
A strong emphasis is placed on engineering process so that the student can rapidly relate the course to his or
her project needs.
NAS127 - Rotordynamic Analysis using MSC Nastran
This course covers rotordynamic analysis for coupled rotating and stationary components like jet engines,
turbines, compressors, energy storage devices, etc. This course provides details for:
How to setup and analyze structural models with one or more rotating componentsSuperelements and Modules
Thermal Analysis
User Defined Services&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Training and Internet Resources10
Main Index
The types of analysis supported by the rotordynamics capability
Static analysis
Complex eigenvalue analysis (modal and direct)
Frequency response (modal and direct) and nonlinear frequency response
Transient response (direct linear and nonlinear)
Damping effects and input methods for models with rotating components
How to use Patran to create models and display results with animation or graphs
There are two sets of workshops for this course. One set uses Patran as the pre and postprocessor. The other
directly edits the MSC Nastran input file.&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 1: Introduction
MSC Nastran Rotordynamics User’s Guide
1 Introduction
Introduction to Rotordynamics      12
Basic Concepts of Rotordynamics      13
Overview of MSC Nastran Rotordynamics      22&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction to Rotordynamics12
Main Index
Introduction to Rotordynamics
Rotordynamics is that branch of system dynamics dealing with mechanical devices in which at least one part,
usually defined as a rotor, rotates with significant angular momentum (Genta, 2007). Rotating systems have
been around for many centuries, and a broad historical perspective of this subject is provided in a book by
Rao (Rao, 2011)
Rotating machines represent large class of machinery used in industrial applications; for example, power
stations, marine propulsion systems, aircraft engines, machine tools, transportation systems, and various
other purposes. Rotors equipped with bladed disks or impellers, rotating at high speeds in a fluid
environment allow rotating machines to produce, absorb, transform, or condition an amazing amount of
energy often in comparatively small, compact packages. The safe and sound operation of such rotating
machinery is of paramount importance. Every rotating machine consists of three principal components: the
rotor, the bearings, and their support structure. The rotor is connected to the support structure by means of
bearings, which may be of several types.
Of all the dynamic problems associated with rotating machinery, excessive vibration and instability  are very
important, and the endeavor of the designer is to restrict the vibration of such systems as much as possible
and to increase the zone of stable operation. These problems unless avoided, lead to excessive vibration, wear,
operational difficulties, or even catastrophic failures. All three important modes of vibrations (lateral,
torsional, and axial modes) may be present during rotor operation. Among these modes, the lateral modes of
the rotor are of great concern, as they represent the lowest modes in most of the cases.
Need for Rotordynamic analysis
Rotordynamics is different from structural vibrations analysis because of gyroscopic moments, cross-coupled
forces, and the possibility of whirling instability (Vance, 2010). The power density in a rotating machine
strongly affects its rotordynamics. In the 1920s, the turbine industry designed machines to operate at
substantially higher loads and at speeds above the lowest critical speed, and this introduced  modern
Rotordynamics problems.
In designing, operating, and troubleshooting rotating machinery, rotordynamics analysis can help accomplish
the following objectives:
Predict critical speeds .
Determine design modifications to change critical speeds .
Predict natural frequencies of torsional vibration.
Calculate balance correction masses and locations from measured vibration data. (not currently
supported in MSC Nastran)
Predict amplitudes of synchronous vibration caused by rotor imbalance. (using frequency response
or transient analysis)
Predict frequency or transient response to externally applied synchronous/asynchronous force.
Predict threshold speeds and vibration frequencies for dynamic instability.
Determine design modifications to suppress dynamic instabilities.
Study effect of external features like rub/friction/aerodynamics .&lt;/p&gt;
&lt;p&gt;13 Chapter 1: Introduction
Basic Concepts of Rotordynamics
Main Index
Sources of Vibration
A rotor can vibrate in three ways: axially, torsionally and laterally. Lateral vibrations cause displacements of
the rotor: normal to the axis of rotation. These lateral motions combine to produce an orbital motion of the
rotor in a plane perpendicular to its axis of rotation. Rotor lateral vibration is usually the largest component
of vibration in most high-speed machinery. Excessive lateral vibration can cause damage to both bearings and
support structure.
Rotor unbalance is the first and best known contributing factor to vibration of a rotor. When the rotor mass
center line does not coincide with its rotational axis, then mass unbalanced inertia related rotating forces
occur. As this rotates together with the rotor and is oriented perpendicular to the rotational axis, the
unbalance excites the lateral vibration modes. Higher speeds cause much greater centripetal forces due to
imbalances, which are a function of the square of the operating frequency. The forces are usually periodic,
and therefore, produce periodic displacements observed as vibration (Vance, 2010).
The frequency of the vibration response corresponds to the frequency of the excitation force. The frequency
of unbalance response is the same as the rotational speed; thus, the unbalance related synchronous lateral
vibrations are referred to as 1 X vibrations. When the rotor system is nonlinear, more frequency components
may be excited. The corresponding frequencies usually represent multiples of the excitation frequency,
superharmonics (2 X, 3 X, and so on) and subharmonics(1/2 X, 1/3 X and so on). Another class of excitations
are “free vibrations” or “transient vibrations”, which occur when the system is excited by a short duration
impact. There also exists a third category, self-excited vibrations. These vibrations are sustained by a constant
source of energy, which may be external or internal.
Basic Concepts of Rotordynamics
Figure 1-1  Simplified Jeffcott Rotor&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Basic Concepts of Rotordynamics14
Main Index
Many of the concepts of rotordynamics can be explained using a simplified Jeffcott rotor (Jeffcott, 1919) as
shown in Figure 1-1. Consider a massless bar attached to springs and dampers at its ends A and B. The bar is
rotating about the Z axis oriented along its length. The X and Y axes represent lateral bending directions. A
disk with finite mass and inertia is attached to the bar at the center. The rotating bar is supported at the ends
by bearings which are modeled using linear springs and dampers. Various terms used in Figure 1-1 are
described here:
Reference frame
A rotordynamic problem can be analyzed either in a fixed (inertial) reference frame or in a rotating coordinate
reference frame. Depending upon the symmetry present in the rotor and stator, an appropriate reference
frame can be selected for analysis to obtain time-independent equations of motion. When the rotor, bearings,
and support structure contain asymmetry, then the resulting equations contain time-dependent parameters
independent of the reference frame employed for analysis.
Figure 1-2  Fixed and Rotating Coordinate System
The general transformation of a time-dependent vector from a stationary coordinate system to a rotating
coordinate system at the same origin rotating at rad/sec may be written as
Where:KXR and KYR Bending stiffness of the bar in the X and Y directions, respectively.
KXA and KYA Bending stiffness of the bearing at end A in the X and Y directions, respectively.
KXB and KYB Bending stiffness of the bearing at end B in the X and Y directions, respectively.
CXA and CYA Damping coefficients of the bearing at end A in the X and Y directions, respectively.
CXB and CYB Damping coefficients of the bearing at end B in the X and Y directions, respectively.
m Mass of the disk.
IP, IdX, IdY Polar and diametral moment of inertia for the disk .
vpt Ttvpt =&lt;/p&gt;
&lt;p&gt;15 Chapter 1: Introduction
Basic Concepts of Rotordynamics
Main Index
Transformation from fixed to rotating coordinate system is given by:
The key differences between the analysis in a fixed system and the analysis in a rotating system are given
below:
Rotor Symmetry
In order to determine whether to perform the analysis in fixed or rotating reference frames, it is important to
understand if the rotor and support structure are symmetric or not. For the simplified Jeffcott rotor shown
in Figure 1-1
The rotor is considered to be symmetric if all of the following conditions are met:
KXR = KYR
IdX   =  IdY
And the stator is considered to be symmetric if all of the following conditions are met:
KXA = KYA
CXA = CYA
KXB = KYB
CXB = CYB=rotating coordinate system definition of time -dependent vector.
=time-dependent transformation matrix from rotating to stationary system.
=stationary coordinate system definition of time-dependent vector.
Table 1-1  Difference between Analysis in Fixed and Rotating System
Fixed System Analysis Rotating System Analysis
Rotating part of the structure must be axisymmetric
about the spin axis.Rotating structure need not be axisymmetric
about the spin axis.
Rotating structure can be connected to a stationary
structure in the analysis model.Only symmetric non-rotating structure is
included in the analysis.
Supports more than one rotating structure spinning at
different rotation speeds about different axes of
rotation.Supports only a single rotating structure.
Can be used to generate Campbell diagrams for
computing rotor critical speeds. Campbell diagrams are not directly  applicable for
computing critical speeds.vpt
Tt
vpt
vptt cost sin 0
t sin– t cos 0
0 0 1vpt =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Basic Concepts of Rotordynamics16
Main Index
In order to work with time-independent mass, stiffness and damping matrices in the equations of motion,
the following conditions must be satisfied.
Table 1-2 provides summary with regard to reference frame that can be used for the analysis, depending on the
symmetry in rotor and stator, in order to obtain time-independent system of equations. In Case 1, both the
rotor and stator portion of the model are symmetric and the analysis can be performed in any reference frame.
If the rotor is symmetric and the supporting structure is asymmetric, the analysis can be performed in fixed
reference frame only (most common scenario). In case the rotor is asymmetric and the stator is symmetric,
the analysis can be performed in rotating reference frame only. And finally, if both the rotor and stator are
asymmetric, it is not possible to obtained time-independent  system of equations. This analysis is currently
not supported in MSC Nastran.
Rotor Unbalance
As mentioned earlier, rotor unbalance is the first and best known method contributing to vibration of a rotor.
When the rotor mass center line does not coincide with its rotational axis, then mass unbalanced inertia
related rotating forces occur. As this rotates together with the rotor and is oriented perpendicular to the
rotational axis, the unbalance acts in lateral vibration mode. Higher speeds cause much greater centripetal
forces due to imbalances, which is a function of the square of the operating frequency. The frequency of the
vibration response corresponds to the frequency of the excitation force. The frequency of unbalance response
will be the same as the rotational speed; thus the unbalance related synchronous lateral vibrations are referred
to as 1 X vibrations. Residual unbalance can occur due to various causes such as manufacturing error, thermal
deformation, material inhomogeneity, wear, and corrosion. Unbalance can also occur due to a stack up of
tolerance in assembly.
Whirl of Simple Rotor
A planar motion of a rotor is called a whirling motion or a whirl. Understanding the whirling phenomena of
rotors is essential for a deep insight into the physics of rotating machinery. The simple model considered here
is directly applicable to practical rotor problems observed in the real world and the equations of motion
governing the simple model can be easily understood.
The analysis presented here uses the Jeffcott rotor shown in Figure 1-1, the simplest rotor model. The Jeffcott
rotor model is allowed to vibrate simultaneously in both directions (vertical and horizontal) producing a whirl
orbit. The Jeffcott rotor undergoing whirl motion is shown in Figure 1-3. The front view of the rotor model
is also shown where a reference point P on the disk circumference is highlighted. The rotor disk assembly is Table 1-2  Analysis Reference Frame
Reference Case Rotor Symmetry Stator Symmetric Analysis Frame
Case 1 Symmetric Symmetric Fixed/Rotating
Case 2 Symmetric Not Symmetric Fixed Only
Case 3 Not Symmetric Symmetric Rotating Only
Case 4 Not Symmetric Not Symmetric NA&lt;/p&gt;
&lt;p&gt;17 Chapter 1: Introduction
Basic Concepts of Rotordynamics
Main Index
spinning in the anti-clockwise direction with a fixed angular velocity. Depending upon the applied force, two
different whirl modes are possible: forward and backward whirl. As shown in Figure 1-4, in the case of forward
whirl motion, the rotor assembly whirls in the same direction as the applied angular velocity. Whereas in the
case of backward whirl motion, the rotor whirl direction is opposite to that of the applied angular velocity.
Figure 1-3  Whirl orbit for rotor
Figure 1-4  Forward and backward whirl direction
Stability
Whirl frequencies are important in determining rotor stability. Although the whirling motion may not be at
the rotational speed, whirl modes may be unstable due to internal rotor damping or external forces due to
bearing and seals. Estimating the stability of the whirl modes is important to ensure that a system operates
smoothly.
The eigenvalues of the system appear in complex conjugate pairs in the form
p =  i&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Basic Concepts of Rotordynamics18
Main Index
where α is the damping exponent (rate of growth or decay of the modal response) and ω is the damped natural
frequency. An eigenvector, or a mode shape, corresponding to every eigenvalue can be computed. The mode
shapes also appear in complex conjugate pairs. Each complex mode represents a time-dependent curve in
space representing the rotor deformation at the corresponding whirling frequency.
System stability is investigated by checking that all eigenvalues have negative real parts; i.e., all roots of the
system characteristic equation lie in the left-hand side of the p-plane (plot with α on the x-axis and ω on the
y-axis). By varying some parameter in the rotor model, such as the rotor spin speed or the damping coefficient
at one of the bearings and computing the eigenvalues at the different parameter values, stability analysis can
be performed with respect to that parameter using a root locus plot.
Asynchronous Analysis
Calculation of response with the rotors spinning at set speeds is performed using the asynchronous option.
The user specifies the rotor speeds, the gyroscopic terms are determined and added to the equation of motion,
and the response is determined.
Synchronous Analysis
Calculation of frequency response with the excitation synchronous with the reference rotor is performed
using the synchronous option. The user specifies the rotor speed range, the gyroscopic terms are determined
for each frequency and added to the equation of motion, and the response is determined. If complex
eigenvalue analysis is performed with the “synchronous” option, the critical frequencies of the model are
obtained as output.
Campbell Diagram
For whirl frequencies analysis, the rotational speeds are specified as input, and the whirl frequencies are
computed at those speeds. Typically, a series of analyses at different rotor speeds is performed in complex or
modal complex eigenvalue solutions. It is common practice to plot the whirl frequencies versus the rotational
speed of the rotor as shown in  Figure 1-5. This plot is called a Campbell diagram. Whirl frequencies for each
mode at different rotor speeds are connected to form a series of lines that represent the natural frequency
curves.&lt;/p&gt;
&lt;p&gt;19 Chapter 1: Introduction
Basic Concepts of Rotordynamics
Main Index
Figure 1-5  Campbell diagram for a Rotor
Mode Tracking
For Campbell diagram plotting, it is often observed that two modes may switch order depending upon their
dependence on rotor speed, as shown in Figure 1-6(a). This may lead to confusion while analyzing modes at
higher rotor speeds. In order to avoid this, a mode tracking algorithm is required which tracks the mode shape
for each eigenfrequency. Results obtained after using a mode tracking algorithm are shown in Figure 1-6(b).
Most of the mode tracking algorithms make use of orthogonality conditions. A robust approach for mode
tracking is currently under development and will be included in future version of MSC Nastran.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Basic Concepts of Rotordynamics20
Main Index
Figure 1-6  Mode Tracking for Campbell Diagram
Critical Speed
Critical speeds are commonly defined as the rotational speeds at which vibration due to rotor unbalance is a
local maximum. Since rotor unbalance always produces a synchronous whirling, large amplitudes of&lt;br&gt;
synchronous vibration usually indicate a rotor unbalance problem. However, not all unbalance responses at
critical speeds are dangerous. There can be other rotational speeds at which subsynchronous or
supersynchronous excitation sources can produce large destructive vibration; these are called subsynchronous
and supersynchronous critical speeds.
Campbell diagrams can be used to determine the rotor critical speeds, as shown in Figure 1-7. A critical speed
of a rotor system is defined as a rotational speed of the system when a multiple of that speed coincides with
one of the system&amp;rsquo;s natural frequencies. Excitation due to unbalance is usually synchronous; i.e. the rotational
speed of the rotor is equal to one of the natural frequencies. Excitation of superharmonics or subharmonics
occurs at rotational speeds that are multiples or fractions of these frequencies, respectively. One approach for
determining critical speeds is to simply generate the Campbell diagram, include all excitation frequency lines
of interest, and graphically find the intersection between the excitation line and the natural frequency curves
to define the critical speed associated with that excitation.&lt;/p&gt;
&lt;p&gt;21 Chapter 1: Introduction
Basic Concepts of Rotordynamics
Main Index
Figure 1-7  Critical Speed for a Rotor
Torsional Vibration
Individual turbomachinery rotors are generally stiff enough in torsion to put their natural frequencies of
torsional vibration above the range of most torsional excitations. (Vance, 2010)
Key differences between lateral rotor vibration and torsional vibration are listed here:
Lateral vibration is easily detected through standard instrumentation or through vibrations
transmitted to housings and foundations. Also, large amplitudes of lateral vibration are often noticed
due to rubbing of rotating seals and process wheels. On the other hand, instrumentation for
torsional vibration is not usually installed, and large amplitudes can occur silently and without much
effect on housings and foundations.
Natural frequencies of lateral vibration are influenced by rotating speed, whereas natural frequencies
of torsional vibration are independent of rotating speed and can be measured with the machine at
rest if excitation can be provided.
Lateral vibration in rotating machines can become unstable; this is very rare for torsional vibration in
machines without speed control feedback.
The most common excitation of lateral vibration is synchronous (1 X) from rotor imbalance. Rotor
imbalance has no effect on torsional vibration, except indirectly in machines with gears where the
lateral vibration produces dynamic torque.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Overview of MSC Nastran Rotordynamics22
Main Index
Overview of MSC Nastran Rotordynamics
The rotordynamics capability provides users with a relatively simple method of performing the design and
analysis of structures with rotating components. The procedures were developed with input from aircraft
engine manufacturers to ensure that their basic requirements were met. The rotordynamic capability in MSC
Nastran can be used in frequency response (direct and modal), complex modes (direct and modal), static,
nonlinear transient, and linear transient (direct only) analyses.
Frequency response analyses determine the rotor/support response to arbitrary excitation with the rotors
spinning at user specified rates or excitation that is synchronous with the reference rotor. The asynchronous
calculation determines the response of the system to an external input that is independent of the rotor speed.
The synchronous calculation determines the system response to a rotor imbalance or other excitation that is
dependent on the rotor spin rate.
Complex modes analyses determine the whirl frequencies and critical speeds. Whirl modes are modes of a
rotor/support system with the rotors spinning at specified rates. Critical speeds are whirl frequencies that
coincide with a rotor spin rate. Calculation of whirl frequencies is performed by the asynchronous option
(ASYNC). Calculation of critical speeds is performed by the synchronous option (SYNC).
Static analysis determines, for example, the loads on the rotor due to pitch or yaw of an aircraft. Severe
transverse rotations may be part of the design environment and limiting rotor motion to prevent rotor blades
from rubbing against the interior of the casing may be design criteria.
Direct linear and nonlinear transient analyses allow simulation of engine blade-out and subsequent
windmilling. The analysis is used to ensure structural integrity during flight and guarantee that excessive
vibration levels are not reached.
In rotordynamics analyses, very often bearing and dampers exhibit nonlinear behavior. If these were to be
analyzed accurately using transient analysis, it may require significant computational time. For these kind of
problems, where the model shows mild nonlinearity, nonlinear frequency response analysis can be performed
to approximately account for the presence of nonlinearity. This kind of approach is very helpful in the initial
design cycle.
When the problem is being analyzed in the fixed reference frame, the rotating part of the model needs to be
symmetric about the axis of rotation. In case the rotor being analyzed is NOT symmetric, then the problem
needs to be solved in the rotating reference frame. However, in this case, the nonrotating portion needs to be
symmetric in order to obtain equations of motion with constant coefficients.
With the enhanced 3D Rotordynamics capability, although it might take more computational time with 3D
shell/solid elements to model the 3D rotor(s), it is much easy to capture the exact geometry without special
modeling constraints or efforts, which would greatly reduce the time for model preparation. The 3D
modelling capability also provides more information about the model by capturing the local deformation
modes. For simpler, symmetric and uniform models usage of 1D beam/bar elements is encouraged since they
provide significant advantage in computational time. The use of axisymmetric harmonic elements is
recommended when the rotor is symmetric and it includes tapered/Nonuniform sections.
All the above analyses can be performed in the stationary (inertial) coordinate system with the assumption
that the rotors have rotational symmetry or in a rotating coordinate system with the assumption that the
stator has rotational symmetry.&lt;/p&gt;
&lt;p&gt;23 Chapter 1: Introduction
Overview of MSC Nastran Rotordynamics
Main Index
Benefits
Traditionally, companies have used proprietary in-house codes and customized DMAP solutions to perform
analyzes of structures with rotating components. The rotordynamics capability in MSC Nastran provides an
easy-to-use standardized procedure for analyzing rotating structures. The rotordynamics capability is
included in the standard MSC Nastran solution sequences, and invoked using case control commands and
bulk data entries. This standardization allows easier exchange of model data between in-house groups or
external vendors.
The design of the rotordynamics capability allows multiple rotors to be included in the analyses. The rotors
may spin at different rates and be aligned at arbitrary angles.&lt;br&gt;
MSC Nastran rotordynamics supports analysis using 1-D elements, axisymmetric harmonic elements and 3-
D solid and shell elements in fixed and rotating reference frames. Based on the complexity of the model and
required fidelity, the user can select the appropriate modeling techniques.
The enhanced external superelement (SE) capability introduced in MSC Nastran 2014 allows the user to
have multiple rotors in multiple external SEs as well as in the residual and to employ them to form complete
rotordynamic configurations in subsequent assembly jobs for performing specific types of analysis similar to
complex eigenvalue analysis or frequency or transient response analysis. This feature also provides the
capability for handling and managing external SEs that are geometrically identical by copying and
moving/mirroring a primary external SE to generate secondary external SEs. This can greatly enhance user
convenience and productivity by eliminating the need to model geometrically identical external SEs
individually.
There are benefits of different types of modeling, for example, with the enhanced 3D Rotordynamics
capability, although it might take more computational time with 3D shell/solid elements to model the 3D
rotor(s), it is much easy to capture the exact geometry without special modeling constraints or efforts, which
would greatly reduce the time for model preparation, and the results are more accurate .&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Overview of MSC Nastran Rotordynamics24
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 2: Theoretical Formulation
MSC Nastran Rotordynamics User’s Guide
2 Theoretical Formulation
Equations of Motion      26
Equations of Motion in Fixed Reference Frame      27
Equation of Motion in Rotating Reference Frame      31&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equations of Motion26
Main Index
Equations of Motion
Important features of a rotordynamic analysis can be explained using the simplified Jeffcott rotor model
introduced in the previous chapter. A front view of the same rotor is shown in Figure 2-1 and will be used in
the rest of the chapter to generate equations of motion in both the fixed and rotating coordinate systems.
Figure 2-1  Simplified Jeffcott Rotor
Assumptions:
1.Disk is rigid
2.Bar is massless
3.Linear spring support
4.Damping is neglected in the analysis
5.Rotor is spinning at constant speed Ω about the Z axis.
Equations of motions are obtained using Lagrange&lt;code&gt;s principle in both fixed and rotating coordinate systems.  The general form of Lagrange&lt;/code&gt;s equation is given by:
where i = 1,2,3,…n
In the above equation, L is the Lagrange potential and is given by:
L = EK - U
where, EK is the kinetic energy, U is the potential energy, D is the dissipative energy and W is the work done
by non dissipative forces and { g} is the vector of generalized coordinates.
If the potential energy of the system is not dependent on time (true for most linear analyses), the above
expression can be simplified to:
where i = 1,2,3,…n
tdd
g·iL

giL–g·iD+giW=
tdd
g·iEk

giEk–giU
g·iD+ +giW=&lt;/p&gt;
&lt;h1&gt;27 Chapter 2: Theoretical Formulation
Equations of Motion in Fixed Reference Frame
Main Index
Equations of Motion in Fixed Reference Frame
For rotating components of a model, it is important to include the effect of gyroscopic couples. The
simplified Jeffcott rotor shown in Figure 2-1 has four degrees of freedom (DOF) for lateral or transverse
vibration analysis. These DOFs are transverse displacements “u” and “v” in the X and Y direction respectively
and rotations “ ” about the X-axis and “ ” about the Y-axis. The equations of motion are derived based on
small displacements and rotations of the rotor from its equilibrium location.
For this simplified model, the kinetic energy of the disk with respect to axes fixed in space is
The kinetic energy due to the rotation of the disk is given by:
where, ,  and  are the instantaneous angular velocities about ,  and  which rotate with the
disk as shown in Figure 1-2 and, Ip and Id are polar and dimeteric moment of inertias, respectively.
The instantaneous angular velocity of the disk, with respect to axes fixed in space, is  about the X-axis and
about the Y-axis.
Making use of the transformation matrices, angular velocities in a frame fixed to the rotor can be written as:
Substituting in the above expression, the total kinetic energy is then given by,
Assuming rotations are small, this expression can be simplified to:
If the local coordinates are arranged in vector form , then the inertial terms from
Lagrange’s equation are given by:EK11
2&amp;mdash;mu·2v·2+ =
EK21
2&amp;mdash;Idx2y2+ 1
2&amp;mdash;Ipz2+ =
xyz XY Z
·
·
x
y
z·cos·sincos +
-·sin·coscos +
·sin –      &lt;/h1&gt;&lt;p&gt;EK1
2&amp;mdash;mu·2v·2+1
2&amp;mdash;Id·2·2cos2 + 1
2&amp;mdash;Id22·sin – ·2sin2 +   + + =
EK1
2&amp;mdash;mu·2v·2+1
2&amp;mdash;Id·2·2+1
2&amp;mdash;Id22· –  + + =
g uv T=&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equations of Motion in Fixed Reference Frame28
Main Index
Next, the expression for strain energy is determined based on the generalized coordinates described
previously. Since the disk and bar are assumed to be rigid in the analysis, displacements at the ends in terms
of generalized coordinates  are given as:
At end A in X direction:
At end A in Y direction:&lt;br&gt;
At end B in X direction:
At end B in Y direction:
Potential energy for deformation of the springs at the end is given by:
Contribution from potential energy to Lagrange’s equation is given by:
Thus, the equation of motion in a fixed reference frame without damping can be written as: tdd
g·iEk

giEk–m000
0m00
00Id0
000Idu··
v··
··
··
0000
0000
000I–p
00Ip0u·
v·
·
·&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;=
tdd
g·iEk

giEk– Mg··Gg· + =
uv 
ua–
va+
ub+
vb–
U1
2&amp;mdash;KXAua–21
2&amp;mdash;KYAva+21
2&amp;mdash;KXBub+21
2&amp;mdash;KYBva–2+ + + =
gUKXAKXB+ 0 0 -aKXAbKXB+
0 KYAKYB+ aKYAbKYB– 0
0 aKYAbKYB– a2KYAb2KYB+ 0
-aKXAbKXB+ 0 0 a2KXAb2KXB+u
v


=
gUKg =
Mg··Gg· Kg + + F =&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P20</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_020/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_020/</guid>
      <description>
        
        
        &lt;p&gt;Main Index
Glossary
Glossary&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide 370
Main Index
Asynchronous Analysis Analysis where the rotor speed is specified by the user and independent of
frequency of excitation of eigenfrequency.
Axisymmetric harmonic
elementsElements defined using Fourier coefficients for rotordynamic analysis, mostly
analyzed with harmonic index = 1 for lateral bending.
Campbell Diagram Plot that shows the variation of whirl frequencies with rotor speed.
Centrifugal Softening Reduction in bending stiffness observed when the problem is solved in a
rotating reference frame. It is proportional to the square of rotor speed.
Circulatory matrix Skew symmetric matrix proportional to rotor speed generated when the
damping defined in a rotating reference frame is transferred to a fixed reference
frame and vice versa, added to stiffness matrix [K].
Coriolis Matrix Skew symmetric matrix proportional to rotational speed for analysis in a
rotating reference frame, added to damping matrix [B].
Critical Speed Rotational speeds at which vibration due to rotor unbalance is a local
maximum.
It can also be defined as a rotational speed of the system when a multiple of
rotor speed coincides with one of the system&amp;rsquo;s natural frequencies.
Differential/Geometric
StiffnessAdditional stiffness due to axial centripetal force  in a rotating reference frame.
External Damping Damping associated with the stator when problem is analyzed in fixed
reference frame.
Gyroscopic Matrix Skew symmetric matrix proportional to rotational speed for analysis in a fixed
reference frame, added to damping matrix [B].
Internal Damping Damping associated with the rotor when problem is analyzed in fixed reference
frame.
Mode T racking For Campbell diagram plotting, it is useful to track rotor modes in case the
eigenvalues of the modes change order.
Reference Rotor Rotor specified in the RGYRO entry, in case multiple rotors are present in the
analysis.
Rotor Unbalance When the rotor mass centerline does not coincide with its rotational axis, then
mass unbalanced inertia related rotating forces occur.&lt;/p&gt;
&lt;p&gt;371 Glossary
Main Index
Rotor Whirl Planar motion of a rotor is called a whirling motion or a whirl .
Backward Whirl : Here, the rotor whirl direction is opposite to that of the
applied angular velocity .
Forward Whirl : Here, the rotor assembly whirls in the same direction as the
applied angular velocity.
Synchronous Analysis Analysis where rotor speed is same as the actuation frequency (for frequency
response analysis) or same as the eigenfrequency (for complex eigenvalue
analysis)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide 372
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
References
MSC Nastran Rotordynamics User’s Guide MSC Nastran DMAP Programmer’s Guide
References&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide 374
Main Index
Adams, M. L., Padovan, J., &amp;amp; Fertis, D. G. (1982). Engine dynamic analysis with general nonlinear finite-
element codes, Part 1: Overall approach and development of bearing damper element.  Journal of Engineering
for Gas T urbines and Power , 104(3), 586-593.
Branagan, L. A., Barrett, L. E., &amp;amp; Cloud, C. H. (). A manual for use with tilting pad bearing program
THPAD.  University of Virginia, Romac Report , (284).
Bellinger, D. (1985), Dynamic Analysis by the Fourier T ransform Method with MSC.Nastran, Proceedings
1995 MSC World Users&amp;rsquo; Conference.
Dimarogonas, Andrew D., Stefanos A. Paipetis, and Thomas G. Chondros. (2013) Analytical methods in rotor
dynamics . Springer Science &amp;amp; Business Media.
Friswell, M. I., Penny, J. E. T., Garvey, S. D. and Lees, A. W. (2010).  Dynamics of rotating machines .
Cambridge University Press.
Genta, Giancarlo (2007).  Dynamics of rotating systems . Springer Science &amp;amp; Business Media.
Geradin M. and Kill N., (1984), “A new Approach to Finite Element Modeling of Flexible Rotors. “
Engineering Computations , Vol. 1, 52-64.
Harris, C. M.  (1987), Shock and Vibration Handbook, Page 4-8, 3rd Edition, McGraw Hill
Jeffcott, H. H. (1919). XXVII. The lateral vibration of loaded shafts in the neighbourhood of a whirling
speed.—The effect of want of balance.  The London, Edinburgh, and Dublin Philosophical Magazine and
Journal of Science ,37(219), 304-314.
Kumar, M. Santhosh (2011). “Rotor dynamic analysis using ANSYS.”  IUTAM Symposium on Emerging
Trends in Rotor Dynamics . Springer Netherlands.
MSC Nastran Dynamic Analysis Users Guide, Version 2017 (2017) , MSC Software, Newport Beach, Los
Angeles, CA.
MSC Nastran Quick Reference Guide, Version 2017 (2017) , MSC Software, Newport Beach, Los Angeles, CA.
MSC Nastran Reference Guide, Version 2017 (2017) , MSC Software, Newport Beach, Los Angeles, CA.
MSC Nastran Superelements and Modules User’s Guide, Version 2017 (2017) , MSC Software, Newport Beach,
Los Angeles, CA.
MSC Nastran User Defined Services User`s Guide, Version 2017 (2017), MSC Software, Newport Beach, Los
Angeles, CA.
MSC Nastran SCA Service Guide, Version 2017 (2017), MSC Software, Newport Beach, Los Angeles, CA.
Nandi, A., and Neogy S., (2001), “Modelling of rotors with three-dimensional solid finite elements.”  The
Journal of Strain Analysis for Engineering Design  36(4), 359-371.
Nelson, F . C. (2007). Rotor dynamics without equations.  International Journal of COMADEM , 10(3), 2.
Nelson, H. D. and Vaugh, J. M. (1976), “The Dynamics of Rotor-Bearing Systems Using Finite Elements”,
Journal of Manufacturing Science and Engineering  98(2), 593-600.
Rao, J. S. (2011)  History of rotating machinery dynamics . Vol. 20. Springer Science &amp;amp; Business Media.
Seshu, P . (1997) “Substructuring and component mode synthesis.”  Shock and Vibration  4.3 Pages: 199-210.&lt;/p&gt;
&lt;p&gt;375 References
Main Index
Shanmugam A., Padmanabhan C., (2006), “A fixed–free interface component mode synthesis method for
rotordynamic analysis”, Journal of Sound and Vibration , Volume 297, Issues 3–5, Pages 664-679.
Stephenson R. W., Rouch K. E. and Arora R., (1989), “Modelling of Rotors with Axisymmetric Solid
Harmonic Elements” Journal of Sound and Vibration  131(3), 431-443.
Ushida, A. and Chua, L.O. (1984), Frequency-domain analysis of nonlinear circuits driven by multi-tone
signals, IEEE T rans. Circuits Syst., Vol. CAS-31, pp. 766-778
Vollan, Arne, and Louis Komzsik (2012).  Computational techniques of rotor dynamics with the finite element
method . CRC Press.
Vance, John M., Fouad Y. Zeidan, and Brian Murphy. (2010)  Machinery vibration and rotordynamics . John
Wiley &amp;amp; Sons.
Vollan, Arne, and Komzsik, L. (2012).  Computational T echniques of Rotor Dynamics with the Finite Element
Method . CRC Press.
Wagner M. B., Younan A., Allaire P ., and Cogill R., (2010) “Model Reduction Methods for Rotor Dynamic
Analysis: A Survey and Review,”  International Journal of Rotating Machinery , vol. 2010, 17 pages.
Zu, J.W. and Ji, Z.Y. (1998) &amp;ldquo;Steady-State Response of Continuous Nonlinear Rotor-Bearing Systems Using
Analytical Approach&amp;rdquo;, Journal of Engineering for Gas T urbines and Power, ASME, 120, pp 751 - 758.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide 376
Main Index&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P3</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_003/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_003/</guid>
      <description>
        
        
        &lt;h1&gt;29 Chapter 2: Theoretical Formulation
Equations of Motion in Fixed Reference Frame
Main Index
Damping in Stator
If the supports include dampers: CXA, CYA, CXB, and CYB , then the dissipation energy is given by:
Using Lagrange`s principle, contribution from dissipative energy to the structural dynamics equation of
motion is given by:
Thus, the equation of motion in a fixed reference frame with damping defined for the stator is given by:
Damping in Rotor
Damping defined for the rotating components results in damping forces proportional to displacements
defined in the rotating system. Thus, if [ BR] represents the damping matrix in the rotating reference frame,
then the damping force ( FDR) in the rotating coordinate system is given by:
According to Chapter 1, the transformation from a fixed to a rotating frame is given by:
, where&lt;br&gt;
Thus,   and
where ;D1
2&amp;mdash;CXAu·a·–21
2&amp;mdash;CYAv·a·+21
2&amp;mdash;CXBu·b·+21
2&amp;mdash;CYBv·a·–2+ + + =
g·DCXACXB+ 0 0 -aCXAbCXB+
0 CYACYB+ aCYAbCYB– 0
0 aCYAbCYB– a2CYAb2CYB+ 0
-aCXAbCXB+ 0 0 a2CXAb2CXB+u·
v·
·
·&lt;/h1&gt;&lt;p&gt;g·DBSg· =
Mg··Gg· BSg· Kg + + + F =
FDRBRg· =
vpt Ttvpt = Ttt cost sin 0
-t sin t cos 0
0 0 1=
gt Ttgt = g·t Tg·tTgt + =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equations of Motion in Fixed Reference Frame30
Main Index&lt;/p&gt;
&lt;p&gt;Therefore, the damping force ( FDF) in the fixed reference frame is given by :
If  (where  is an identity matrix), then the above expression can be simplified to:
where J is a skew symmetric matrix and its given by:&lt;br&gt;
Thus, the rotor damping results in an additional skew symmetric force proportional to displacement. This
additional term is referred to as a circulatory matrix due to internal damping.
Equation of motion in a fixed reference frame where damping is defined for both stator and the rotor is given
by:
where,  for this particular case.
In addition, if the rotor includes large flexible components away from the axis of rotation like disk or blades,
then the additional stiffness due to centrifugal loads needs to be included in the analysis. The modified
equation of motion in the fixed reference frame is then given by:
where,
[KG] = Differential Stiffness due to radial centrifugal load .Tt-t sin t cos 0
-t cos -t sin 0
0 0 1=
FDF TTFDR =
FDF TTBRTg·tTgt +   =
FDF TTBRTg·tTTBRTgt + =
BR bRI = I
FDF bRg·tbRTTTgt + =
FDF bRg·tbRJgt + =
J010
1–00
000=
Mg··Gg· BSBR + g·KCRK +  g + + + FS =
KCRbRJ =
Mg·· BSBRG + +  g· KKCR2KG + +  g + + FS =&lt;/p&gt;
&lt;p&gt;31 Chapter 2: Theoretical Formulation
Equation of Motion in Rotating Reference Frame
Main Index
Equation of Motion in Rotating Reference Frame
As described in Chapter 1 for the analysis in a rotating reference frame, the non-rotating part of the model
must be symmetric. Hence for the model described in Figure 1-1, the following condition must be satisfied for
analysis in a rotating reference frame.
KXA = KYA = KA, CXA = CYA= CA, KXB = KYB = KB, and CXB = CYB = CB
Equations of motion in a rotating reference frame can be obtained by transforming the displacement vector.
For simplicity, consider translational DOFs only. Detailed analysis with rotational DOF is provided in the
book by Vollan and Komszik (Vollan and Komszik, 2012).
For translational DOFs, transformation from a fixed to a rotating reference frame is given by:
where  and .
Therefore,  where
Taking the derivative gives:
Kinetic energy of the disk is given by&lt;/p&gt;
&lt;p&gt;where,
The inertial terms from Lagrange’s equation are given by:
where ;gt T1t gtt =
gt uv{,}T= T1t t cost sin
-t sin t cos=
gt T1t Tgtr0+ = r0 x0y0{,}T=
g·t T1Tgt·
T1·Tgtr0+ + =
EKt1
2&amp;mdash;mgt·Tgt· =
EKt1
2&amp;mdash;mT1Tgt·
T1·Tgtr0+ +
   T
T1Tgt·
T1·Tgtr0+ + =
T1·-t sin t cos
-t cos -t sin=
tdd
g·iEK

giEK– Mgt··
2Cgt·
2Zgt – fcp – + =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Equation of Motion in Rotating Reference Frame32
Main Index
(mass matrix)
(coriolis matrix)
(centrifugal softening matrix)
(centripetal force)
The centripetal force acting on the rotor disk is proportional to the square of the operating speed and distance
from the axis of rotation. If higher-order strain is included in the analysis, an axial load results in additional
bending stiffness, which is referred to as geometric or differential stiffness. It is denoted by: 2[KG]
Since the support stiffness is the same in both directions, the simplified stiffness matrix is the same in both
the fixed and rotating systems. Therefore, the contribution from strain energy for analysis performed in a
rotating coordinate system is given by:
Damping in Rotors
Damping defined for rotors can be expressed as (as described earlier):
Thus, the equation of motion with damping defined for rotors is given by:
Damping in Stator
As discussed earlier, damping defined in the fixed reference frame for the stator needs to be converted into
damping defined in the rotating reference frame using coordinate transformation. Mm0
0m=
C0-m
m0=
Zm0
0m=
fcp m2x0
y0=
gU KAKB+ 0
0 KAKB+2KG + =
FDRBRg· =
Mgt··
2Cgt·
BRgt·
K2KG2Z – + gt + + + FR =&lt;/p&gt;
&lt;p&gt;33 Chapter 2: Theoretical Formulation
Final Equations of Motion
Main Index
Therefore, the damping force in the fixed reference frame for stator is given by:
, where b = CA + C B.
Transforming this damping force to the rotating reference frame:
where, [ BS] = b[I] and [ KC] S = b[Jt].
Thus, the equation of motion in the rotating reference frame with damping defined for both the rotor and
the stator is given by:
Final Equations of Motion
The general equation of motion for a model with rotating components is given by:
1.Final equation of motion in a rotating reference frame:
(2-1)
where,
[M] = Mass matrix
= Degrees of freedom in the rotating reference frame
[BS] = Damping in fixed frame
[BR] = Damping in rotating frame
= Operating rotor speed
[C] = Coriolis Effect
[K] = Stiffness matrix
[Z] = Centrifugal softening matrixFDSbg·t =
FDSbT1T1Tgt·
T·
1Tgt +
   =
FDRbT1T1Tgt·
T·
1Tgtr0+ +
   bgt·
bJtgt + = =
FDSBSgt·
KCSgt + =
Mgt··
2C BRBS +  + gt·
K2KG2Z – KCS+ +  gt + + FR =
Mg·· BSBR2C + +  g· K2Z – 2KGKCS+ +  g + + FR =
g&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Final Equations of Motion34
Main Index
[KG] = Differential Stiffness due to axial centrifugal load
[KC]S = Circulatory matrix due to damping in fixed frame
{FR} = External force vector in rotating reference frame
2.Final equation of motion in a fixed reference frame:
(2-2)
where,
= Degrees of freedom in the fixed reference frame
[G] = Gyroscopic Matrix
[KC]R = Circulatory matrix due to damping in rotating frame
{FS} = External force vector in fixed reference frameMg·· BSBRG + +  g· KKCR2KG + +  g + + FS =
g&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 3: Elements Supported for Rotordynamics Analysis
MSC Nastran Rotordynamics User’s Guide
3Elements Supported for
Rotordynamics Analysis
Rotor Modeling      36
Axisymmetric Harmonic Concentrated Mass Element      46&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotor Modeling36
Main Index
Rotor Modeling
Rotordynamic Analysis using MSC Nastran
MSC Nastran supports rotordynamic analysis for 1D, 2D axisymmetric harmonic and 3D rotor geometries.
The three corresponding cards and their element support are listed in Table 3-1. It should be noted that all
three cards are valid for analysis in the fixed reference frame and that the ROTOR card furthermore supports
analysis that takes place in the rotating reference frame.
After the ROTORG card was released in MSC Nastran 2004, the new 2D and 3D capabilities were
introduced in MSC Nastran 2014 and MSC Nastran 2017, respectively. In addition to direct solution
approaches, modal solution approaches can also be used for complex eigenvalue analysis (SOL 110) and
complex frequency response analysis (SOL 111) for all the rotors. Note that modal transient analysis (SOL
112) is not supported for rotordynamic analysis.
A brief preview of each of these rotor cards is given in Figure 3-1, Figure 3-2, and Figure 3-3. Detailed
descriptions are available in the MSC Nastran Quick Reference Guide .
Current Limitation for Analysis in Fixed reference frame:
a.If shell elements are defined perpendicular to the rotor axis for a 3D rotor defined using ROTOR
entry, then the gyroscopic matrix is not available for those elements. For example, a flat disk like
a CD spinning about the center. If the shell elements are replaced by SOLID elements, then
correct gyroscopic effects can be obtained.Table 3-1  Rotor definition entries
Rotor Entry
Name Geometric Extent Elements SupportedReference Frame
Supported
ROTORG 1D CONM2, CBAR, CBEAM Fixed only
ROTORAX 2D Axisymmetric
HarmonicCONM2 ,
CQUADX ,
CTRIAX  Fixed onlyFixed only
ROTOR 3D CONM1,CONM2
CBAR, CBEAM
CQUAD4, CQUAD8, CTRIA3,
CTRIA6
CTETRA, CPENTA, CHEXABoth fixed and rotating&lt;/p&gt;
&lt;p&gt;37 Chapter 3: Elements Supported for Rotordynamics Analysis
Rotor Modeling
Main Index
b.Bar elements (default version) do not have polar moment of inertia. Thus, if CBAR elements are
defined along the axis of rotation (for both ROTOR and ROTORG entries), then they do not
provide any contribution to gyroscopic matrix. The CBAR elements can be replaced by CBEAM
elements in case gyroscopic terms  are needed for those elements.
Figure 3-1  ROTORG  Definition&lt;br&gt;
Figure 3-2  ROTORAX  Definition
Figure 3-3  ROTOR  DefinitionSpecifies grids that compose the rotor line model.
Format:ROTORG Rotor Line Model Grids
1 2 3 4 5 6 7 8 9 10
ROTORG ROTORID GRID1 GRID2 &amp;hellip; GRIDn
Specifies list of elements, properties or grid points that comprise an axisymmetric model rotor.
Format:ROTORAX Axisymmetric Model Rotor Definition
1 2 3 4 5 6 7 8 9 10
ROTORAX ROTORID LTYPE ID1 ID2 &amp;hellip; &amp;hellip; IDn
Specifies list of grids, elements or properties that comprise the rotor 3D model.
Format:ROTOR Rotor Model Definition
1 2 3 4 5 6 7 8 9 10
ROTOR ROTORID FRAME
LTYPE ID1 ID2 ID3 etc.
AXIS GID1 GID2 etc.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotor Modeling38
Main Index
In order to define a rotor model, the following information needs to be provided:
a.Unique rotor identification number
b.List of elements/nodes that comprise the rotor model
c.At least two grid points to define the axis of rotation
d.Type of reference frame to use for analysis
In the case of ROTORG, the list of nodes specified through GRID1, GRID2, … GRIDn are sufficient to
define the components of the rotor. Since these grid points must be collinear, they also define the axis of
rotation. (In case these points are not collinear, a FATAL message is issued by MSC Nastran). It is important
to realize that ROTORG grids may not be connected directly to any element that is not part of the rotor  for
example, a free-free rotor.  However, since physical rotor/stator couplings via bearings commonly occur in
rotor systems, special modeling techniques are available to specify such connections.
In the case of ROTORAX, components of the rotor can be specified either by listing all the elements that
comprise the rotor (LTYPE = ELEM) or by specifying property IDs associated with the elements that
comprise the rotor (LTYPE = PROP). The axis of rotation is specified using LTYPE = GRID. At least two
grid points are required to specify the axis of rotation. These grid points need not be part of the axisymmetric
harmonic rotor.
ROTOR is similar to ROTORAX but more condensed in that all rotor details for a single rotor can be
specified in one single card . Unlike the previous two rotor entries, here the user needs to specify the reference
frame being used for the analysis next to the rotor ID. In a single test deck, only one type of reference frame
can be used for analysis, either rotating or fixed.
Sample Test Case
Figure 3-4  Uniform rigid rotor supported at ends
To illustrate this Rotordynamics functionality within MSC Nastran, let us consider the hollow rotor with
two bearing supports in Figure 3-4 and model it with the introduced ROTORG, ROTORAX and ROTOR
cards in sequence . The rotor has a length of 0.5m, an inner diameter of 0.1m, and an outer diameter of 0.2m.
Both bearing supports have horizontal and vertical stiffnesses of 1MN/m. The rotor is made of steel with a
density of 7810 kg/m3 and an elastic constant of 210 GPa.&lt;/p&gt;
&lt;p&gt;39 Chapter 3: Elements Supported for Rotordynamics Analysis
Rotor Modeling
Main Index
Model with ROTORG
The ROTORG entry can be used to define a line rotor by specifying grid points belonging to the rotor. A
rotor defined using the ROTORG entry may consist of CBAR, CBEAM, and/or CONM2 elements. It
should be noted that the CBAR elements do not include a polar moment of inertia in the element
formulation. Hence, CBAR elements (with default settings) may be used in combination with CONM2
elements to generate gyroscopic matrices for analysis in a fixed reference frame.  Although the CONM2 mass
elements can also be optionally associated with CBEAM elements, the PBEAM card (i.e.: CBEAM property
card) allows for the direct specification of a polar moment of inertia.
Rotors can be firmly constrained in space with SPCs or mounted with bearings supports using rigid elements
(e.g. RBAR, RBE2), interpolation elements (e.g.: RBE3) or constraint equations (e.g. MPC). For more detail
about these special elements, the user can refer to the MSC Nastran Quick Reference Guide  (QRG). If
connection using conventional elements between the rotor and bearing or the support structure is detected,
a fatal error will be issued. It is important to have the rotor detached from the support structure because the
inertial properties for the calculation of the gyroscopic terms are determined using the G-size matrices.
Connections to ground or support elements may cause incorrect determination of the gyroscopic terms. For
the example shown here, the end points of the rotor are connected to ground with springs through RBE2
elements.
a.ROTORG using CBEAM elements
The rotor modeled using four CBEAM elements is shown in Figure 3-5 and the test deck for the rotor part of
this model is shown in Figure 3-6. The rotor with ID 1 is defined as consisting of nodes 1 to 5 using the
ROTORG entry. Structural properties and shape for the beam are defined using MAT1 and PBEAML
entries, respectively. In the current example, bearings are defined in the fixed reference frame. In order to
make that distinction, two grid points (Node 11 and 15) are defined coincident with existing rotor nodes.
Node 11 is connected to Node 1 and Node 15 is connected to Node 5 using RBE2 elements. Finally, spring
supports are defined on nodes 11 and 15.
Figure 3-5  Rotor model with CBEAM entries
For the rotor model defined using CBEAM elements as shown in Figure 3-5 and Figure 3-6, the corresponding
rotor summary in the .F06 is shown in Figure 3-7. For rotors defined using a ROTORG entry, the following
information about the rotor is provided in the output.F06 file:
a.Grid points found on each rotor .
b.Assumed direction of rotation based on the grids defined in the ROTORG entry. (The final spin
direction for each rotor is provided by the RSPINR entry.)
c.Rotor mass summary which includes details for inertia properties for each of the grid points that
comprise the rotor model. Since a CBEAM element is used in the analysis, the mass summary for
each grid point also includes polar moment of inertia. The last line in this summary shows the
Center of gravity for the rotor model.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotor Modeling40
Main Index
Figure 3-6  Test deck for rotor model with CBEAM elements
Figure 3-7  Rotor Summary in the.F06 file for the rotor defined using CBEAM element&lt;/p&gt;
&lt;p&gt;41 Chapter 3: Elements Supported for Rotordynamics Analysis
Rotor Modeling
Main Index
d.ROTORG using CBAR and CONM2 elements
If a massless shaft is desired in a Rotordynamics analysis, the entire mass and inertia of the shaft can be&lt;br&gt;
assigned to a concentrated mass located at the center. This particular case can be modeled using CBAR and
CONM2 elements as shown in Figure 3-8 and Figure 3-9.
Figure 3-8  Rotor model with CBAR and CONM2 elements
Figure 3-9  Input deck for rotor model with CBAR and CONM2 elements
With reference to the test deck shown in Figure 3-6, the following changes are made in the model:
PBEAML is replaced by PBARL
CBEAM is replaced by CBAR
The material density in the MAT1 card is changed from 7810.0 to 0.0 kg/m3.
A concentrated mass is added at the center of the rotor model.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotor Modeling42
Main Index
Figure 3-10  Results for the rotor model with CBAR/CONM2 elements
The only difference in the results presented in Figure 3-7 and Figure 3-10 is in the rotor mass summary. As
expected for the model with CBAR and CONM2 elements, the entire mass and inertia of the model is located
at the center of the rotor on the grid with ID 3. Of course, the entire mass does not have to be concentrated
in one GRID point and can be distributed over several or even all of them.
Model using ROTORAX
The hollow rotor modeled using axisymmetric harmonic elements is shown in Figure 3-11. In general, the
number of axisymmetric elements required to obtain a high fidelity model is much larger than the number
of elements required for a beam/bar element model. However, for this particular example, in order to
highlight the usage of axisymmetric elements, only four CQUADX elements are used in the analysis.
Figure 3-11  Rotor model developed using axisymmetric harmonic elements&lt;/p&gt;
&lt;p&gt;43 Chapter 3: Elements Supported for Rotordynamics Analysis
Rotor Modeling
Main Index
Figure 3-12  Test deck for rotor model with axisymmetric harmonic elements
Part of the test deck for the rotor modeled using CQUADX elements is shown in Figure 3-12. The rotor with
ID 1 is defined by specifying the property of the elements that comprise the rotor and the grid points that
define the axis of rotation. For the case of ROTORAX entries, the PROP entry must point to a PAXSYMH
entry. For this particular case, the ELEM option could have also been used to define the components of the
rotor as shown below:
The details of the PAXSYMH card used for specifying the properties of the elements is described in the MSC
Nastran Quick Reference Guide  and Appendix. Note that in the current analysis, a harmonic index of 1 is used in
order to perform lateral bending analysis. For axial and torsion analysis, the harmonic index needs to be
changed from “1” to “0”.
The CQUADX and GRID entries are defined in the conventional way. In order to connect the rotor to the
conventional springs, two “3-D” grid points are defined. (A grid point associated with an axisymmetric
harmonic element is considered to be an axisymmetric harmonic grid point. As described in Appendix B of $ ROTOR DEFINITION
$ ROTORAX 10PROP1
ROTORAX 10ELEM1THRU4&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotor Modeling44
Main Index
this manual, the axisymmetric harmonic grid points have six DOFs, and they are different from conventional
3-D grid points.) In order to make a connection between the axisymmetric harmonic grid point and the 3-
D grid, the RBAX3D connector elements are used. In the current model, two RBAX3D elements are used,
one at either end, to connect the rotor to the bearings at the ends. Once the connection to 3-D grid points
has been made, CBUSH elements can be attached to these 3-D grid points for the support. Rules related to
the usage of RBAX3D entry are given in the MSC Nastran Quick Reference Guide  and Appendix B of this
manual.
Figure 3-13  Rotordynamics summary from axisymmetric harmonic rotor
The rotordynamics summary in the .F06 file for a rotor model defined using ROTORAX entry is shown in
Figure 3-13. It lists the elements defined on the axis of rotation. Any 3-D grid point attached to an
axisymmetric harmonic rotor using the RBAX3D entry is also considered part of the rotor axis grid list. The
rotor spin direction is determined based on the grid points specified under the GRID option. And finally, the
rotor mass summary for each of the rotors defined in the model is listed. It includes total rotor mass, its CG
location and moment of inertia. It can be seen here that the total mass, CG location, and polar moment of
inertia for the beam rotor and axisymmetric rotor are the same.
In some cases, it may be desirable to treat the rotor as massless and assign mass and inertia properties to a
concentrated point mass, as simulated earlier using CBAR/CONM2 elements. This can also be done using
axisymmetric harmonic elements as shown in Figure 3-14. Here an additional GRID with ID 13 is defined on
the axis of symmetry at the center of the rotor (i.e., where the point mass needs to be defined). This 3D GRID
point is connected to a point on the axisymmetric rotor using RBAX3D entry. Now, a point mass can be
defined on this 3-D grid point which will be treated as part of the rotor during the analysis. Results for this
particular case are shown in Figure 3-15. Now the Rotordynamics summary shows three points listed on the
rotor axis compared with two points listed in Figure 3-13. Also, the mass summary for each rotor includes an
additional line which lists the total mass of the axisymmetric rotor after including the additional mass defined
using the CONM2 element.&lt;/p&gt;
&lt;p&gt;45 Chapter 3: Elements Supported for Rotordynamics Analysis
Rotor Modeling
Main Index
Figure 3-14  Test deck with axisymmetric harmonic elements and CONM2
Figure 3-15  Results for rotor defined using axisymmetric harmonic elements and CONM2&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element46
Main Index
Axisymmetric Harmonic Concentrated Mass Element
Axisymmetric Harmonic Concentrated Mass Element
This element has been developed by expanding the definition of the grid point referenced on a CONM2 Bulk
Data entry. With this enhancement, the grid point (in Field 3) of a CONM2 entry may reference not only a
standard 3-D grid point, but also a harmonic grid point (that is, a grid point specified on a CQUADX or
CTRIAX element referencing a PAXSYMH entry). The former type has the standard three translational and
three rotational degrees of freedom while the latter type has three symmetric components and three anti-
symmetric components dependent on the harmonic value.
The following additional points must be noted with regard to this feature:
For a harmonic grid point, the mass value M specified on the CONM2 entry is the total mass. This
value is not to be multiplied by 2 . The mass matrix computed for harmonic grids is dependent on
the harmonic value associated with the PAXSYMH entry and will be automatically determined by
the code.
Only harmonic values of 0 and 1 have contributions to grid point weight generator type
calculations.
Any values specified in the CID, X1, X2, X3, I11, I21, I22, I31, I32, or I33 fields of a CONM2
entry are ignored for a harmonic grid.
The above enhancement will greatly enhance user convenience for modeling many practical configurations
involving axisymmetric harmonic element rotors.
Sample Problem
In order to demonstrate this feature, an axisymmetric harmonic beam model and a 1D beam model, both
with concentrated masses, were developed as shown in Figure 3-16
Figure 3-16  Axisymmetric harmonic and 1D beams with concentrated mass (CONM2)
Both of the beams have similar structural and geometric properties. In the case of the 1D beam, where the
concentrated mass is defined on a 3D grid point, both mass and inertia properties for CONM2 need to be&lt;/p&gt;
&lt;h2&gt;47 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
specified. In the case of the axisymmetric harmonic beam, only the total mass needs to be specified for
CONM2.
$ CONM2  on 3D grid point
CONM2     208    204      0       100.000.
0.50. 0.50.       0.1.0&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;050-050-------010&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#050-050-------010&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;$ CONM2  on axisymmetric  harmonic grid point|
CONM2     115    104      0       100.00
Since the beams have a radius of 0.1 units, the mass and inertia properties of both the beams should be
identical if the implementation is correct. Here, the results obtained using “ PARAM GRDPNT ” about the
geometric center of both the beams are presented:
a.1D Beam
1.000157E+02    0.000000E+00  0.000000E+00  0.000000E+00  -1.151965E-19  0.000000E+00
0.000000E+00   1.000157E+02   0.000000E+00  1.151965E-19   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  1.000157E+02   0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   1.151965E-19  0.000000E+00  5.003272E-01    0.000000E+00  0.000000E+00
-1.151965E-19   0.000000E+00  0.000000E+00  0.000000E+00   5.003272E-01   0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  1.000000E+0 0
b.Axisymmetric Harmonic Beam
•Harmonic = 1
1.000157E+02    0.000000E+00  0.000000E+00  0.000000E+00  -1.897354E-19  0.000000E+00
0.000000E+00   1.000157E+02   0.000000E+00  1.355253E-19   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   1.219727E-19  0.000000E+00  5.003665E-01    0.000000E+00  0.000000E+00
-1.219727E-19   0.000000E+00  0.000000E+00  0.000000E+00   5.003665E-01   0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00
•Harmonic = 0
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  1.000157E+02   0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00
0.000000E+00   0.000000E+00  0.000000E+00  0.000000E+00   0.000000E+00  1.000079E+00
Input Files
(All of the following .dat files are in the …/tpl/axiharm  directory)
File Name Description
axhconmbm.dat 1D beam problem
axhconmh1.dat Axisymmetric harmonic beam problem with harmonic = 1
axhconmh0.dat Axisymmetric harmonic beam problem with harmonic = 0&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element48
Main Index
Model with ROTOR
User Interface
Bulk Data Entry
Specifies list of grids, elements, or properties that comprise the rotor 3-D model.
Format:
Example:
Remarks:
1.Supported element types for analysis in rotating reference frame:
0-D elements : CONM1, CONM2
1-D elements : CBEAM, CBARROTOR Rotor Model Definition
1 2 3 4 5 6 7 8 9 10
ROTOR ROTORID FRAME
LTYPE ID1 ID2 ID3 etc.
AXIS GID1 GID2 etc.
ROTOR 10 ROT
ELEM 10 THRU 12
PROP 1 THRU 5
AXIS 101 102
Field Contents
ROTORID Identification number of rotor. (Integer &amp;gt;0).
FRAME Analysis frame (Char, ROT or FIX, Required, Default: FIX)
LTYPE ELEM or PROP or both, indicating whether the specified list references element IDs
or property IDs. (Character; Required; No default)
Note that the order is important. In case both ELEM and PROP are specified, ELEM
should be specified first.
Idi IDs of elements or properties comprising the rotor. (Integer &amp;gt; 0; Required; No default)
AXIS Defines grid points which define the axis of rotation.
GIDi IDs of grids comprising the axis of the rotor (Integer &amp;gt; 0; Required; No default)&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P4</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_004/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_004/</guid>
      <description>
        
        
        &lt;p&gt;49 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
2-D elements : CQUAD4, CQUAD8, CTRIA3, CTRIA6
3-D elements : CHEXA, CPENTA, CTETRA
2.Supported element types for analysis in fixed reference frame:
0-D elements : CONM1, CONM2
1-D elements : CBEAM, CBAR
2-D elements : CQUAD4, CQUAD8 (full 8 nodes are required), CTRIA6(full 6 nodes required),
CTRIA3
3-D elements : CHEXA, CPENTA, CTETRA
3.THRU option is supported in ROTOR entry. Note that the order is important for LTYPE. In case
both ELEM and PROP are specified, ELEM should be specified first.
4.Analysis can be performed using coupled mass or diagonal mass for all the elements.
5.ROTORAX, ROTORG, and ROTORSE should not be used along with ROTOR in ROT frame.
They can only be used with ROTOR in FIX frame. (since ROTORAX, ROTORG, and ROTORSE
assume fixed reference frame.)
6.At least 2 grid points need to be defined on AXIS to complete ROTOR definition; these points may
not be part of rotor.
7.For unbalance loads, the grid point, at which UNBALNC is defined, should be part of ROTOR
AXIS list.
8.In order to include CONM1/2 elements as part of a rotor, its element ID should be listed using
ELEM in ROTOR definition.&lt;br&gt;
9.Stator portion of the model should only be defined in residual for external superelement runs in
rotating system .
PARAM Entry
WHIRLOPT
Default  = FWD
Control forward whirl or backward whirl analysis for SYNC option in SOL 107 and SOL 108.
Usage:
PARAM, WHIRLOPT , FWD: For forward whirl analysis
PARAM, WHIRLOPT , BWD: For backward analysis
a.Using shell elements
Finally, the rotor is modeled using shell elements CQUAD4 and the new ROTOR entry. The rotor model
and the corresponding test deck are shown in Figure 3-17 and Figure 3-18, respectively.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element50
Main Index
Figure 3-17  Rotor model with shell elements
Figure 3-18  Test deck with shell elements for analysis in fixed system
The ROTOR entry includes all the details about the reference frame for analysis (FIX), components of the
rotor (PROP 1) and grid points to define the axis of rotation (AXIS 220 221). The material properties for
the shell elements are defined using usual PSHELL and MAT1 entries. As shown above, RBE2 elements
(RBE3 element can also be used) are used here to connect the rotor to the bearings in the fixed frame. Also,
it can be easily seen here that the size of the model has increased by at least 40 times compared with the beam
rotor model.&lt;/p&gt;
&lt;p&gt;51 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
The rotordynamics summary for the rotor model defined using shell elements is shown in Figure 3-19. It
follows the same format as that for the axisymmetric rotor. The .F06 file lists the grid points that lie on the
axis of rotation and define the rotor axis. The total mass and the rotor CG location obtained for the rotor
with shell elements is the same as that obtained earlier for the rotor with beam elements and the rotor with
axisymmetric harmonic elements. Note that the polar moment of inertia is zero in this case since the
rotational degrees of freedom do not include inertia effects for shell elements.
Figure 3-19  Rotor summary for the 3-D rotor
b.Using ROTOR entry for 1-D elements
As described in Table 3-1, the rotor defined using CBEAM, CBAR and CONM2 elements can also be defined
using the ROTOR entry. Thus, the rotor defined earlier in Figure 3-5 and Figure 3-8 can also be defined using
the new ROTOR entry.
The 1-D rotor with beam elements can be defined using the ROTOR entry as:
$ ROTORG 11THRU5
ROTOR 1 FIX
PROP 1
AXIS 12&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element52
Main Index
Similarly, the 1-D rotor modeled using CBAR and CONM2 element can be defined using the ROTOR entry
as:
Since there is no property associated with the CONM2 elements, it is defined as part of the ROTOR entry
using the ELEM option, as observed above. The Rotordynamics summary for the above case is shown in
Figure 3-20. The rotor information provided here is similar to that listed in Figure 3-10.
Figure 3-20  Rotordynamic summary for ROTOR with CBAR/CONM2 elements
Rotor Modeling Guidelines
In this section, a brief overview of different rotor modeling approaches is provided. In general, the approach
used in the analysis depends on the following features of the model:
1.Symmetry present in rotor and stator
2.Complexity of the rotor
3.Computational time
The symmetry present in rotor and stators identifies the reference frame to be used for the rotordynamic
analysis. The next important criteria is to determine the complexity of the rotor model and the best modeling
technique to use to capture the geometry of the model. Even though higher-order elements may capture the
model details better, it comes at the expense of significant computational time. (In some cases, the use of
enhanced reduction techniques can offset the penalty associated with higher order models. These reduction
techniques are discussed in a later chapter.) Here, four representative rotor models are presented, and for each $ ROTOR DEFINITION
$ ROTORG 1 1THRU5
ROTOR 1FIX
ELEM21
PROP1
AXIS 1 2&lt;/p&gt;
&lt;p&gt;53 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
of the case, appropriate modeling recommendation is made to obtain accurate results without significant
computational time.
Case 1: Uniform Hollow Rotor Model
A uniform hollow rotor modeled using three different options available for analysis in fixed reference frame
is shown in Figure 3-21. Number of elements and grid points used for generating these rotor models is listed
in Table 3-2. Here it can be seen that, as compared to a one-dimensional rotor model, the two-dimensional
rotor model requires 90 times more nodes whereas the three-dimensional model requires 290 times nodes.
Thus for this simple and uniform hollow rotor, it is sensible to use one-dimensional rotor modeled using
CBEAM (or CBAR and CONM2) and defined using ROTORG  to save computational time.
Figure 3-21  Hollow Rotor Model
Case 2: Symmetric Nonuniform Rotor Model
Figure 3-22 shows the Nelson-MacVaugh (Nelson and Vaugh, 1976) rotor modeled using different elements.
As seen in the figure, the rotor is nonuniform and diameter varies across the length of rotor. Table 3-2  Finite element details
Model # of Grids # of Elements
ROTORG 10 9
ROTORAX 904 675
ROTOR 2900 2870&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element54
Main Index
Figure 3-22  Nelson-MacVaugh (NM) Rotor
For this case, the one-dimensional rotor modeled using CBEAM elements may not capture the stiffness of
the rotor model correctly in the region where the rotor diameters varies sharply. For these kind of models, the
use of axisymmetric harmonic elements , as shown in Figure 3-22(b), is recommended. In this case, the 3-D
solid elements ( Figure 3-22(c)) also captures the changes in rotor geometry correctly; however, they require
much more nodes and elements to capture the correct geometry, and thus they are computationally more
expensive.
Case 3: Symmetric Nonuniform Rotor
Model for a rotor shaft with propeller is shown in Figure 3-23. The finite element model consists of CQUAD4
and solid CHEXA elements. This particular model cannot be analyzed accurately using one-dimensional or
two-dimensional elements. Since the rotor has discre te blades attac hed, the rotor model shown here is not
axisymmetric by definition. However, as the rotor blades are uniformly distributed around the circumference,
the rotor model can be approximately treated as symmetric and analyzed in fixed reference frame. Thus, this
model needs to be  defined using the ROTOR entry,  either in fixed or stationary reference frame, depending
on the nature of support structure. (If the discrete blades in the model are short and can be treated as rigid,
then all the blades in the rotor model can be replaced by a concentrated mass (CONM2) element at the center
of the axis of rotation/symmetry. In this case, it would be possible to model the rotor using axisymmetric
harmonic elements and define is using ROTORAX entry.)&lt;/p&gt;
&lt;p&gt;55 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Figure 3-23  Propeller with shaft
Case 4: Nonsymmetric Rotor
The model for a crankshaft generated using solid CHEXA and CPENTA elements is shown in Figure 3-24.
This model has nonsymmetric rotating structure. Thus this model can ONLY be analyzed using the
ROTOR entry in rotating reference frame , assuming it has symmetric boundary conditions and it is attached
to symmetric supports .
Figure 3-24  Crankshaft model generated using solid elements
Examples used in this chapter are available under the following folder:  ../tpl/ugrotor. A brief description of
these examples is given below:
Table 3-3&lt;br&gt;
Input File Name Description
rug_3_1 Rotor with CBEAM elements.
rug_3_ 2 Rotor with CBAR and CONM2.
rug_3_ 3 Rotor with axisymmetric elements.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element56
Main Index
Examples
All the test cases described here can be obtained from &amp;ldquo;../tpl/3drot&amp;rdquo; directory.
Test cases for analysis in rotating reference frame
In order to validate this capability, a rotor model is created using solid and shell elements as shown in
Figure 3-25.
Figure 3-25  Model with Shell and Solid Elements (for Analysis in Rotating System)
For the purpose of comparison, the rotor-disk configuration shown in Figure 3-25 is also modeled using bar
elements. Here, the disk is treated as rigid and modeled using a CONM2 element. Critical frequencies
obtained from this bar model in the fixed system are listed in Table 3-4.rug_3_ 4 Rotor with axisymmetric elements and CONM2.
rug_3_5 3D rotor with shell elements.
rug_3_ 6 3D propeller - Symmetric Nonuniform Rotor
rug_3_ 7 3D crankshaft - Nonsymmetric Rotor.
Table 3-4  Critical Frequencies for Bar Model in Fixed System
Mode Critical Frequencies (Hz)
First backward whirl 7.08
First forward whirl 10.22
Second forward whirl 10.74
Second backward whirl 25.5Table 3-3&lt;br&gt;
Input File Name Description&lt;/p&gt;
&lt;p&gt;57 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Critical frequencies in rotating system are shown in Table 3-5. Backward whirl analysis in synchronous analysis
(for SOL 107 and SOL 108) is triggered by using following PARAM entry:
PARAM WHIRLOPT BWD
Results presented in Table 3-4 and Table 3-5 indicate that the analysis in rotating system using models with bar
and solid elements captures the critical frequencies obtained from the analysis in fixed system. Mode shapes
corresponding to first four forward whirling modes obtained for the solid model are shown in Figure 3-26.
Figure 3-26  Model with Shell and Solid Elements (for Analysis in Rotating System)
The output includes mass summaries for each rotor defined. Mass summaries provided by different rotors are
listed below:
a.ROTORG defined using bar elements in fixed systemTable 3-5  Critical Frequencies for Bar and Solid Model in Rotating System
Mode Critical Frequencies (Hz)
3-D model
WHIRLOPT=FWD3-D model
BWDBar Elm FWD Bar Elm BWD
First backward whirl 6.5 6.58
First forward whirl 9.19 9.23
Second forward whirl 10.77 10.74
Second backward whirl 21.88 23.43&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element58
Main Index
MASS PROPERTIES OF ROTOR      400
GRID ID            AXIAL MASS         TRANSVERSE MASS        POLAR MOMENT        TRANSVERSE MOMENT
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
ALL           2.29585E+03           2.29585E+03           3.75800E+05           2.26615E+05
b.ROTOR defined using bar elements in rotating system
MASS PROPERTIES OF ROTOR      400
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
AXIAL MASS         TRANSVERSE MASS        POLAR MOMENT        TRANSVERSE MOMENT
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
2.29585E+03           2.29585E+03           3.75800E+05           2.26615E+05
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
c.ROTOR defined using solid/shell elements in rotating system
MASS PROPERTIES OF ROTOR       11
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
AXIAL MASS         TRANSVERSE MASS        POLAR MOMENT        TRANSVERSE MOMENT
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
2.29021E+03           2.29021E+03           0.00000E+00           4.19333E+05
&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
Input Decks
Rotor model with bar in fixed system (ROTORG): rg107a1.dat
Rotor model with bar in rotating system for forward whirl speed: r3d107e1.dat
Rotor model with bar in rotating system for backward whirl speed: r3d107e2.dat
Campbell diagram for rotor model with solid/shell in rotating system: r3d107f1.dat
Critical frequencies for rotor model with solid/shell in rotating system (forward whirl) : r3d107f2.dat
Critical frequencies for rotor model with solid/shell in rotating system (backward whirl): r3d107f3.dat
Reduction using ASET and QSET Degrees of Freedom
The solid rotor model analyzed earlier and shown in Figure 3-25 is modified here to include springs at the end
to represent symmetric bearings. The following changes were made in the Case Control and Bulk Data
sections to create a dynamically reduced model.
In case control:
METHOD = 3000
In Bulk Data:
EIGRL 3000           50
PARAM AUTOQSET  YES
ASET1 123456    9101 9100
Model without reduction: r3d107g1.dat
Model with reduction: r3d107g2.datNote:   The transverse moment is determined about the origin and the starting point for solid
model is not at the origin.&lt;/p&gt;
&lt;p&gt;59 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
The reduced model includes two grid points as part of ASET DOFs and AUTOQSET option for normal
modes. Critical frequencies obtained for the model with and without reduction are listed in Table 3-6. For this
model, dynamic reduction resulted in a 20% reduction in computational time.
Unbalanced Response (SOL 108)
The frequency response was performed on the solid model by applying an unbalanced load at the center of
the disk. The variation of the unbalanced load with rotational speed (frequency) is shown Figure 3-27.
Figure 3-27  Unbalanced Loads
Frequency response for the tip displacement for different damping options is shown in Figure 3-28. Backward
whirl analysis is triggered by using following PARAM entry:
PARAM   WHIRLOPT  BWDTable 3-6  Effect of Dynamic Reduction
Critical Frequencies (Hz)
Mode Number Without Reduction With Reduction
1 35.32 NA
2 31.88 31.88
3 42.92 42.92
4 98.52 98.52
5 101.48 101.48
6 145.46 145.46
7 147.51 147.51
8 171.58 171.58&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element60
Main Index
Figure 3-28  Unbalanced Response
Forward whirl analysis shows a peak at the first forward critical frequency while the backward whirl analysis
shows a peak at the second backward critical frequency. The effect of damping depends on the analysis option
selected. Damping is specified in the analysis in the rotating frame using RSPINR entry. Gyroavg = -1 is the
fast approach.
Undamped forward whirl: r3d108a1.dat
Damped forward whirl, gyroavg = 0 : r3d108a2.dat
Damped forward whirl, gyroavg = -1: r3d108a3.dat
Undamped backward whirl: r3d108a4.dat
Damped backward whirl, gyroavg = 0 : r3d108a5.dat
Damped backward whirl, gyroavg = -1: r3d108a6.dat
Transient Response
T ransient response was performed by applying a time-dependent force at the center of the disk. Analysis was
performed for three different cases:
zero rotor speed ( r3d109a1.dat )
nonzero rotor speed ( r3d109a2.dat )
nonzero rotor speed with damping ( r3d109a3.dat )
The results obtained for variation of load and displacement for a time-dependent force are shown in
Figure 3-29. The results obtained highlight the effect of rotor speed and damping on transient response.
Damping is specified in the analysis in rotating frame using RSPINT entry.&lt;/p&gt;
&lt;p&gt;61 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Figure 3-29  Transient Response
External Superelements
The stator portion of the model should be defined only in the residual for external superelement analysis in
rotating system.
Here also the model described in Figure 3-25 is modified and spring supports are used at the end. In order to
validate the external superelement capability, the complete rotor is defined in the external superelement for
this particular example and spring supports and rotor usage entries are defined in the assembly run. The
results obtained are compared with single-shot run, see Table 3-7. The external superelement usage for 3-D
rotors is the same as that for other rotors (ROTORAX and ROTORG).
Creation Run: r3d103h1.dat
ROTOR 11   ROT
PROP 1      2  3
AXIS 900001    900002
Assembly Run: r3d107h2.dat
Single Shot Run: r3d107h3.dat&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element62
Main Index
Permanent Glue
The 3-D rotordynamics capability implemented also supports permanent glued contact for rotor
components. The model used for the analysis is shown in Figure 3-30. The rotor definition does not change
due to the presence of permanent glued contact. The frequencies obtained from complex eigenvalue analysis
at different rotation speed ( Table 3-8) show no change in results.&lt;br&gt;
Connected Rotor: r3d107i1.dat
Disconnected rotor with permanent glue: r3d107i2.dat
Figure 3-30  Rotor Model with Permanent Glue ContactTable 3-7  Complex Frequencies from SOL 107 Analysis for Rotor in EXTSE
Single Shot (Hz) EXTSE Assembly (Hz)
0 RPM 6000 RPM 0 RPM 6000 RPM
1.02 31.88 1.02 31.88
1.02 31.88 1.02 31.88
3.25 42.92 3.25 42.92
3.25 98.52 3.25 98.52
3.62 101.48 3.62 101.48
42.93 145.46 42.93 145.46
78.36 147.51 78.36 147.51
78.36 171.58 78.36 171.58&lt;/p&gt;
&lt;p&gt;63 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Test Cases for Analysis in Fixed Reference Frame
In order to validate the analysis in fixed reference frame, the hollow rotor model shown in Figure 3-31 is used
for the analysis. This model is meshed using different types of solid and shell elements to validate the
implementation.
Figure 3-31  Hollow Rotor Model
Complex Eigenvalue Analysis using Solid Elements
Input Decks:
r3d107k1.dat  :With 8-noded CHEXA elements (Campbell Diagram)
r3d107k2.dat :With 20-noded CHEXA elements (Campbell Diagram)
rotg107.dat  : Model using beam elements and ROTORG (Synchronous Analysis)
r3d107m1.dat  : Model using 8-noded CHEXA elements (Synchronous Analysis)
r3d107m2.dat : Model using 20-noded CHEXA elements (Synchronous Analysis)
r3d107m3.dat : Model using CPENTA elements (Synchronous Analysis)Table 3-8  Complex Freq (Hz) for Connected Rotor and Disconnected Rotor using Permanent
Glue
For Connected Rotor Using Permanent Glue
0 RPM 10000 RPM 0 RPM 10000 RPM
268.5 106.8 268.5 106.8
268.5 425.9 268.5 425.9
776.5 615.4 776.5 615.4
776.5 936.3 776.5 936.3
1006.1 992.0 1006.1 992.0
1297.1 1155.9 1297.1 1155.9
1298.0 1434.7 1298.0 1434.7
1457.9 1449.7 1457.9 1449.7
1885.7 1732.6 1885.7 1732.6
1886.1 2039.0 1886.1 2039.0&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element64
Main Index
r3d107m4.dat  : Model using 4-noded CTETRA elements (Synchronous Analysis)
r3d107m5.dat : Model using 10-noded CTETRA elements (Synchronous Analysis)
Campbell diagram obtained using solid elements is shown in Figure 3-32. Here, the results obtained are
compared with those obtained using beam element (shown in SOLID lines)
Figure 3-32  Campbell Diagram for Hollow Solid Rotor
The number of elements used in the different finite element models is listed in Table 3-9. Critical frequencies
for the hollow rotor meshed using different kinds of solid elements are shown in Table 3-10. Here it can be
seen that the results for different cases are very close. Variation in results is due to different mesh densities and
number of grids per element used in the analysis.
Table 3-9  Finite Element Model Details
Model Number of Elements Number of Grids
Beam 10 12
Hex-20 200 1567
Hex-8 1600 3002
T et-10 8000 15064
T et-4 600 293
Penta-6 3200 2600&lt;/p&gt;
&lt;p&gt;65 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Campbell Diagram obtained using CPYRAM elements in fixed and rotating reference frames is shown below.
The results obtained using CPYRAM elements match very well with those obtained using CHEXA elements.
Figure 3-33  Results in Rotating reference frameTable 3-10  Critical Frequencies for Hollow Rotor Meshed using Solid Elements (Hz)
Mode Beam Hex-20 Hex-8 Tet-10 Tet-4 Penta
1 75.53 74.86 75.80 75.20 87.42 75.80
2 76.03 75.35 76.30 75.69 87.76 76.22
3 447.7 441.75 446.14 444.03 520.24 447.39
4 466.71 460.72 465.72 463.13 533.58 463.85
5 785.9 784.69 784.51 774.69 1143.93 784.89
6 1164.13 1140.28 1147.68 1146.87 1276.36 1154.87
7 1263.06 1246.58 1256.69 1254.18 1360.07 1246.32
8 1267.23 1266.47 1266.29 1266.39 1434.49 1266.72
9 2092.12 2026.15 2031.23 2038.91 2456.04 2051.63
10 2356.52 2341.17 2351.88 2343.59 2675.34 2320.07&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element66
Main Index
Figure 3-34  Results in fixed reference frame
Frequency Response for Rotor Defined using Solid Elements in Fixed System
Input Decks:
r3d108m1.dat  : Rotor with 8-noded CHEXA elements, undamped
r3d108m2.dat  : Rotor with 8-noded CHEXA elements, damped without circulation
r3d108m3.dat  : Rotor with 20-noded CHEXA elements, undamped
r3d108m4.dat : Rotor with 20-noded CHEXA elements, damped without circulation
Frequency response for unbalance loads obtained for the undamped case using SOL 108 analysis is shown in
Figure 3-35. In all the cases, peaks are observed near forward whirl critical speeds, which is around 76 Hz and
460 Hz (see Table 3-10).&lt;/p&gt;
&lt;p&gt;67 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Figure 3-35  Frequency Response for Undamped Rotors
Structural damping of 0.05 is introduced for the rotor through the RSPINR entry. Frequency response for
the damped cases is shown in Figure 3-36, where consistent results are obtained for the beam and solid rotor.
For these analysis, circulation effects are not included in the analysis (nastran system(695)=2).
Figure 3-36  Amplitude for Damped Case for 3-D Rotor
Test Decks:
r1d101m1.dat  : Beam rotor, static analysis
r1d129m1.dat  : T ransient response for beam rotor using SOL 129
r1d400m1.dat  : T ransient response for beam rotor using SOL 400
r3d109m1.dat  : T ransient response for solid rotor with 8-noded CHEXA elements using SOL 109
r3d129m1.dat  : T ransient response for solid rotor with 8-noded CHEXA elements using SOL 129
r3d400m1.dat  : T ransient response for solid rotor with 8-noded CHEXA elements using SOL 400&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element68
Main Index
r3d109m2.dat  : Transient response for solid rotor with 20-noded CHEXA elements using SOL 109
r3d129m2.dat  : Transient response for solid rotor with 20-noded CHEXA elements using SOL 129
r3d400m2.dat  : Transient response for solid rotor with 20-noded CHEXA elements using SOL 400
T ransient response to ramp-force for different kinds of rotors is shown in Figure 3-37. Results obtained using
SOL 109, SOL 129, and SOL 400 are close for all the rotors considered.
Figure 3-37  Transient Response for 3-D Rotors using Different Solution Sequences
Rotor with Shell Elements
Test Decks:
r3d107n1.dat  : Rotor with CQUAD4 shell elements, Campbell Diagram
r3d107n2.dat  : Rotor with CQUAD4 shell elements, Critical Frequencies
r3d107n3.dat  : Rotor with 8-noded CQUAD8 shell elements, Campbell Diagram
r3d107n4.dat : Rotor with 8-noded CQUAD8 shell elements, Critical Frequencies
r3d107n5.dat : Rotor with CTRIA6 shell elements, Campbell Diagram
r3d107n6.dat  : Rotor with CTRIA6 shell elements, Critical Frequencies
r3d107n7.dat  : Rotor with 8-noded CTRIA3 shell elements, Campbell Diagram
r3d107n8.dat  : Rotor with 8-noded CTRIA3 shell elements, Critical Frequencies
Results for critical frequencies for a rotor defined using shell elements are shown in Table 3-11 and compared
with those obtained using a rotor model developed using axisymmetric harmonic elements. Results indicate
that the shell model captures various local deformation modes which could not be captured using an
axisymmetric rotor model. Corresponding Campbell diagram and mode shapes are shown in Figure 3-38 and
Figure 3-39.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P5</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_005/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_005/</guid>
      <description>
        
        
        &lt;p&gt;69 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Figure 3-38  Campbell Diagram for Rotor with Shell ElementsTable 3-11  Critical Frequencies for Hollow Rotor Meshed using Shell Elements
Axis CQUAD4 CQUAD8 CTRIA3 CTRIA6
1 17.50 17.18 17.24 17.28 17.24
2 17.60 17.30 17.36 17.40 17.36
3 101.40 99.75 100.01 100.24 100.03
4 106.10 104.23 104.53 104.72 104.56
5 108.13 106.74 109.79 106.55
6 108.29 106.91 109.95 106.70
7 113.58 112.23 115.59 112.13
8 114.69 113.40 116.73 113.22
9 143.42 142.21 146.97 142.37
10 146.69 145.66 150.34 145.59
11 171.89 172.14 171.59 171.63
12 207.95 206.61 214.12 207.18
13 216.33 215.44 222.76 215.43
14 257.00 252.89 253.33 253.99 253.37
15 282.00 276.61 277.18 277.61 277.27&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element70
Main Index
Figure 3-39  Modeshapes for Shell Rotor Model&lt;/p&gt;
&lt;p&gt;71 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
3-D Rotor with Both Solid and Shell Elements
Test Decks:
r1d107p1.dat  : ROTORG with bar elements, Campbell Diagram
r3d107p1.dat  : ROTOR with solid and shell elements, Campbell Diagram
The model shown in Figure 3-25 developed using solid and shell elements was analyzed again in the fixed
reference frame. Results for the 3-D rotor are compared with those obtained using 1-D bar elements and a
concentrated mass. Campbell diagram for this case is shown in Figure 3-40, while the corresponding mode
shapes are shown in Figure 3-41.
Figure 3-40  Campbell diagram for 3-D rotor with disk&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element72
Main Index
Figure 3-41  Modeshapes for the Disk-rotor Model
Stress Stiffening for 3-D Rotors
Test Decks:
r3d107q3.dat : Rotor with shell elements in rotating reference frame with stress stiffness
r3d107q4.dat  : Rotor with shell elements in rotating reference frame without stress stiffness
Effects of stress stiffening are important for 3-D rotors, especially when the model includes large flexible
structure away from the axis of rotating, high rotational speeds and/or large diameter blades. In order to
demonstrate its effect, a hollow shell rotor model (similar to that shown in Figure 3-31) is analyzed in rotating
reference frame. Results shown in Figure 3-42 highlight the increase in stiffness with increase in rotor speed.&lt;/p&gt;
&lt;p&gt;73 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
Figure 3-42  Effect of Stress Stiffness in Rotating Reference Frame
Rotor Model with All Three Rotor Types
Test Deck:  r3d107s1.dat  : T est deck with ROTORG, ROTORAX, and ROTOR.
When the analysis is performed in fixed reference frame, all the three types of rotors supported in MSC
Nastran can be included in a model. For this particular case, the mass summary produced in .f06 file is shown
in Figure 3-43.
$ &amp;mdash;&amp;ndash; Including 3D rotor &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
ROTOR 11   FIX
PROP 101
AXIS 3001 3002
$ &amp;mdash;&amp;mdash; Axisymmetric Rotor (ROTORAX) Definition &amp;mdash;&amp;mdash;-
ROTORAX,10,PROP,1
ROTORAX,10,GRID,61,62
$ &amp;mdash;&amp;mdash; Beam Rotor (RotorG) Defintion  &amp;mdash;&amp;ndash;
ROTORG   400 501 THRU 507Solid Line: without stress stiffening
Dotted Lines: with stress stiffening0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
x 105500100015002000
Rotor Speed (RPM)Frequency (Hz)&lt;/p&gt;
&lt;p&gt;1P
Mode 1
Mode 2
Mode 3
Mode 4
Mode 5
Mode 6&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element74
Main Index
Figure 3-43  Mass Summary for Different Types of Rotors
Guidelines and Known Limitations
The main guidelines to be followed while working with 3-D rotors are listed under the Remarks section of
the ROTOR entry.
Theoretical limitations for the analyses that can be performed in rotating system are:
a.Multiple rotors at different speeds are not allowed, all the rotors must have the same speed.
b.The supports attached to the rotor must be axisymmetric.
Theoretical limitations for analyses that can be performed in fixed reference frame are:
a.The rotating component of the model must be axisymmetric.
These checks are not performed in the current implementation, and it is the responsibility of the user to
ensure that these criteria are satisfied to obtain correct results.
Implementation limitations of the analysis are:&lt;/p&gt;
&lt;p&gt;75 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
1.For SOL 400, only RIGID = LINEAR option is supported. The default option in SOL 400 is RIGID
= LAGRAN, and it needs to be modified for SOL 400 runs. No advanced elements should be used
in the rotor.
2.For SOL 200, optimization is currently not supported for rotors. Users can only use rotordynamics
in SOL 200 for analysis purposes.
3.For complex eigenvalue analysis, use of CLAN is recommended. Other options like HESS and IRAM
are not suitable for large problems usually encountered in 3-D rotor models.
4.AUTOSPC is off by default in SOL 400. This may cause models to fail when switching from a linear
solution sequence.
5.In the current version, RFORCE is not implemented in SOL 101 for analysis in rotating reference
frame.
6.Only permanent glue option is supported for rotordynamic analysis.
Example Summary
Summary of all the test decks is provided in Table 3-12 and Table 3-13.
Table 3-12  Test Decks for Analysis in Rotating Reference Frame
Description Name
Rotor model with bar in fixed system (ROTORG) rg107a1.dat
Rotor model with bar in rotating system for forward whirl speed r3d107e1.dat
Rotor model with bar in rotating system for backward whirl speed r3d107e2.dat
Campbell diagram for rotor model with solid/shell in rotating system r3d107f1.dat
Critical frequencies for rotor model with solid/shell in rotating system (forward whirl) r3d107f2.dat
Critical frequencies for rotor model with solid/shell in rotating system (backward whirl) r3d107f3.dat
Model without reduction:  r3d107g1.dat
Model with reduction: r3d107g2.dat
Undamped forward whirl r3d108a1.dat
Damped forward whirl, gyroavg = 0  r3d108a2.dat
Damped forward whirl, gyroavg = -1 r3d108a3.dat
Undamped backward whirl r3d108a4.dat
Damped backward whirl, gyroavg = 0 r3d108a5.dat
Damped backward whirl, gyroavg = -1 r3d108a6.dat
T ransient Analysis for zero rotor speed r3d109a1.dat
T ransient Analysis for non-zero rotor speed  r3d109a2.dat&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element76
Main Index
T ransient Analysis for non-zero rotor speed with damping  r3d109a3.dat
Creation Run r3d103h1.dat
Assembly Run r3d107h2.dat
Single Shot Run r3d107h3.dat
Connected Rotor  r3d107i1.dat
Disconnected rotor with permanent glue r3d107i2.dat
Model with composite material:  r3d103a1.dat
Model using PSHELL: r3d103a2.dat
Rotorax with concentrated mass raxcnm2b.dat
Table 3-13  Summary of Test Decks for Analysis in Fixed Reference Frame
Description Name
With 8-noded CHEXA elements (Campbell Diagram) r3d107k1.dat&lt;br&gt;
With 20-noded CHEXA elements (Campbell Diagram) r3d107k2.dat&lt;br&gt;
Model using beam elements and ROTORG (Synchronous Analysis) rotg107.dat
Model using 8-noded CHEXA elements (Synchronous Analysis) r3d107m1.dat
Model using 20-noded CHEXA elements (Synchronous Analysis) r3d107m2.dat
Model using CPENTA elements (Synchronous Analysis) r3d107m3.dat
Model using 4-noded CTETRA elements (Synchronous Analysis) r3d107m4.dat
Model using 10-noded CTETRA elements (Synchronous Analysis) r3d107m5.dat
Beam Rotor, undamped r1d108m1.dat
Beam Rotor, damped without circulation r1d108m2.dat
Rotor with 8-noded CHEXA elements, undamped r3d108m1.dat
Rotor with 8-noded CHEXA elements, damped without circulation r3d108m2.dat&lt;br&gt;
Rotor with 8-noded CHEXA elements, undamped r3d108m3.dat
Rotor with 8-noded CHEXA elements, damped without circulation r3d108m4.dat
Beam Rotor, static analysis r1d101m1.dat&lt;br&gt;
T ransient response for Beam Rotor using SOL 129 r1d129m1.dat  Table 3-12  Test Decks for Analysis in Rotating Reference Frame  (continued)
Description Name&lt;/p&gt;
&lt;p&gt;77 Chapter 3: Elements Supported for Rotordynamics Analysis
Axisymmetric Harmonic Concentrated Mass Element
Main Index
T ransient response for Beam Rotor using SOL 400 r1d400m1.dat&lt;br&gt;
T ransient response for Solid Rotor with 8-noded CHEXA elements using SOL 109 r3d109m1.dat&lt;br&gt;
T ransient response for Solid Rotor with 8-noded CHEXA elements using SOL 129 r3d129m1.dat&lt;br&gt;
T ransient response for Solid Rotor with 8-noded CHEXA elements using SOL 400 r3d400m1.dat&lt;br&gt;
T ransient response for Solid Rotor with 20-noded CHEXA elements using SOL 109 r3d109m2.dat
T ransient response for Solid Rotor with 20-noded CHEXA elements using SOL 129 r3d129m2.dat
T ransient response for Solid Rotor with 20-noded CHEXA elements using SOL 400 r3d400m2.dat
Rotor with Axisymmmetric Harmonic Elements, Campbell Diagram rax107n1.dat
Rotor with Axisymmmetric Harmonic Elements, Critical Frequencies rax107n2.dat
Rotor with CQUAD4 Shell Elements, Campbell Diagram r3d107n1.dat
Rotor with CQUAD4 Shell Elements, Critical Frequencies r3d107n2.dat
Rotor with 8-noded CQUAD8 Shell Elements, Campbell Diagram r3d107n3.dat
Rotor with 8-noded CQUAD8 Shell Elements, Critical Frequencies r3d107n4.dat
Rotor with CTRIA6 shell elements, Campbell Diagram r3d107n5.dat
Rotor with CTRIA6 shell elements, Critical Frequencies r3d107n6.dat
Rotor with 8-noded CTRIA3 shell elements, Campbell Diagram r3d107n7.dat
Rotor with 8-noded CTRIA3 shell elements, Critical Frequencies r3d107n8.dat
ROTORG with bar Elements, Campbell Diagram r1d107p1.dat
ROTOR with Solid and Shell elements, Campbell Diagram r3d107p1.dat
Rotor with Shell elements in rotating reference frame with stress stiffness r3d107q3.dat
Rotor with Shell elements in rotating reference frame without stress stiffness r3d107q4.dat
Test deck with ROTORG, ROTORAX, and ROTOR. r3d107s1.datTable 3-13  Summary of Test Decks for Analysis in Fixed Reference Frame  (continued)
Description Name&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Axisymmetric Harmonic Concentrated Mass Element78
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 4: Damping and Bearing Models
MSC Nastran Rotordynamics User’s Guide
4Damping and Bearing
Models
Damping and Bearing Models      80
Linear Bearings      85
Nonlinear Bearings      90&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Damping and Bearing Models80
Main Index
Damping and Bearing Models
Several damping options are available in MSC Nastran for both the rotor and stator components. Due to the
presence of circulatory terms, damping for rotors is separated and treated differently from damping for the
stator portion of the model. Besides applying damping directly to the structural model, the user can also
include linear/nonlinear dampers in the model using Bulk Data entries like CDAMP , CBUSH, etc. In order
to model complex behavior associated with bearings in rotordynamics, several models are available such as
the two-dimensional linear/nonlinear bush element (CBUSH2D), nonlinear squeeze film damper
(NLRSFD), nonlinear radial load (proportional to gap, NLRGAP), and the nonlinear load as a tabular
function (NOLINi).
Structural Damping Options for Stator
The following options are available in MSC Nastran for applying damping to structural model of the stator.
(For each of the available options, Bulk data entries that can be used to specify the damping parameters, and
mathematical expressions used for applying the damping, are also listed.)
Structural Damping
Sources: Param G or Field ‘G’ in DAMPING card
Application:
1.Added to stiffness matrix: [ KS]G = iG[KGG]
(Only for frequency response and complex eigenvalue solutions )
2.Added to Damping matrix: [BS]G =  (W3 from PARAM, W3)
where, [ KGG] is G-size stiffness matrix for the stator and W3 ≠ 0. ( Only in transient solutions )
Material Damping
Sources: Field ‘GE’ in material property card (eg. MAT1)
Application:
1.Added to stiffness matrix: [K4s] = (for each material type)
(Only for frequency response and complex eigenvalue solutions)
2.Added to Damping matrix: [BS]4 =  (W4 from PARAM, W4)
where W4 ≠ 0. (Only in transient solutions)
Rayleigh Damping
Sources: Field ‘Alpha1’ and ‘Alpha2’ in DAMPING card or PARAM, ALPHA1 and PARAM ALPHA2.GKGG
W3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
iGEKGG
K44
W4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;/p&gt;
&lt;p&gt;81 Chapter 4: Damping and Bearing Models
Damping and Bearing Models
Main Index
Application:
1.Added to Damping matrix: [BS] = 1[MGG] + 2[KGG]
where, [MGG] is G-size mass matrix for the stator.
Hybrid Damping
Sources: Field ‘HYBRID’ in DAMPING card and HYBDAMP card.
Application:
Case 1: KDAMP = No
1.Added to Damping matrix: [BS]H = [BH]
Case 2: KDAMP = Yes
1.Added to Stiffness matrix: [KS]H = i[KH]
(Only for frequency response and complex eigenvalue solutions)
2.Added to Damping matrix: [BS]H =  (WH from DAMPING entry)
where WH ≠ 0 in transient solutions.
(Refer to QRG for further details related to matrices [BH] and [KH] under the description for bulk
data entry HYBDAMP)
Modal Damping
Sources: SDAMPING in CASE Control and TABDMP1 or TABLEDi in Bulk Data section.
Application:
1.Added to Damping matrix: [BS]
Diagonal terms of the damping matrix are given by:
bi = iimi
where, i is the undamped vibration frequency determined using [M] and [K] matrices and i is the
dimensionless input coefficient.
Note that the modal damping matrix generated by this approach is not affected by the presence of rotors in
the model. Also, the circulation terms are not generated for damping corresponding to rotor degrees of
freedom .
Damping Options for Rotating Structure
The damping options described previously for the stator are also available for the rotating part of the
structure. However, they need to be specified through the RSPINR/RSPINT entry which is defined for each
rotor in the model. As described previously, the presence of damping terms in rotating systems leads to a
stiffness-like circulatory matrix in the equations of motion that is proportional to rotor speed.KH
WH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Damping and Bearing Models82
Main Index
In the case of material damping, structural damping and hybrid damping with “KDAMP=YES” for rotors,
it is possible to add the damping term either to the [B] matrix or to the [K] matrix. The actual
implementation depends upon the type of analysis (complex eigenvalue, frequency response or transient
response) and the presence of parameters WR3, WR4, and WRH. In addition, these parameters can also be
defined individually for each rotor using RSPINR/RSPINT entries. (Here, they are referred to as WR3R,
WR4R and WRHR, respectively ). These non-zero parameters (WR3R/WR4R/WRHR) defined using
RSPINR/RSPINT have higher priority than PARAM, WR3/WR4/WRH. In other words, WR3=WR3R, if
WR3R &amp;gt;0; WR4=WR4R, if WR4R&amp;gt;0; and WRH=WRHR, if WRHR&amp;gt;0.
Structural Damping
Sources: Field ‘GR’ in RSPINR/RSPINT card
Application:
1.Added to stiffness matrix: [KR]GR = i GR [KRGG]
(Only for frequency response when PARAM, GYROAVG ≥ 0)
2.Added to damping matrix: [BR]GR = (WR3 from PARAM, WR3)
where [KRGG] is the G-size stiffness matrix for the rotor and WR3 ≠ 0.
(For complex eigenvalue analysis, frequency response when PARAM, GYROAVG &amp;lt; 0 and transient
analysis)
Material Damping
Sources: Field ‘GE’ in material property card
Application:
1.Added to stiffness matrix: [K4R] =  (for each material type)
(Only for frequency response when PARAM, GYROAVG ≥ 0)
2.Added to damping matrix: [B4R] = (WR4 from PARAM, WR4)
where WR4 ≠ 0.
(For complex eigenvalue analysis, frequency response when PARAM, GYROAVG &amp;lt; 0 and transient
analysis)
Rayleigh Damping
Sources: Field ‘AlphaR1’ and ‘AlphaR2’ in RSPINR/RSPINT card
Application:
1.Added to damping matrix: [BR] = R[MRGG] + R[KRGG]GRKRGG
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
GEKRGG
KR4
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&lt;/p&gt;
&lt;p&gt;83 Chapter 4: Damping and Bearing Models
Damping and Bearing Models
Main Index
where [MRGG] is the G-size mass matrix for the rotor.
Hybrid Damping
Sources: ROTHYBD (separate bulk data entry and not in RSPINR/RSPINT) and HYBDAMP card.
Application:
Case 1 : KDAMP = No
1.Added to damping matrix: [BR]H = [BHR]
Case 2 : KDAMP = Yes
1.Added to stiffness matrix: [KR]H = i[KHR]
(Only for frequency response when PARAM, GYROAVG ≥ 0)
2.Added to damping matrix: [BR]H =  (WRH from PARAM, WRH)
where [KRGG] is the G-size stiffness matrix for the rotor and WRH ≠ 0.
(For complex eigenvalue analysis, frequency response when PARAM, GYROAVG &amp;lt; 0 and transient
analysis)
Circulation Matrix
As described in Chapter 2, the presence of rotor damping when the problem is analyzed in a fixed system
results in a circulatory matrix ( [KC]R) which is generated from the rotating structure. In a rotating reference
system, however, a circulatory matrix ( [KC]S) from the stator is used to present the rotor damping . This
matrix adds to the system stiffness matrix. It is multiplied to operating rotor speed and is skew symmetric in
nature.
If the damping force for the rotor is given by the following expression: , then the circulation
matrix is given by: [KC]R,B = cR[J ] where [J ] is a skew symmetric matrix.
For a more general case, the circulatory matrix corresponding to each 3-D grid “ j” is given by:
[KC]R,B = [TI][BR]j + [BR]j[TI]
where,
[BR]j = Viscous damping matrix corresponding to grid point “j”,
[TI] = skew symmetric matrix with the following form in the rotor coordinate system, andKHR
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
FDRcRg· =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Damping and Bearing Models84
Main Index
(The above matrix is only valid for 3-D grid points; that is, for rotors defined using ROTORG and ROTOR
entries. A different matrix is used for axisymmetric harmonic grid points where rotors are defined using
ROTORAX.) The 6x6 [ TI]j matrix is repeated for each grid point that is part of the rotor.
Thus, the circulation matrix for different damping options defined is given by:
a.Viscous dampers in Rotor [BR] (described in the next section)
Corresponding circulation matrix:
b.Structural damping GR
Corresponding circulation matrix:  (if WR3 ≠ 0)
where&lt;br&gt;
c.Material damping
Corresponding circulation matrix:  (if WR4 ≠ 0)
where&lt;br&gt;
d.Rayleigh damping
Corresponding circulation matrix:
where&lt;br&gt;
e.Hybrid damping
•If KDAMP = YES
Corresponding circulation matrix:  (if WRH ≠ 0)
where&lt;br&gt;
•If KDAMP = NO
Corresponding circulation matrix:&lt;br&gt;
Similar expressions are also obtained when the problem is solved in a rotating coordinate system and viscous
damping (proportional to velocity) is defined in the fixed coordinate system.TIj00.50000
-0.500000
000000
00000.50
000-0.500
000000=
KCRBTIBRBRTI + =
KCRGRGR
WR3&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;KRC =
KRC TIKRGGKRGGTI + =
KCRGE1
WR4&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;K4RC =
K4RC TIK4RGGK4RGGTI + =
KCR1RMRC2RKRC + =
MRC TIMRGGMRGGTI + =
KCRKH1
WRH&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-KHRC =
KHRC TIKHRGG KHRGG TI + =
KCRBHBHRC TIBHRBHRTI + = =&lt;/p&gt;
&lt;p&gt;85 Chapter 4: Damping and Bearing Models
Linear Bearings
Main Index
Effect of Circulation Terms
Often for the analysis in a fixed reference frame, the damping defined for the rotor is referred to as the internal
damping. Internal damping is primarily due to friction at the rotor component interfaces, and it can be
modeled using any of the damping models described above. When the power inserted by internal damping
exceeds the power extracted by external damping, the rotor will become unstable. For this instability to
manifest itself the rotor must be operating above a critical speed whose mode shape promotes interfacial
friction and it must be forward whirl (Nelson, 2007).
Controlling Rotor Damping and Circulation
For some practical applications, it is desirable not to include the effect of circulation matrices. In several cases,
it may be cumbersome to define rotor damping separately from the rest of the model. In order to
accommodate these practical scenarios, a new parameter called “ RDBOTH(695) ” has been introduced using the
Bulk Data entry MDLPRM . This parameter can be define in the Bulk data using the following format:
MDLPRM RDBOTH N
where N = 0 (default),1 or 2. Changes made in the analysis for different values of N are described below:
Linear Bearings
Connections between rotor and stator (to simulate bearings) or from rotor to rotor (to simulate gears) can be
made using scalar elements, like CELASi and CDAMPi, and bushing element CBUSH.
Scalar Elements
Scalar elements are connected between pairs of degrees of freedom (at either scalar or geometric grid points)
or between one degree of freedom and ground. Scalar elements are available as springs and viscous dampers.
Scalar spring elements (CELASi) are useful for representing elastic properties that cannot be conveniently
modeled with the usual structural elements (elements whose stiffnesses are derived from geometric
properties). The scalar damper (CDAMPi) is used to provide viscous damping between two selected degrees
of freedom or between one degree of freedom and ground.
The most general definition of a scalar spring is given with a CELAS1 entry. The associated properties are
given on the PELAS entry. The properties include the magnitude of the elastic spring, a damping coefficient,
and a stress coefficient to be used in stress recovery. The CELAS2 defines a scalar spring without reference to RDBOTH Parameter to select Rayleigh damping approach as implemented in V2005, Integer. A
cumulative sum can be provided in case more than one feature are desired in the analysis.
0 Uses current implementation for Rayleigh Damping as described in
RSPINR/RSPINT entry description (Default)
1 Switch to V2005 implementation of Rayleigh damping where damping coefficients
specified in the model through “PARAM, ALPHA1” and “PARAM, ALPHA2” are
applied to the complete model and Rayleigh damping specified through
“ALPHAR1” and “ALPHAR2” in RSPINR/RSPINT is set to 0.0.
2 Ignore circulation effects in rotordynamic analysis.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Linear Bearings86
Main Index
a property entry. The CELAS3 entry defines a scalar spring that is connected only to scalar points, and the
properties are given on a PELAS entry. The CELAS4 entry defines a scalar spring that is connected only to
scalar points and without reference to a property entry. No damping coefficient or stress coefficient is
available with the CELAS4 entry. Element force is calculated from the equation:
F = k  (u1 - u2)
where “ k” is the stiffness coefficient for the scalar element and “ u1”is the displacement of degree of freedom
i listed on its connection entry. Element stresses are calculated from the equation
 = S F
where “ S” is the stress coefficient on the connection or property entry and is as defined above.
Grounded connections are indicated on the connection entry by leaving the appropriate scalar identification
number blank. The CDAMP1, CDAMP2, CDAMP3, CDAMP4, and CDAMP5 entries define scalar
dampers in a manner similar to the scalar spring definitions. The associated PDAMP entry contains only a
value for the scalar damper .
BUSH Elements
The generalized spring-damper element CBUSH is a structural scalar element connecting two noncoincident
grid points, or two coincident grid points, or one grid point to ground using an associated PBUSH entry for
properties. This combination is valid for any structural solution sequence. T o make the PBUSH frequency
dependent it need only have an associated PBUSHT Bulk Data entry. The PBUSHT entry, for frequency
dependency, is only used in SOL 108 and SOL 111. The stiffness matrix for the CBUSH element takes the
diagonal form in the element system.
Cross Coupling in Bearing Supports
Consider the example where a grid with ID 91 is connected to ground using a 2-D spring which has
cross-stiffness terms. Cross coupling terms for modeling bearings can be introduced in the analysis using one
of the three approaches:
Figure 4-1  Model with cross-coupled spring
a. CROSS Option in PBUSH2D (introduced in V2018)&lt;/p&gt;
&lt;p&gt;87 Chapter 4: Damping and Bearing Models
Linear Bearings
Main Index
PBUSH2D property card.
PBUSH2D card can now process 2x2 inertia properties in addition to existing stiffness and damping terms.
Remarks:
1.Mass terms M11, M22, M12 and M21 are new options to enter 2x2 Inertia terms.
2.Coefficients K11, K22, B11, B22, M11, M22, K12, K21, B12, B21, M12 and M21 specified in the
PBUSH2D entry are REAL and are the nominal value. They are treated as constant values
throughout the analysis. This nominal property definition will be used in linear statics, normal
modes, reduction, and superelement processing. The PBSH2DT and ELEMUDS entries can be used
to provide frequency dependent terms for use inside frequency loops. If the ELEMUDS is used with
CBUSH2DA in the UNAME field, the UDS will calculate the nominal values using the NMLSPD
from the ELEMUDS entry.
a.CROSS Option in PBUSH2D (introduced in V2018)
Example:
CBUSH2D 201     211     91  1092 0 XY
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9.
PBUSH2D 211     4.455+8 7.788+8 0.2     0.2     30.0    60.0
CROSS   6.000+6 5.000+6 0.15    0.15    10.0    10.0
Here, grid 1092 is connected to ground. 1 2 3 4 5 6 7 8 9 10
PBUSH2D PID K11 K22 B11 B22 M11 M22
CROSS K12 K21 B12 B21 M12 M21
Describer Meaning
PID Property identification number. (Integer &amp;gt; 0; required)
CROSS Indicates that the cross coupling terms will be provided
K11, K22 Diagonal stiffness terms
B11, B12 Diagonal damping terms
M11, M22 Diagonal mass terms
K12, K21 Cross coupling stiffness terms
B12, B21 Cross coupling damping terms
M12, M21 Cross coupling mass terms&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Linear Bearings88
Main Index
b. DMIG approach
c. Rotated CBUSH approach (can only be used for symmetric matrices)
PBSH2DT property card.
Defines frequency dependent properties of a two-dimensional element (CBUSH2D) using TABLED1
lookup.
Format:
1 2 3 4 5 6 7 8 9 10
PBSH2DT PID “K” K11 K22 K12 K21
“B” B11 B22 B12 B21
“M” M11 M22 M12 M21
Describer Meaning
PID Property id of a PBUSH2D entry (see Remarks: )
K11 TABLED1 used to define frequency dependent stiffness in the T1 direction (Integer &amp;gt;0 or
blank)
K22 TABLED1 used to define frequency dependent stiffness in the T2 direction (Integer &amp;gt;0 or
blank)
K12 TABLED1 used to define frequency dependent cross coupling stiffness (Integer &amp;gt;0 or blank)
K21 TABLED1 used to define frequency dependent cross coupling stiffness (Integer &amp;gt;0 or blank)
B11 TABLED1 used to define frequency dependent damping in the T1 direction (Integer &amp;gt;0 or
blank)
B22 TABLED1 used to define frequency dependent damping in the T2 direction (Integer &amp;gt;0 or
blank)
B12 TABLED1 used to define frequency dependent cross coupling damping (Integer &amp;gt;0 or blank)
B21 TABLED1 used to define frequency dependent cross coupling damping (Integer &amp;gt;0 or blank)DMIG STIF  0  1  1&lt;br&gt;
DMIG  STIF  91  1   91  1  3.503+7
91 2  8.756+6  DMIG  STIF  91  2   91  1  8.756+6
91 2  3.503+7
CBUSH   202     211     91                                &lt;br&gt;
PBUSH   211      K      2.627+7 2.627+7 CORD2R 1 0 0. 0. 0. 0. 0.   1.   1. 1. 0. CBUSH   204     212     91                                   PBUSH   212      K      1.751+7&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P6</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_006/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_006/</guid>
      <description>
        
        
        &lt;p&gt;89 Chapter 4: Damping and Bearing Models
Linear Bearings
Main Index
Remarks:
1.A PBUSH2D with the same PID must exist. The values from the PBUSH2D will be used as the
nominal stiffness, damping, and mass. Linear statics, normal modes, reduction, and superelement
processing will use the nominal values. The values from the selected TABLED1 entries will be used
in any frequency dependent loop. These values will be obtained by interpolation or extrapolation, if
frequency of interest does not match with TABLED1 entry.
2.Any field left blank indicates that the associated stiffness, damping, or mass is not frequency
dependent and the nominal values will be used for that term in the solution.
Example:
Refer to sol108_pbsh2dt.dat  in ..\tpl\pbush2d  directory.
CBUSH2D 202     211     1111    1112    0       XY
PBUSH2D 211     4.455+8 7.788+8 0.2     0.2     30.0    60.0
CROSS   6.000+6 5.000+6 0.15    0.1     15.0    10.0
PBSH2DT 211     K       601     602             612
B       603     604     613     614
M       605     606     615     616
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
TABLED1 601&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     3.455+8 2.0     3.555+8 100.0   3.655+8 ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 602&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     6.788+6 2.0     6.888+6 100.0   6.988+6 ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 603&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     0.1     2.0     0.11    100.0   0.12    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 604&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     0.1     2.0     0.11    100.0   0.12    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 605&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     21.0    2.0     22.0    100.0   23.0    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 606&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     51.0    2.0     52.0    100.0   53.0    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
TABLED1 611&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     5.000+6 2.0     5.100+6 100.0   5.200+6 ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 612&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     4.000+6 2.0     4.100+6 100.0   4.200+6 ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 613&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     0.07    2.0     0.08    100.0   0.09    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 614&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     0.05    2.0     0.06    100.0   0.07    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 615M11 TABLED1 used to define frequency dependent mass in the T1 direction (Integer &amp;gt;0 or
blank)
M22 TABLED1 used to define frequency dependent mass in the T2 direction (Integer &amp;gt;0 or
blank)
M12 TABLED1 used to define frequency dependent cross coupling mass (Integer &amp;gt;0 or blank)
M21 TABLED1 used to define frequency dependent cross coupling mass (Integer &amp;gt;0 or blank)Describer Meaning&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Nonlinear Bearings90
Main Index&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     10.0    2.0     11.0    100.0   12.0    ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TABLED1 616&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre&gt;&lt;code&gt;  1.0     7.0     2.0     8.0     100.0   8.0     ENDT
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3. &amp;hellip;&amp;hellip;4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
Nonlinear Bearings
Currently, MSC Nastran does not support nonlinear analysis for Rotordyn amics where the nonlinearity is
related to material property, geometry, and contact. However, in transient response, it is possible to include
the effect of nonlinear bearing forces. Nonlinear bearings that can be used for rotordynamic analysis are
briefly described here. Further details are available in MSC Nastran Dynamic Analysis User’s Guide .
Nonlinear bearings are basically elastic elements with nonlinear force-deflection relationships. Some of these
elements also exhibit nonlinearities proportional to the velocity. For the elements described here, the pseudo-
force method is used in MSC Nastran where the deviations from linearity are treated as additional applied
loads. The dynamic equations of motion can be written as:
where, [ M], [B] and [ K] are system mass, damping and stiffness matrices respectively. Note that the [ B] and
[K] matrices shown here include all the rotordynamic related terms. The vectors {P(t)}  and {g(t)} denote
applied nodal loads (linear) and system displacements respectively, as functions of time. The vector {N(t)}
denotes nonlinear force produced by bearing elements.
Nonlinear Gap, NLRGAP
The NLRGAP entry allows you to model contact between two coaxial cylinders; for example, a shaft and its
housing.
The description of the NLRGAP bulk data entry is shown in Figure 4-2. The NLRGAP is an idealization of
the contact between any circular shaft enclosed by a circular housing ( Figure 4-3). In this idealization, grid
point A represents the outer surface of the shaft while grid point B represents the inner surface of the housing.
Grid points A and B are required to be coincident and must have a parallel displacement coordinate system.
A rudimentary friction capability is included to account for the friction induced torque and friction induced
lateral loads that occur with a spinning shaft. However, friction can be neglected, in which case the solution
is consistent with that for a nonrotating shaft in a frictionless housing.
The contact stiffness can be input either as a function of time or as a function of penetration. In both cases,
the stiffness curves are input on TABLEDi Bulk Data entries which are referenced by the NLRGAP entry.
Entering stiffness as a function of time allows the user to model special situations where structural changes
over time cause the contact stiffness to vary over time. Entering stiffness as a function of penetration allows
the user to input a nonlinear stiffness curve which might be required, for example, if the shaft or housing were
covered by some nonlinear elastic material.  As with stiffness, both the coefficient of friction and the clearance
can be functions of time. The time-varying coefficient of friction might be used where the quality of
lubrication varies with time, or if experimental data shows that the surface characteristics of the shaft and
housing vary with time. The clearance can be input as a function of time to model situations where an
accelerating, spinning rotor expands due to centripetal loads.
The NLRGAP entry can also approximate the torque on the shaft and housing due to friction. If this effect
is desired, the RADIUS field of the NLRGAP must be specified. If not specified, then friction effects will still Mg··t Bg·t Kgt + + Pt Nt + =&lt;/p&gt;
&lt;p&gt;91 Chapter 4: Damping and Bearing Models
Nonlinear Bearings
Main Index
be included in the lateral loads. The torque loads will not be computed nor applied if RADIUS is input as
0.0 or left blank . As with the NOLINs, the NLRGAP is selected by the NONLINEAR Case Control
command.
Figure 4-2  NLRGAP  Bulk Data Entry
Figure 4-3  NLRGAP Implementation
The equations underlying the NLRGAP measure the relative radial displacement between the shaft grid (Grid
A) and the housing grid (Grid B) in the displacement coordinate system. When the relative radial
displacement is greater than the clearance (i.e., when contact has occurred), contact forces as well as frictional
forces are automatically applied to the grids. The contact and frictional forces are dependent on the contact
stiffness and the coefficient of friction.
Variables used in the analysis are described below:
K(t,u ) Contact stiffness, function of time or displacement.
G(t) Radial clearance, function of time.
(t) Coefficient of friction, function of time. Positive value implies shaft rotation from axis 1 towards
axis 2.
R Shaft radius for friction induced torque calculation.Defines a nonlinear radial (circular) gap for transient response or nonlinear harmonic response.
Format:NLRGAP Nonlinear Load Proportional to Gap
1 2 3 4 5 6 7 8 9 10
NLRGAP SID GA GB PLANE TABK TABG TABU RADIUS
&amp;ldquo;GAMMA&amp;rdquo; SMVAL&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Nonlinear Bearings92
Main Index
It is helpful to visualize Grid A as belonging to the shaft and Grid B as belonging to the housing. Consider
each grid to have DOF 1 and 2 in the plane of action (e.g., DOF 1 = X and DOF 2 = Y for XY orientation).
The element relative displacement in directions 1 and 2 are:
U1 = UA1 - UB1
U2 = UA2 - UB2
The relative radial displacement is:
The force in the gap when it is open ( r ≤ G(t ) ) is zero. When the gap is closed ( r &amp;gt; G(t )), the penetration is
defined as:
P = r - G(t )
The nonlinear gap forces (S) are given by:
When transformed to the grid point coordinate system in direction 1 and 2, the nonlinear forces produced
by the NLRGAP element are given by:
If the shaft radius R is input, then the following friction induced torque loads are also generated. The
expression for torque is given by (acting along 6th component for the force vector):
•Smoothing function feature is supported only for SOL128 solution.
•GAMMA is a new option to specify the flag to use smoothing function option for NLRGAP
element.
•SMVAL is the smoothing function value to be used. It is recommended to use a value of 1E+06.“GAMMA” Keyword flag to identify usage of Smoothing function (CHAR)
SMVAL Smoothing function value. (Real &amp;gt;0, Default=1.E0+6)r U12 U22+ =
S Ktu(,)1Gt
r&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; –  =
NA1-U1SU2St + =
NB1-NA1U1SU2St – = =
NA2-U2SU1St – =
NB2-NA2U2SU1St + = =
NA6-RrSt =
NB6-NA6RrSt = =&lt;/p&gt;
&lt;p&gt;93 Chapter 4: Damping and Bearing Models
Nonlinear Bearings
Main Index
•UFM will be issued if TABLED5 is used in TABK field when using smoothing function.
When user input to turn on smoothing function, NLRGAP load is active when, reldisp &amp;gt; initial gap - radial
displacement.
Equations used for Smoothing function:
The GH1 is multiplied with TABK table interpolated value to obtain the non-linear force for the frequency
step being solved.
When the gap between GA to GB grid is closed, the non-linear load will be smoothened as shown below
picture. It can be observed that till the gap is about to be closed, the GH1 value will remain zero.Relative displacement: x = u - v  (calculated value)
Smoothing factor:  User input in NLRGAP definition
Gap (initial): n1 TABG in NLRGAP definition
frc n1&lt;em&gt;1
&amp;mdash;&lt;em&gt;atan&lt;/em&gt;-n1  0.5+  =
GH1 x&lt;/em&gt;1
&amp;mdash;&lt;em&gt;atan&lt;/em&gt;x  0.5+  frc+ =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Nonlinear Bearings94
Main Index
The smoothing function enables the smoothing of the slope at the instant of gap closure, NLRGAP
engagement. This small change in slope enables convergence during iteration of the frequency step being
solved.
Frequency Dependent Coefficients
It is possible to define a user-defined SCA-object to calculate properties of CBUSH2D elements in SOLs 128,
129, and 400. The user interface for the user-defined properties of a CBUSH2D consists of the associated
PBUSH2D and an ELEMUDS entry, which defines the data which is to be passed to the user routine. In
addition, the SCAservice must be attached to the run using the CONNECT SERVICE statement, as shown
here in the FMS (File Management) section:
CONNECT SERVICE GR1 ‘SCR.MDSolver.Obj.Uds.Elements. cbush2d’
The format for ELEMUDS is shown in Format for ELEMUDS  Entry   and this entry as part of a test deck for
rotordynamic analysis is shown in  and Figure 4-5.
User interface CBUSH2DA with SCA-UDS includes inertia terms in the analysis. Available in:
•linear asynchronous complex eigenvalue analysis (SOL107 and SOL110)
•frequency response analysis (SOL 108/ SOL 111 and SOL 128)
•transient analysis (SOL400 only)&lt;/p&gt;
&lt;p&gt;95 Chapter 4: Damping and Bearing Models
Nonlinear Bearings
Main Index
Format for ELEMUDS  Entry&lt;br&gt;
1 2 3 4 5 6 7 8 9 10
ELEMUDS PID PTYPE GROUP UNAM
EDEPEN NMLSPD
“INT” IDATA1 IDATA2 IDATA3 IDATA4 IDATA5 IDATA6 IDATA7
IDATA8 IDATA9 &amp;hellip; &amp;hellip; IDATAn
“REAL” RDATA
1RDATA2 RDATA
3RDATA4 RDATA5 RDATA6 RDATA7
RDATA
8RDATA9 &amp;hellip; &amp;hellip; RDATAn
“CHAR
”CDATA
1CDATA
2&amp;hellip; &amp;hellip; CDATAn
Describer Meaning
PID Element property identification number that matches the identification number on a
PBUSH2D element property entry. (Integer &amp;gt; 0)
PTYPE The name of the element entry. Currently supported element property entry is:
PBUSH2D. (Character; no Default)
GROUP The group name used for the FMS section CONNECT SERVICE statement. (Character;
no Default)
UNAME User subroutine name associated with the entry. See remarks for details.
DEPEN Specifies if element is frequency dependent. DEPEN=NOM or blank; user element is not
frequency dependent. DEPEN=FREQ; user element is frequency dependent. (Character
default=NOM)
NMLSPD Nominal speed (cycles per second) used by the CBUSH2DA service call to calculate
nominal stiffness, mass and damping terms. Nominal terms will be used during reduction
and real eigenvalue solutions. In a frequency dependent problem, updated values will be
calculated at each frequency.
“INT” Keyword indicating that the following data is integer. (Character)
IDATAi Additional user supplied Integer data not already existing on the specified property entry.
(Integer; no Default)
“REAL” Keyword indicating that the following data is real. (Character)
RDATAi Additional user supplied Real data not already existing on the specified property entry.
(Real; no Default)
“CHAR” Keyword indicating that the following data is Character. (Character)
CDATAI Additional user supplied Character data not already existing on the specified property
entry. (Character; no Default)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Nonlinear Bearings96
Main Index
Remarks:
1.This entry triggers the call to a user-defined subroutine.
2.New service call is cbush2da  in the UNAME field.
3.The GROUP must match the GROUP field of the CONNECT SERVICE FMS statement.
4.Use CONNECT SERVICE xxxxx &amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.cbush2da&amp;rsquo; at FMS
definition. (Replace xxxxx with your service name used in the group field).
5.Multiple ELEMUDS with different PID, each calling the new cbush2da service are allowed.
6.NMLSPD is a new option to specify the NOMINAL SPEED of the rotor for analysis. When
UNAME is CBUSH2DA, the Nominal REAL Values (2x2 K, B, M) are determined based on
NMLSPD for use in the analysis. Nominal properties will be used in linear statics, normal modes,
reduction, and superelement processing.
7.For frequency dependent conditions, the frequency dependent values (K, B, M) will be used.
Internally, the program will calculate the difference between the frequency dependent values and the
nominal values and add those to the original matrices).
Example 1:
Refer to nuds_s107_cb2da.dat  in ..\tpl\uds  directory.
CONNECT SERVICE TESTF &amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.cbush2da&amp;rsquo;
DIAG 8,15,16,56
SOL 107
$
CEND
…
BULK DATA
CBUSH2D 202     211     1111    1112    0       XY
PBUSH2D 211     0.0     0.0
ELEMUDS 211     PBUSH2D TESTF   cbush2daFREQ    5.0
char    freq    k11     k12     k21     k22
c11     c12     c21     c22
m11     m12     m21     m22
real       0.   3.389+8 2.000+6 3.000+6 5.788+8
0.12    0.06    0.09    0.12
30.0    10.0    15.0    60.0
50.   4.455+8 5.000+6 6.000+6 7.788+8
0.2     0.1     0.15    0.2
30.0    10.0    15.0    60.0
200.   6.455+9 7.250+7 8.850+7 7.348+9
0.1     0.17    0.19    0.22
30.0    10.0    15.0    60.0
300.   9.895+9 9.000+7 8.000+7 9.788+9
0.2     0.23    0.28    0.3
30.0    10.0    15.0    60.0
…
ENDDATA
Figure 4-4  Example nuds_s107_cb2da
Example 2:&lt;br&gt;
Refer to nuds_s400_cb2da.dat  in ..\tpl\uds  directory.&lt;/p&gt;
&lt;p&gt;97 Chapter 4: Damping and Bearing Models
Nonlinear Bearings
Main Index
CONNECT SERVICE TESTF &amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.cbush2da&amp;rsquo;
DIAG 8,15,16,56,30 $
SOL 400
$
CEND
TITLE = GYROSCOPIC INFLUENCE OF A RIGID DISK ROTATING ON A SHAFT
ANALYSIS = NLTRAN
…
BEGIN BULK
&amp;hellip;
CBUSH2D 203     203      1112    1113    0       XY
PBUSH2D 203     0.0      0.0
ELEMUDS 203     PBUSH2D  TESTF   cbush2daFREQ    20.
int     10001    10002   10003   10004   10005
char    freq     k11     k12     k21     k22
real    10.      4.455+8 6.000+6 6.000+6 7.788+8
0.2     0.15    0.15    0.2
30.0    10.0    15.0    60.0
15.      6.455+9 7.250+7 8.850+7 7.348+9
0.1     0.17    0.19    0.22
70.0    50.0    65.0    90.0
20.      5.455+8 7.000+6 7.000+6 8.788+8
1.2      1.15   1.15    1.2
40.0    25.0    25.0    70.0
50.      9.895+9 9.000+7 8.000+7 9.788+9
0.2     0.23    0.28    0.3
85.0    35.0    55.0    65.0
…
ENDDATA
Figure 4-5  Example nuds_s400_cb2da
The new FORTRAN subroutine ext_cbush2da.F  has been created to work when the ELEMUDS has
UNAME= cbush2da. Features are added to return 2x2 mass terms in addition to stiffness and damping terms.
!***********************************************************************
!****                NEW CBUSH2Da format (with MASS)                ****
!***********************************************************************
!
subroutine ext_CBUSH2Dadv(flag, nomlkbm, nmlspd, freqva, ref_speed,
+             iarray, rarray, carray,
+             len_iarray, len_rarray, len_carray,
+             elid,
+             kxx, kyx, kxy, kyy,
+             cxx, cyx, cxy, cyy,
+             mxx, myx, mxy, myy,
+             error_code)
C
C PURPOSE:
C   THIS ROUTINE RETURNS 2x2 STIFFNESS, DAMPING and INERTIA MATRICES                                            &lt;br&gt;
C
C INPUT ARGUMENT LIST:
C
C    FLAG      : Flag to identify type of analysis.
C                SOL107/110     -&amp;gt; APP4=CEIG -&amp;gt; FLAG=1
C                SOL108/111/128 -&amp;gt; APP4=FREQ -&amp;gt; FLAG=2
C                SOL400         -&amp;gt; APP4=TRAN -&amp;gt; FLAG=3
C    NOMLKBM   : Flag to identify Nominal or Freq dependent cond.
C                = 0 (Nominal condition)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Nonlinear Bearings98
Main Index
C                = 1 (Freq dependent condition)
C    NMLSPD    : Nominal Speed set in ELEMUDS card (7th field)
C    (always     Each ELEMUDS card has separate NMLSPD entry
C     in CPS)    and it is used only for that ELEMUDS/PBUSH2D combination
C
C    FREQVA    : Frequency of Excitation in SOL 108 and SOL 111.
C    (always     Same as the Rotor SPEED for FREQ analysis with SYNC option.
C     in CPS)    Not used in Complex Eigenvalue and Transient analysis.
C
C    REF_SPPED : Reference Rotor Speed in RGYRO card
C    (always     Used in FREQ analysis with ASYNC, Complex Eigenvalue
C     in CPS)    and Transient analysis.
C
C
C&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
C BELOW TABLE SHOWS SPEED/FREQUENCY USED UNDER DIFFERENT RGYRO SETTINGS
C&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
C    ANALYSIS         | RGYRO SYNFLAG  |  WHICH FREQUENCY
C    TYPE             | SETTING        |  /SPEED USED
C &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
C    FREQ RESP        | SYNC           |  FREQ   : Units in CPS
C    (SOL108,111,128) | ASYNC          |  SPEED  : Units in CPS
C    1. For Frequency response analysis with synchronous excitation,
C       excitation frequency is equal to spin rate of reference rotor
C    2. For Frequency response analysis with asynchronous excitation,
C       spin rate is constant and equal to rotation speed of reference rotor
C &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
C    CEIG             | SYNC           |  SPEED  : Units in CPS
C    (SOL107,110)     | ASYNC          |  SPEED  : Units in CPS
C    1. For Complex modes analysis with synchronous excitation,
C       calculated Critical speed is equal to spin rate of reference rotor
C    2. For Complex Eigenvalue analysis with asynchronous excitation,
C       spin rate is constant and equal to rotation speed of reference rotor
C    3. If CAMPBELL call is used, SPEED is set from DDVAL table.
C &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
C    TRANSIENT        | SYNC           |  NOT ALLOWED
C    (SOL400)         | ASYNC          |  SPEED  : Units in CPS
C    1. For Transient analysis with asynchronous excitation,
C       spin rate is constant and equal to rotation speed of reference rotor
C &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-
C
C    IARRAY          : Integer Input Array
C    LEN_IARRAY      : Length of Integer Input Array             &lt;br&gt;
C    RARRAY          : Real Input Array
C    LEN_RARRAY      : Length of Real Input Array
C    CARRAY          : Character Input Array
C    LEN_CARRAY      : Length of Character Input Array
C    ELID            : ELEMENT ID                      &lt;br&gt;
C
C OUTPUT ARGUMENT LIST:
C    KXX,KXY,KYX,KYY : 2x2 ELEMUDS OUTPUT STIFFNESS MATRIX
C    KXX,KXY,KYX,KYY : 2x2 ELEMUDS OUTPUT STIFFNESS MATRIX
C    KXX,KXY,KYX,KYY : 2x2 ELEMUDS OUTPUT STIFFNESS MATRIX
C
C    ERROR_CODE : Return/Error Code
C&lt;/p&gt;
&lt;p&gt;99 Chapter 4: Damping and Bearing Models
Nonlinear Bearings
Main Index
NLRSFDA UDS CONNECT SERVICE.
New user interface NLRSFDA with SCA-UDS includes acceleration terms to be passed to external routine.
Available in:
•Nonlinear frequency response analysis (SOL 128) and
•Transient analysis (SOL400 only)
Format:
Remark:
1.New service call is NLRSFDA in NAME2 field.
2.All values will be passed to external subroutine
A new FORTRAN routine, ext_nlrsfda.F , is created to work when a NLRSFD Bulk Data entry has NAME2=
nlrsfda. Features are added to process accelerations in addition to displacement and velocities of GA and GB.
subroutine EXT_NLRSFDA(sid, ga, gb, plane, bdia, blen, bclr, soln,
&amp;amp;             visco, pvapco, nport, pres1, theta1, pres2, theta2,
&amp;amp;             npnt, offset1, offset2, evalname, time, xx, yy, xdt,
&amp;amp;             ydt, xdtt, ydtt, xb, yb, xbt, ybt, xbtt, ybtt, fx, fy,
&amp;amp;             fuseit, bisect, parm1, parm2, parm3, parm4, parm5,
&amp;amp;             parm6, parm7, parm8, omega)
C     XX        REAL/SCALAR      ROTOR JOINT (I-END) HORIZONTAL DISPL.
C     YY        REAL/SCALAR      ROTOR JOINT (I-END) VERTICAL DISPL.
C     XDT       REAL/SCALAR      ROTOR JOINT (I-END) HORIZONTAL VELOCITY.
C     YDT       REAL/SCALAR      ROTOR JOINT (I-END) VERTICAL VELOCITY.
C     XDTT      REAL/SCALAR      ROTOR JOINT (I-END) HORIZONTAL ACC.
C     YDTT     REAL/SCALAR      ROTOR JOINT (I-END) VERTICAL ACC.
C     XB        REAL/SCALAR      STATOR JOINT (J-END) HORIZONTAL DISPL.
C     YB        REAL/SCALAR      STATOR JOINT (J-END) VERTICAL DISPL.
C     XBT       REAL/SCALAR      STATOR JOINT (J-END) HORIZONTAL VELOCITY.
C     YBT       REAL/SCALAR      STATOR JOINT (J-END) VERTICAL VELOCITY.
C     XBTT      REAL/SCALAR      STATOR JOINT (J-END) HORIZONTAL ACC.
C     YBTT      REAL/SCALAR      STATOR JOINT (J-END) VERTICAL ACC.
Example:
Refer to e1_400_nlrsfda.dat  in ..\tpl\uds  directory.
CONNECT SERVICE TESTNLR &amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.Nlrsfda&amp;rsquo;
SOL 400
diag 8,15,16,56
CEND
RIGID = LINEAR
ANALYSIS = NLTRAN
…1 2 3 4 5 6 7 8 9 10
NLRSFD SID GA GB PLANE BDIA BLEN BCLR SOLN
VISCO PVAPCO NPORT PRES1 THETA PREA2 THETA2 NPNT
PFFSET1 OFFSET2 GROUPNAME NAME2
RDATA1 RDATA2 RDATA3 RDATA
4RDATA5 RDATA6 RDATA7 RDATA8&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Nonlinear Bearings100
Main Index
BEGIN BULK
…
nlrsfd  40      911     912     xy      11.     12.     13.     long    &lt;br&gt;
14.     15.     2       17.     18.     19.     20.     21     &lt;br&gt;
22.     23.     testnlr nlrsfda
100.    200.0   3.      4.      5.      6.      7.      8.
…
ENDATA
Pre-requisites
The user needs the following pre-requisites:
Python 3.5  or above
MSC SDK 2020 Installer or above
MSC Nastran 2020 Installer or above
The Python path in the Environment Variable needs to be specified as in the following image:
The following Intel C++ and Intel Fortran versions are also required:
For Linux:
•Version 19.0.4.243 or above of Intel C++
•Version 19.0.4.243 or above of Intel Fortran
For Windows:
•Version 15.9.5 or above of Microsoft C++ (Microsoft Visual Studio 2017)
•Version 19.0.4.243 or above of Intel Fortran (Intel Parallel Studio XE 2019)
•Version v4.7.03056 or above of Microsoft .NET Framework
The following installations need to be done at the locations:
1.Install MSC SDK 2020 or above separately (preferably at the default location).
2.Install MSC Nastran 2020 or above separately (preferably at the default location).&lt;/p&gt;
&lt;p&gt;101 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
After all required installations are complete, follow the instructions as below:
User Defined Services Examples Delivered with MSC
Nastran by Utilizing the MSC Software Development Kit
(SDK)
Windows - Demonstrating using Simplified UDS - Nastran 2020 and SDK
2020
The procedure described below provides a description of how to compile and run the user defined services
examples delivered with MSC Nastran by utilizing the MSC Software Development Kit (SDK). The
procedure uses a Python Script that is included as a part of the MSC Nastran Installation Program.
1.Ensure that Python 3.5 and above, SDK 2020 and MSC Nastran 2020 are installed.
Make sure that the Python path is specified in the Environment Variable, as shown below:
2.nast_uds.py  and nast_uds.rcf are only for traditional (non-simplified) UDS  method.
3.uds_append_lib.rcf  is for simplified UDS  method, and only if shared library is required.
4.You can use either of the methods, but not both at the same time.
Perform the following steps:
A.Install SDK 2020
B.Install MSC Nastran 2020
C.Build UDS using either:
a.Non-Simplified UDS (Traditional) Method
C.1.1.1  Compiling the MSC Software Development Kit (SDK)
C.2.1.1  Running the Nastran Deck that requires User Defined Service to be invoked
b.Simplified UDS method [to be executed after steps A, and B].&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)102
Main Index
A. Install SDK 2020
1.Install the SDK 2020 (following assumes it is at the default location. If you do not install at the default
location, you will need to modify the steps to use your installation directory): C:\Program
Files\MSC.Software\SDK\2020 .
2.After the installation of SDK 2020, verify that the File Explorer shows 2020  directory at the location
C:\Program Files\MSC.Software\SDK .
3.For more input on the Contents and Services of the SDK Installer refer to the MSC Nastran User
Defined Services User Guide  and Ap.A: Quick Start&lt;/p&gt;
&lt;p&gt;103 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
B. Install MSC NASTRAN 2020
1.Install MSC Nastran 2020 (preferably at the default location): C:\Program
Files\MSC.Software\MSC_Nastran\2020 . This is referred as an INSTALL_DIR  for further
references in this document.
2.After the installation of Nastran 2020 verify that the File Explorer shows the 2020  directory at the
location INSTALL_DIR .&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)104
Main Index
3.Verify that the installation contains SAMPLE  directory at \INSTALL_DIR\
msc20200\nast\services\Implementations ,
4.The SAMPLE  directory contains following files:
•nast_uds.rcf:  This configuration file contains the definitions of Working Directory, External
Subroutines, Nastran Program Installation Path and SDK Program Installation Path. This is used
by the nast_uds.py  to generate the pre-requisites.
•uds_append_lib.rcf : This configuration file is used to specify specific DLLs or Shared
Library files.
•nast_uds.py : This file is used to run using command prompt on windows to generate the pre-
requisites.
5.These files are Read-Only. These are the sample files provided to modify the User Defined Services
and use them in MSC Nastran. It is recommended that you copy these files to a local directory and
update the paths as required. Remember to remove the Read-only attribute.&lt;/p&gt;
&lt;p&gt;105 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
C. Non-Simplified UDS (Traditional) Method
C.1.Compiling the MSC Software Development Kit (SDK)
1.Copy the files from the SAMPLE  directory (refer to steps 4 and 5 of B. Install MSC NASTRAN 2020 ) to a
local directory, say, E:\Scratch\Demo-PyhthonScript . Ensure that the read-only attributes of
the files in this directory are removed.
2.Open nast_uds.rcf  file and define the Working Directory, External Subroutines, Nastran
Program Installation Path and SDK Program Installation Path.
3.Set the Working Directory, for purposes of this example, WorkDir = E:\Scratch\Demo-
PyhthonScript\sdk2020_Nastran2020  (Note that the Working Directory should not have
Spaces in its name).
4.Make sure that the Working Directory (for this example) sdk2020_Nastran2020  does not exist in
the location: E:\Scratch\Demo-PyhthonScript .
5.Set the External Subroutine(s) directory (for this example), extSUB = E:\Scratch\Demo-
PyhthonScript\ext-routines&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)106
Main Index
6.The directory ext-routines  contains one or more of the user files, for example, ext_cbush2d.F&lt;br&gt;
and ext_nlrsfd.F .
7.Set the NastDir (Nastran Directory) [or MSC_BASE], [refer to the path from the B. Install MSC
NASTRAN 2020 ].
NastDir = INSTALL_DIR\2020
8.Set the SdkDir (SDK Directory), [refer to the path from the A. Install SDK 2020 ]
SdkDir = C:\Program Files\MSC.Software\SDK\2020
9.The sample paths are updated in the nast_uds.rcf  file as follows:
10. Similarly, if you are providing your own DLL or shared library, open the uds_append_lib.rcf&lt;br&gt;
file and specify the path for one or more DLL or Shared Library file names. Note that, if more than
one dll file is to be specified, the file should have a separate line for each file name. The lines started
with a # sign are comments only and will not be read by python program.
Since for the demonstration purpose no extra DLL file is used, it is commented in the
uds_append_lib.rcf file as follows:
11. Run the Python Script, nast_uds.py  as follows:&lt;/p&gt;
&lt;p&gt;107 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
a.Open the Command Prompt,
b.Browse to location E:\Scratch\Demo-PyhthonScript\SAMPLE , and
c.Run the nast_uds.py command: &amp;gt; python nast_uds.py
It will prompt you to provide the configuration file:
12. The default file name is nast_uds.rcf
13. You can either specify this file name or press ENTER .
14. The output describing the paths is provided as follows:
15. When it completes, press ENTER  to exit previous command.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)108
Main Index
16. The sdk2020_Nastran2020  directory is created at E:\Scratch\Demo-PyhthonScript
17. Verify that the Implementation  directory and SConopts, SConscript, and SConstruct files are
copied to E:\Scratch\Demo-PyhthonScript\sdk2020_Nastran2020 .
18. Also verify that the xBLD.bat  and xNAST.bat  files are created.
19. The xBLD.dat  file is used to compile the UDS whereas xNAST.bat  is used to run Nastran decks
that use the User Defined Services. It contains the Environment Variable DX and the command to
use the User Defined Services using the SDK.
20. Using the Command Prompt, go to E:\Scratch\Demo-
PyhthonScript\sdk2020_Nastran2020 .&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P7</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_007/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_007/</guid>
      <description>
        
        
        &lt;p&gt;109 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
21. Run xBLD.bat  file to build the services. The Command Prompt starts building it as follows:
22. It takes around 3 to 5 minutes to build the services. If your build is successful, the final lines in the
command window will resemble the following:
Building Visual Studio project file
sdki8\WIN8664I8_SDK2020_NASTRAN2020_OPT\Implementations\OpenMDO\OpenMDO
.vcxproj
Command execution time:
sdki8\WIN8664I8_SDK2020_NASTRAN2020_OPT\Implementations\OpenMDO\OpenMDO
.vcxproj: 0.016000 seconds
Building Visual Studio solution file sdk2020_Nastran2020.sln
Command execution time: sdk2020_Nastran2020.sln: 0.004000 seconds
scons: done building targets.
Total build time: 328.671000 seconds
Total SConscript file execution time: 39.196000 seconds
Total SCons execution time: 4.715001 seconds
Total command execution time: 284.759999 seconds
Total time to read contents of 668 nodes: 0.364001 seconds
Total time to read 166 SConsign files: 0.000000 seconds
Total time to write 166 SConsign files: 0.482000 seconds&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)110
Main Index
Total of 1 out of 261 InfoCache requests were cached
23. Now you can use the xNAST.bat  file to run MSC Nastran using your UDS. This file has set the
following Environment Variables – DX, SCA_SERVICE_CATALOG, SCA_RESOURCE_DIR,
SCA_LIBRARY_PATH
C.2.Running a Nastran file that requires a User Defined Service to be invoked
When running an input file which requires your UDS, use the xNAST.bat  file to run it. You may copy this
file to any location, say E:\Scratch\Demo-PyhthonScript\Tests  and provide the path of this file to
run the test deck.&lt;/p&gt;
&lt;p&gt;111 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
1.Using command prompt go to E:\Scratch\Demo-PyhthonScript\Tests
For example, a demonstration of using the UDS, CBUSH2D Service, is shown in
test_uds_cbush2d.dat  (located in E:\Scratch\Demo-PyhthonScript\Tests ) which
contains
CONNECT SERVICE TESTF &amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.cbush2d&amp;rsquo;.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)112
Main Index
Linux - Demonstrating using Simplified UDS - Nastran 2020 and SDK 2020
The procedure described below provides a description of how to compile and run the UDS examples
delivered with MSC Nastran by utilizing the MSC Software Development Kit (SDK) on Linux. This
procedure uses a Python Script which is included as a part of the MSC Nastran Installation Program.
1.Ensure that Python 3.5 and above, SDK 2020 and MSC Nastran 2020 are installed.
Make sure that the Python path is specified in the Environment Variable, as shown below:
2.nast_uds.py  and nast_uds.rcf  are only for traditional (non-simplified) UDS  method.
3.uds_append_lib.rcf is for simplified UDS  method, and only if shared library is required.
4.You can use either of the methods, but not both at the same time.
Perform the following steps:
A.Install SDK 2020
B.Install MSC Nastran 2020
C.Build UDS using either:
a.Non-Simplified UDS (Traditional) Method
C.1.1.1  Compiling the MSC Software Development Kit (SDK)
C.2.1.1  Running the Nastran Deck that requires User Defined Service to be invoked
b.Simplified UDS method [to be executed after steps A, and B]
Note: For the confidentiality purpose, the system information is blurred in the images of this
section.&lt;/p&gt;
&lt;p&gt;113 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
A. Install SDK 2020
1.Install the SDK 2020 at (following assumes it is at the default location. If you do not install at the
default location, you will need to modify the steps to use your installation directory):
/msc/SDK/2020 . This is referred as SDK_DIR.
2.After the installation of SDK 2020, verify that the File Explorer shows the 2020 directory at
SDK_DIR/ .
3.For more input on the Contents and Services of the SDK Installer refer to the MSC Nastran User
Defined Services User Guide  and Ap.A: Quick Start .
B. Install MSC NASTRAN 2020
1.Install MSC Nastran 2020 preferably at the default location: /msc/MSC_Nastran/2020 . This is
referred as INSTALL_DIR for further references in this document.
2.After the installation of MSC Nastran 2020, verify that the File Explorer shows the 2020 directory
at INSTALL_DIR.
3.Verify that the installation contains SAMPLE  directory under the location:
/INSTALL_DIR/msc20200/nast/services/Implementations .
4.The SAMPLE  directory contains following files:
•nast_uds.rcf : This configuration file contains the definitions of Working Directory, External
Subroutines, Nastran Program Installation Path and SDK Program Installation Path. This is used
by the nast_uds.py  to generate the pre-requisites.
•uds_append_lib.rcf : This configuration file is used to specify specific .so or Shared Library
files.
•nast_uds.py : This file is used to run using console to generate the pre-requisites.
5.These files are Read-Only. These are the sample files provided to help build the User Defined Services
using the SDK and MSC Nastran Program together. It is recommended that you copy these files to
a local directory and update the paths as required. Remember to remove the Read-only attribute.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)114
Main Index
C. Non-Simplified UDS (Traditional) Method
C.1.Compiling using the MSC Software Development Kit (SDK)
1.Copy the files from the SAMPLE  directory (refer to steps 4 and 5 of B. Install MSC NASTRAN 2020 ) to a
local directory, say, /scratch/user/hostname , Using the chmod u+w for the SAMPLE
directory.
2.Open the nast_uds.rcf  file and define the Working Directory, External Subroutines, Nastran
Program Installation Path and SDK Program Installation Path.
3.Set the Working Directory, for the purpose of this example,
WorkDir = /scratch/user/hostname/sdk2020_nastran2020  [Note that the Working
Directory should not have Spaces in its name].
4.Make sure that the directory sdk2020_nastran2020  does not exist at:
/scratch/user/hostname .
5.Set the External Subroutine(s) directory (for this example), extSUB =
/scratch/user/hostname/ext-subroutine.
6.The directory ext-routines  contains the User Defined Subroutines which you wish to build, for
example, ext_cbush2d.F , ext_nlrsfd.F , ext_nlrsfda.F  and ext_cbush2da . You can
keep multiple Fortran Subroutine files .
7.Set the Nastran installation directory [refer to the path from the STEP B].
NastDir = /msc/MSC_Nastran/2020
8.Set the MSC SDK installation directory, [refer to the path from the STEP A]
SdkDir = /msc/SDK/2020&lt;/p&gt;
&lt;p&gt;115 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
9.The sample paths are updated in the nast_uds.rcf  file as follows:
10. Similarly, open the uds_append_lib.rcf  file and specify the path for one or more .so or Shared
Library file names. Note that, if more than one .so files are to be specified, it should be written in
additional line for each file name. The lines that start with a # sign are comments only and will not
be read by python program. Since for demonstration purpose no extra .so files or shared libraries are
used, it is commented in the uds_append_lib.rcf  file as follows:
11. Run the Python Script, nast_uds.py  as follows:
a.Open the Console,
b.Browse to location /scratch/user/hostname/SAMPLE , and
c.Run the nast_uds.py  command: /usr/local/bin/python3 nast_uds.py
It will prompt you to provide the configuration file:
12. The default file name is nast_uds.rcf
13. You can either specify this file name or press ENTER .&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)116
Main Index
14. The output describing the paths is provided as follows:
15. When it completes, press ENTER  to exit the previous command.
16. It creates the sdk2020_Nastran2020  directory at /scratch/user/hostname
17. Verify that the Implementation  directory and SConopts, SConscript, and SConstruct files have
been copied to /scratch/user/hostname/sdk2020_nastran2020/Implementations .
18. Also verify that the xBLD.ksh  and xNAST.ksh  files are created.
19. The xBLD.dat  file is used to compile required services whereas xNAST.ksh  file is used to run the
Nastran Deck that use the User Defined Services.
20. Using the console, go to /scratch/user/hostname/sdk2020_nastran2020  directory.&lt;/p&gt;
&lt;p&gt;117 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
21. Run the xBLD.ksh  file to build the intended services. The console starts building it as follows:
22. If your build is successful, the final lines in the command window will resemble the following:
Command execution time:
sdki8/apps_local/LX8664I8_RHE73/lib/Test/libOpenMDO.so: 0.009823
seconds
Processing SCA manifest
sdki8/apps_local/manifest/LX8664I8_RHE73/Test/OpenMDO
Command execution time:
sdki8/apps_local/manifest/LX8664I8_RHE73/Test/OpenMDO: 0.000247 seconds
scons: done building targets.
Total build time: 93.386053 seconds
Total SConscript file execution time: 3.898234 seconds
Total SCons execution time: 2.418338 seconds
Total command execution time: 87.069482 seconds
Total time to read contents of 637 nodes: 0.099109 seconds
Total time to read 158 SConsign files: 0.000652 seconds
Total time to write 158 SConsign files: 0.101052 seconds
Total of 1 out of 248 InfoCache requests were cachedTotal of 1 out of 237
InfoCache requests were cached&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)118
Main Index
23. Now you can use the xNAST.ksh  file.
C.2.Running a Nastran Deck that requires User Defined Service to be invoked
When running the Nastran deck, you should specify the xNast.ksh  file location.
1.CBUSH2D Service is used in test_uds_cbush2d.dat  located at
/scratch/user/hostname/TestCases , which contains CONNECT SERVICE TESTF
&amp;lsquo;SCA.MDSolver.Obj.Uds.Elements.cbush2d&amp;rsquo;.
2.Go to /scratch/user/hostname/TestCases ; through the console and specify
/scratch/user/hostname/sdk2020_nastran2020/xNAST.ksh
test_uds_cbush2d.dat .
3.Nastran run starts and following status is updated in the console.&lt;/p&gt;
&lt;p&gt;119 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
4.Refer to the directory where the output files are generated.
D. Simplified UDS method [to be executed after steps A, and B]
Using console; Set following Variables:
SDK_DIR: SDK Installation Path for e.g /scratch/user/hostname/SDK/2020/Tools
SHARED_LIB: Specify the .so or shared library files path
/scratch/user/hostname/MSC_Nastran/2020/bin/nast20200 pwb_001a.dat uds=
ext_cbush2d.F
Specify the command NASTRAN_EXE TEST_DECK uds = ext_cbush2d.F udssave=temp1&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)120
Main Index
Nastran will run to completion.&lt;/p&gt;
&lt;p&gt;121 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
NLBSH3D &amp;amp; LBSH3DG nonlinear tabular lookup.
New bulk data cards NLBSH3D &amp;amp; LBSH3DG used to calculate force vs. Deflection/velocity for a given
rotor speed. Available in nonlinear frequency response analysis (SOL128) and nonlinear transient analysis
(SOL400) only.
Defines connectivity of a three-dimensional nonlinear load as a function of relative deflection and velocity of
a grid pair which in turn is a function of rotor speed.
Format:
Remarks:
1.NLBSH3D are selected with the Case Control command NONLINEAR = SID.
2.In order to ensure correct results, GRID points GA and GB must satisfy the following three
conditions:
a.They must both be grid points
b.They must be coincident
c.They must have parallel displacement coordinate systems
The program checks for the above conditions. If they are not satisfied, the program will terminate the
run with an appropriate fatal message.
3.Multiple NLBSH3D may reference the same SID but require different GA, GB grid pairs.
4.Multiple NLBSH3D entries may refer to the same LID independent of SID.
5.Non-linear load is calculated as a function of relative deflection and velocity between GRID points
GA and GB and as function of rotor speed. Current non-linear load = load (deflection (rotor speed)).
Used with LBSH3DG entries to define a nonlinear load.
6.GA and GB must have all 6 DOF in D-set. Both grids should not be dependent on any RBE or MPC
and must not be constrained by an SPC. The program checks for active DOFs of both the grids. If
they are not satisfied, the program will terminate the run with an appropriate fatal message.NLBSH3D Nonlinear 3-dimensional rotor loading
1 2 3 4 5 6 7 8 9 10
NLBSH3D SID GA GB Blank LID-1 LID-2
Describer Meaning
SID Nonlinear load set identification number. (Integer &amp;gt; 0; Required)
GA Inner grid. (Integer &amp;gt; 0; Required)
GB Outer grid. (Integer &amp;gt; 0; Required)
LID-1 Load vs deflection group ID of a LBSH3DG (Integer &amp;gt; 0; Required)
LID-2 Load vs velocity group ID of a LBSH3DG (Integer &amp;gt; 0; Required)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)122
Main Index
Defines the force tables of NLBSH3D nonlinear loads as function of relative displacement or velocity and
current rotor speed.
Format:
FORM = ASYM  (Asymmetric matrix representation)
FORM = DIAG  (Only Diagonal terms representation)
FORM = SYM  (Symmetric matrix representation)LBSH3DG Tables used by an NLBSH3D to find force as function of displacement, velocity and rotor
speed
1 2 3 4 5 6 7 8 9 10
LBSH3DG LID FORM MIN_FREQ MAX_FREQ
P11 P12 P13 P14 P15 P16
P21 P22 P23 P24 P25 P26
P31 P32 P33 P34 P35 P36
P41 P42 P43 P44 P45 P46
P51 P52 P53 P54 P55 P56
P61 P62 P63 P64 P65 P66
1 2 3 4 5 6 7 8 9 10
LBSH3DG LID FORM MIN_FREQ MAX_FREQ
P11 P22 P33 P44 P55 P66
1 2 3 4 5 6 7 8 9 10
LBSH3DG LID FORM MIN_FREQ MAX_FREQ
P11
P21 P22
P31 P32 P33
P41 P42 P43 P44
P51 P52 P53 P54 P55
P61 P62 P63 P64 P65 P66
Describer Meaning
LID Load identification group number for a NLBSH3D. (Integer &amp;gt; 0; Required)
FORM Type of Input Curves. (Character; Default SYM)&lt;/p&gt;
&lt;p&gt;123 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
Remarks:
1.Values for the nonlinear forces will be determined using interpolation based on rotor speed and
relative deflection/velocity of grid pair. If the rotor speed is beyond the range specified by
MIN_FREQ and MAX_FREQ, a FATAL message will be produced. (Extrapolation will NOT be
used beyond this range).
2.For SYNC analysis, rotor speed is obtained from NLFREQ / NLFREQ1 bulk data card. For ASYNC
analysis, rotor speed is obtained from RGYRO bulk data card.
3.All the tables (TABLED5 Pij) should provide lookup tables (TABLED1) for the range of rotor speeds
between Min_FREQ and  Max_Freq.
4.All of the fields for TABLED5 ids shown above are required for each FORM. For example, if
FORM=DIAG, then P11, P22, P33, P44, P55, and P66 must all be provided or a FATAL error
message will be issued.
Example:
$&amp;ndash;01&amp;ndash;$$&amp;ndash;02&amp;ndash;$$&amp;ndash;03&amp;ndash;$$&amp;ndash;04&amp;ndash;$$&amp;ndash;05&amp;ndash;$$&amp;ndash;06&amp;ndash;$$&amp;ndash;07&amp;ndash;$$&amp;ndash;08&amp;ndash;$
NLBSH3D 1001    123     133             104     200
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
LBSH3DG 104     ASYM    1.01    1.02E4
1011    1012    1013    1014    1015    1016
1021    1022    1023    1024    1025    1026
1031    1032    1033    1034    1035    1036
1041    1042    1043    1044    1045    1046
1051    1052    1053    1054    1055    1056
1061    1062    1063    1064    1065    1066
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
LBSH3DG 200     DIAG    2.01    2.02E5 &lt;br&gt;
2011    2022    2033    2044    2055    2066
Each Pij entry in LBSH3DG card refers TABLED5 id.
TABLED5 and TABLED1 usageSYM Symmetric, only lower triangular terms needed
DIAG Only diagonal terms are needed
ASYM Asymmetric, all terms are needed
MIN_FREQ Minimum valid rotor speed for all the table lookups provided. (Real). See remark 2.
MAX_FREQ Max valid rotor speed for all the table lookups provided. (Real &amp;gt; 0.0 Required). Refer
remark 2.
Pij TABLED5 Id that provides TABLED1 ids as a function of rotor speed. The TABLED1
will have force as a function of relative displacement and/or velocity.Describer Meaning&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)124
Main Index
In this case, TABLED1 3 is used when the speed is 0, TABLED1 4 is used when the speed is 10, and
TABLED1 5 is used when the speed is 20. If the speed is between these values, the program will interpolate.
Example (..\tpl\nlbsh3d\nlbsh3d.dat):
Rather than use a complex rotordynamics example, a simple example problem is used. As the NLBSH3D
requires rotordynamics be used, a simple rotor model is used, but the NLBSH3D is not connected to it (only
for demonstration purposes, in normal analysis, it would be used to connect the rotor to the stator).
The rotor is not shown for this example, rather only the model using the NLBSH3D is shown. As a
demonstration, an equivalent static solution will be performed on the NLBSH3D by connecting it to
CBUSH elements with stiffness only (no mass or damping).
GRIDs 77111 and 77121 are coincident GRIDs with the same displacement coordinate system. The
NLBSH3D will connect between these two GRID points. In order to retain these GRIDs in the solution set
(The D-set in dynamics), CBUSH elements will be used to add stiffness. The stiffness between the two GRID
points will be 1.0 in all 6 DOF . A CBUSH with 1.0E7 stiffness in all 6 DOF will connect GRID point 77121
to ground.
A force of 1.0 units will be applied in all 6 DOF on GRID 77111. The TABLED5/TABLED1 entries will
define a force/moment of 0.01 units of force/moment for each unit displacement/rotation (the same as the
springs connecting the two GRID points). The TABLED5/TABLED1 used for velocity will give a force of
0.0 for any velocity. In this way, the spring and the NLBSH3D should each take ½ of the applied load.
The above image is an idealization of the spring/NLBSH3D model. The NLBSH3D connects between
GRID points 77111 and 77121, but is not shown. The two GRID points are coincident, and the springs are
all zero length.
Without the NLBSH3D, GRID point 77121 would have a displacement of 0.01 in all 6 DOF , however, with
the NLBSH3D, the displacements will be 0.005 (they will be slightly different, due to the 1.0E7 springs on
GRID point 77111).TABLED5 2011
0. 3 10. 4 20. 5 &amp;hellip;
TABLED1 3 &amp;hellip;
TABLED1 4 &amp;hellip;
TABLED1 5 &amp;hellip;&lt;/p&gt;
&lt;p&gt;125 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
Executive and Case Control from the file:
SOL 128
CEND
TITLE = Test nlbsh3d in sol 128
ECHO = NONE
SUBCASE 1
SUBTITLE= get static solution on nlbsh3d
SPC = 2
RGYRO = 100
DLOAD=101
FREQ=100
NONLINEAR = 40
NLHARM = 60
$ output requests&lt;br&gt;
set 999=77111,77121,77000
disp = 999
mpc = 100
nlload = 999
oload = 999
set 10010 = 10010
elforce = 10010
BEGIN BULK
The file is running SOL 128, Nonlinear Harmonic Response. The Case Control of interest for the
NLBSH3D is highlighted in red. NONLINEAR=40 selects the NLBSH3D from the Bulk Data. The output
requests are to obtain the applied load, the nonlinear forces (from the NLBSH3D) and the displacements.
The MPC request is to have the program calculate the relative displacement between the two GRID points
the NLBSH3D connects and provide that as the displacement of GRID 70000.
Selected Bulk Data - the NLBSH3D
$
grid,77111
grid,77121
cbush,10009,10020,77111,,1.,,,0
cbush,10010,10010,77111,77121,1.,,,0
pbush,10010,k,1.,1.,1.,1.,1.,1.
pbush,10020,k,1.+5,1.+5,1.+5,1.+5,1.+5,1.+5
$&amp;mdash;&amp;mdash;-1&amp;mdash;&amp;mdash;-2&amp;mdash;&amp;mdash;-3&amp;mdash;&amp;mdash;-4&amp;mdash;&amp;mdash;-5&amp;mdash;&amp;mdash;-6&amp;mdash;&amp;mdash;-7&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;-9&amp;mdash;
&amp;mdash;-1&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)126
Main Index
$LBSH3D SID     GA      GB      CID     LID-1   LID-2
NLBSH3D 40      77111   77121            200     201
$
$ for simplicity, diagonal terms only (no coupling)
$ tabled5 200 points to TABLED1 entries where the force= disp
$ tabled5 201 points to TABLED1 entries where the force=0 (no force from
velocity)
$
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;&amp;hellip;.10..
&amp;hellip;.
LBSH3DG    200     DIAG    0.00 2.02E5  &lt;br&gt;
2011 2022 2033 2044 2055 2066         &lt;br&gt;
LBSH3DG    201     DIAG    0.00 2.02E5  &lt;br&gt;
211 211 211 211  211  211          &lt;br&gt;
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;&amp;hellip;.10..
&amp;hellip;.
tabled5,211,
,1.,212,200.,212,endt
tabled1,212,
,0.,0.,100.,0.,endt
$
As mentioned earlier, this model emulates a static response on the NLBSH3D as a way to verify that it is
working properly. The NLBSH3D connects between coincident GRID points 77111 and 77121.
CBUSH element 10009 places a large stiffness between GRID point 77111 and ground (only GRID 77111
is specified, so this is a CBUSH to ground - note, if you ask for SPCFORCE output, the force in this CBUSH
is not an SPCFORCE and will not be included in that output). CBUSH 10010 connects GRID points
77111 and 77121 with a unit stiffness in all 6 DOF . These two elements create terms in the stiffness matrix
for the two GRID points, which must be in the final solution set (The D-set) of the model. This is why GRID
77121 is not simply constrained to ground. If it were, it would not be in the solution set and a fatal error
message would be issued.
The NLBSH3D has set id 40 (referenced on the NONLINEAR Case Control command) and connects the
two GRID points together. LBSH3DG number 200 uses the relative displacements to calculate forces and
LBSH3DG 201 uses the relative velocities to calculate forces.
Looking at LBSH3DG 201, it provides tables only for the diagonal terms (no coupling). It is valid for a rotor
speed range of 0.0 to 2.02E5 cps. As it uses the DIAG option, it refers to 6 TABLED5 entries, one for each
relative displacement. For this model, we have selected TABLED5 211 for all 6 terms. This TABLED5 selects
TABLED1 212 at 0.0 cps and TABLED1 212 at 100.0 cps. This is not recommended modelling practice,
simply done for demonstration purposes. TABLED1 212 has a constant value of 0.0 for all speeds and relative&lt;/p&gt;
&lt;p&gt;127 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
velocities. Once again, this is done only for demonstration purposes in this model, as we are interested in only
the &amp;lsquo;static&amp;rsquo; response of the NLBSH3D.
LBSH3DG 200 is used to calculate forces based on the relative displacements of the two GRID points. It is
valid between 0.0 and 2.02E5 cps. It also uses the DIAG option, meaning there is no coupling between the
terms. Looking at the X-term, it selects TABLED5 2011. This TABLED5 selects TABLED1 2201 at 1.0 cps
and 2210 at 100.0 cps. For demonstration purposes, these both have a slope of 1:1, starting at 0.0, so the
force is equal to the relative displacement. This makes it very easy to verify that the NLBSH3D is working
properly.
The other TABLED5 entries referenced by LBSH3DG 200 are similar.
GRID point 77000 is introduced into the model to measure the relative displacement between the two GRID
points of interest. This is done using MPC equations with GRID 77000 as the dependent GRID point, as
we need to have the other 2 GRID points in the solution set.
grid,77000
$ get relative displacement used by NLBSH3D
mpc,100,77000,1,-1.,77111,1,-1.,
,,77121,1,1.
mpc,100,77000,2,-1.,77111,2,-1.,
,,77121,2,1.
mpc,100,77000,3,-1.,77111,3,-1.,
,,77121,3,1.
mpc,100,77000,4,-1.,77111,4,-1.,
,,77121,4,1.
mpc,100,77000,5,-1.,77111,5,-1.,
,,77121,5,1.
mpc,100,77000,6,-1.,77111,6,-1.,
,,77121,6,1.
Looking at the results of this run, the run solves for 3 rotor speeds, 1.5, 1.6, and 1.7 cps. We will only look
at one of the solutions, as all three with have the same displacements for the GRID points being considered.
Applied Load:
The load applied at GRID point 77121 is 0.01 units in all 6 DOF .&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)128
Main Index
Displacements:
Looking at the displacements, GRID point 77000 has a displacement of 0.005 units in all 6 DOF . This might
raise a question, as with unit springs, you might expect the displacement to equal the applied load, but the
NLBSH3D acts like a set of unit springs, so ½ of the load goes to the NLBSH3D and ½ goes to the CBUSH.
NONLINEAR FORCES:
Looking at the nonlinear forces, we see that there are equal and opposite forces of 0.005 at GRID points
77111 and 77121 resulting from the NLBSH3D.
ELEMENT FORCES:
The element force in the CBUSH is .005, which is the other half of the applied load.
Looking at the results, the displacements, nonlinear forces, and element forces are all what was expected for
this model. Obviously, it is possible to model more complicated models using the NLBSH3D. This model
was simply used to provide a demonstration where is was easy to verify the results.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P8</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_008/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_008/</guid>
      <description>
        
        
        &lt;p&gt;129 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
TABLED5 Description
Defines a value as a function of two variables for use in generating frequency dependent and time dependent
dynamic loads.
Guidelines and Limitations
1.PBSH2DT Bulk Data requires the existence of a PBUSH2D card of same PID
2.You can only use either old CBUSH2D CONNECT SERVICE or new CBUSH2DA CONNECT
SERVICE in the analysis.
3.You can combine new CBUSH2DA CONNECT SERVICE with PBSH2DT bulk data definition
only if the PIDs are different.
4.You can only use either old NLRSFD CONNECT SERVICE or new NLRSFDA CONNECT
SERVICE in the analysis.
5.New PBSH2DT definition and CBUSH2DA SERVICE call will only work with rotor definition.
6.For running user defined external CONNECT SERVICE, correct SDK (Software Development Kit)
need to be installed.
7.NLBSH3D card&amp;rsquo;s GA and GB must have all 6 dof in D-set. Both grids should not be dependent on
any RBE or MPC and must not be constrained by an SPC.
8.NLBSH3D cannot be run in SOL400 with DMP option.
9.Non-linear force outputs for NLBSH3D element are not available in SOL400.
THPAD using CBUSH2D
In addition, it is possible to use the ROMAC (University of Virginia Rotating Machinery And Controls
laboratory, &lt;a href=&#34;http://www.virginia.edu/romac/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://www.virginia.edu/romac/&lt;/a&gt;) THPAD routine (which must be obtained from ROMAC) to
calculate the properties of a tilting pad journal bearing (Branagan et al., ).
The bulk data entries required for introducing the THPAD bearing routine in analysis is shown in Figure 4-6
and Figure 4-7. TABLED5 Dynamic Load Tabular Function, Form 5
1 2 3 4 5 6 7 8 9 10
TABLED5 TID
X(1) TID(1) X(2) TID(2) X(3) TID(3) X(4) TID(4)
&amp;hellip; &amp;hellip; ENDT&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)130
Main Index
Figure 4-6  Bulk Data Cards for introducing THPAD
Figure 4-7  Usage of THPAD in rotordynamic analysis
Nonlinear Squeeze Film Damper, NLRSFD
The requirement of high power output for modern gas turbine engines has resulted in highly flexible light
weight rotor designs. Control of vibration response of these engines is a major design problem. The use of
rolling element bearings with low inherent damping make it difficult to reduce vibration amplitudes and
dynamic loads transmitted to the rotor supporting structure. Squeeze Film Dampers (SFDs) are therefore
used to provide adequate damping to maintain low amplitude vibration levels and to reduce the dynamic
loads transmitted to the bearings and rotor support structures. A general SFD model has been successfully
incorporated into the MSC Nastran time domain analysis, and this new capability provides the means to
design and analyze SFDs for general rotor orbits with multiple frequency content. The new capability
includes static loads and models the lift-off phenomenon important in the design of free-floating dampers.&lt;/p&gt;
&lt;p&gt;131 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
Figure 4-8  Bulk data entry for NLRSFD
As described earlier, the general SFD model incorporated in MSC Nastran for transient analysis inserts the
SFD forces in the right hand side of the equations as a nonlinear force, { N(t)}. The bulk data entry for SFD
is called NLRSFD and is shown in Figure 4-8. Input data required for SFD definition are: journal diameter
and clearance, land length, oil viscosity, and location of ports and boundary pressure at these points.
Equations for SFD
A representative model for the squeeze film damper is shown in Figure 4-9. Here Grid I represents a point on
the damper journal (rotor) and Grid J is a point on the housing (stator). The two grid points should be
coincident and have parallel Cartesian coordinate systems. The SFD code uses relative displacements and
velocities,  between these two grid points as the input and outputs the forces  and&lt;br&gt;
acting on the damper journal grid point (Grid I). Equal and opposite forces:
and  are applied to the SFD housing grid point (Grid J). If parallel
centering is required, then this can be modeled using the CELAS2 or CBUSH elements. Defines a nonlinear transient radial squeeze film damper.
Format:NLRSFD Nonlinear Transient Load Proportional to a Squeeze Film Damper
1 2 3 4 5 6 7 8 9 10
NLRSFD SID GA GB PLANE BDIA BLEN BCLR SOLN
VISCO PVAPCO NPORT PRES1 THETA1 PRES2 THETA2 NPNT
OFFSET1 OFFSET2 GROUP
NAMENAME2
RDATA1 RDATA2 RDATA3 RDATA4 RDATA5 RDATA6 RDATA7 RDATA8
xyx·y· FXxyx·y·
FYxyx·y·
-FXxyx·y· -FYxyx·y·&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)132
Main Index
Figure 4-9  SFD Model in MSC Nastran
The squeeze-film damper model is based on work originally performed at Case Western Reserve University
(CWRU). It incorporates a numerical solution of the Reynolds lubrication equation for incompressible
laminar isoviscous films that is described in Adams, Padovan and Fertis (Adams et al., 1982) . The model is
capable of handling the specified pressure boundaries at the feed (supply) and discharge (drain) ports of the
SFD. The SFD pressure distribution is determined using a one-dimensional finite difference scheme. The
one-dimensional finite difference approach accounts for static as well as dynamic deflections and is capable
of modeling general damper orbits with a broad frequency content. The model computes the oil film forces
by numerical integration of the instantaneous film pressure distribution.
SFD Model in MSC Nastran  also shows the SFD model coordinate system and the supply and discharge port
locations. Either one or two ports can be used to define pressure boundary conditions for the SFD model.
The number of grid points used in the finite difference scheme to determine the film pressure distribution is
defined by the variable NGRID. For the single port model, there are NGRID points, and for the double port
model there are NGRID points between the two ports for a total of 2 x NGRID points. Typically, a value of
about 31 (an odd number is required) for NGRID will be adequate.&lt;/p&gt;
&lt;p&gt;133 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
Figure 4-10  SFD in operation
A SFD in operation is shown in Figure 4-10, where e is the whirl vector which shows displacement of Grid I
on the rotor from Grid J on the center of housing. Using this vector, displacement and velocities between the
two points can be written as:
These values are provided as input to the SFD code for the rest of the analysis.
Squeeze Film Damper in CBUSH2D
For better accuracy and to facilitate use in other solution sequences the NLRSFD was also implemented as
an element. The Squeeze Film Damper was added as an option of a more general 2-D bearing element
CBUSH2D.
The format for the PBUSH2D entry with added options to define a SFD is shown in Figure 4-11.
x et cos =
y et sin =
x· -et sin =
y·et cos =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)134
Main Index
Figure 4-11  PBUSH2D  entry with option for SFD
NLBSH3D &amp;amp; LBSH3DG Nonlinear Tabular Lookup
The bulk data cards NLBSH3D &amp;amp; LBSH3DG are used to calculate force vs. deflection/velocity for a given
rotor speed. These are available in nonlinear frequency response analysis (SOL128) and nonlinear transient
analysis (SOL400) only.
Defines connectivity of a three-dimensional nonlinear load as a function of relative deflection and velocity of
a grid pair which in turn is a function of rotor speed.
Format:
Remarks:
1.NLBSH3D are selected with the Case Control command NONLINEAR = SID.
2.In order to ensure correct results, GRID points GA and GB must satisfy the following three
conditions:NLBSH3D Nonlinear 3-dimensional rotor loading
1 2 3 4 5 6 7 8 9 10
NLBSH3D SID GA GB Blank LID-1 LID-2
Describer Meaning
SID Nonlinear load set identification number. (Integer &amp;gt; 0; Required)
GA Inner grid. (Integer &amp;gt; 0; Required)
GB Outer grid. (Integer &amp;gt; 0; Required)
LID-1 Load vs deflection group ID of a LBSH3DG (Integer &amp;gt; 0; Required)
LID-2 Load vs velocity group ID of a LBSH3DG (Integer &amp;gt; 0; Required)Defines linear and nonlinear properties of a two-dimensional element (CBUSH2D entry).
Format:PBUSH2D 2-D Linear/Nonlinear Connection Properties
1 2 3 4 5 6 7 8 9 10
PBUSH2D PID K11 K22 B11 B22 M11 M22
SQUEEZE BDIA BLEN BCLR SOLN VISCO PVAPCO
NPORT PRES1 THETA1 PRES2 THETA2 OFFSET1 OFFSET2&lt;/p&gt;
&lt;p&gt;135 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
a.They must both be grid points
b.They must be coincident
c.They must have parallel displacement coordinate systems
The program checks for the above conditions. If they are not satisfied, the program will terminate the
run with an appropriate fatal message.
3.Multiple NLBSH3D may reference the same SID but require different GA, GB grid pairs.
4.Multiple NLBSH3D entries may refer to the same LID independent of SID.
5.Non-linear load is calculated as a function of relative deflection and velocity between GRID points
GA and GB and as function of rotor speed. Current non-linear load = load (deflection (rotor speed)).
Used with LBSH3DG entries to define a nonlinear load.
6.GA and GB must have all 6 DOF in D-set. Both grids should not be dependent on any RBE or MPC
and must not be constrained by an SPC. The program checks for active DOFs of both the grids. If
they are not satisfied, the program will terminate the run with an appropriate fatal message.
Defines the force tables of NLBSH3D nonlinear loads as function of relative displacement or velocity and
current rotor speed.
Format:
FORM = ASYM  (Asymmetric matrix representation)
FORM = DIAG  (Only Diagonal terms representation)LBSH3DG Tables used by an NLBSH3D to find force as function of displacement, velocity and rotor speed
1 2 3 4 5 6 7 8 9 10
LBSH3DG LID FORM MIN_FREQ MAX_FREQ
P11 P12 P13 P14 P15 P16
P21 P22 P23 P24 P25 P26
P31 P32 P33 P34 P35 P36
P41 P42 P43 P44 P45 P46
P51 P52 P53 P54 P55 P56
P61 P62 P63 P64 P65 P66
1 2 3 4 5 6 7 8 9 10
LBSH3DG LID FORM MIN_FREQ MAX_FREQ
P11 P22 P33 P44 P55 P66&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)136
Main Index
FORM = SYM  (Symmetric matrix representation)
Remarks:
1.Values for the nonlinear forces will be determined using interpolation based on rotor speed and
relative deflection/velocity of grid pair. If the rotor speed is beyond the range specified by
MIN_FREQ and MAX_FREQ, a FATAL message will be produced. (Extrapolation will NOT be
used beyond this range).
2.For SYNC analysis, rotor speed is obtained from NLFREQ / NLFREQ1 bulk data card. For ASYNC
analysis, rotor speed is obtained from RGYRO bulk data card.
3.All the tables (TABLED5 Pij) should provide lookup tables (TABLED1) for the range of rotor speeds
between Min_FREQ and  Max_Freq.
4.All of the fields for TABLED5 ids shown above are required for each FORM. For example, if
FORM=DIAG, then P11, P22, P33, P44, P55, and P66 must all be provided or a FATAL error
message will be issued.
Example:
$&amp;ndash;01&amp;ndash;$$&amp;ndash;02&amp;ndash;$$&amp;ndash;03&amp;ndash;$$&amp;ndash;04&amp;ndash;$$&amp;ndash;05&amp;ndash;$$&amp;ndash;06&amp;ndash;$$&amp;ndash;07&amp;ndash;$$&amp;ndash;08&amp;ndash;$
NLBSH3D 1001    123     133             104     2001 2 3 4 5 6 7 8 9 10
LBSH3DG LID FORM MIN_FREQ MAX_FREQ
P11
P21 P22
P31 P32 P33
P41 P42 P43 P44
P51 P52 P53 P54 P55
P61 P62 P63 P64 P65 P66
Describer Meaning
LID Load identification group number for a NLBSH3D. (Integer &amp;gt; 0; Required)
FORM Type of Input Curves. (Character; Default SYM)
SYM Symmetric, only lower triangular terms needed
DIAG Only diagonal terms are needed
ASYM Asymmetric, all terms are needed
MIN_FREQ Minimum valid rotor speed for all the table lookups provided. (Real). See remark 2.
MAX_FREQ Max valid rotor speed for all the table lookups provided. (Real &amp;gt; 0.0 Required). Refer
remark 2.
Pij TABLED5 Id that provides TABLED1 ids as a function of rotor speed. The TABLED1
will have force as a function of relative displacement and/or velocity.&lt;/p&gt;
&lt;p&gt;137 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
LBSH3DG 104     ASYM    1.01    1.02E4
1011    1012    1013    1014    1015    1016
1021    1022    1023    1024    1025    1026
1031    1032    1033    1034    1035    1036
1041    1042    1043    1044    1045    1046
1051    1052    1053    1054    1055    1056
1061    1062    1063    1064    1065    1066
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;
LBSH3DG 200     DIAG    2.01    2.02E5 &lt;br&gt;
2011    2022    2033    2044    2055    2066
Each Pij entry in LBSH3DG card refers TABLED5 id.
TABLED5 and TABLED1 usage
In this case, TABLED1 3 is used when the speed is 0, TABLED1 4 is used when the speed is 10, and
TABLED1 5 is used when the speed is 20. If the speed is between these values, the program will interpolate.
Example (..\tpl\nlbsh3d\nlbsh3d.dat):
Rather than use a complex rotordynamics example, a simple example problem is used. As the NLBSH3D
requires rotordynamics be used, a simple rotor model is used, but the NLBSH3D is not connected to it (only
for demonstration purposes, in normal analysis, it would be used to connect the rotor to the stator).
The rotor is not shown for this example, rather only the model using the NLBSH3D is shown. As a
demonstration, an equivalent static solution will be performed on the NLBSH3D by connecting it to
CBUSH elements with stiffness only (no mass or damping).
GRIDs 77111 and 77121 are coincident GRIDs with the same displacement coordinate system. The
NLBSH3D will connect between these two GRID points. In order to retain these GRIDs in the solution set
(The D-set in dynamics), CBUSH elements will be used to add stiffness. The stiffness between the two GRID
points will be 1.0 in all 6 DOF . A CBUSH with 1.0E7 stiffness in all 6 DOF will connect GRID point 77121
to ground.
A force of 1.0 units will be applied in all 6 DOF on GRID 77111. The TABLED5/TABLED1 entries will
define a force/moment of 1.0 units of force/moment for each unit displacement/rotation (the same as the TABLED5 2011
0. 3 10. 4 20. 5 &amp;hellip;
TABLED1 3 &amp;hellip;
TABLED1 4 &amp;hellip;
TABLED1 5 &amp;hellip;&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)138
Main Index
springs connecting the two GRID points). The TABLED5/TABLED1 used for velocity will give a force of
0.0 for any velocity. In this way, the spring and the NLBSH3D should each take ½ of the applied load.
The above image is an idealization of the spring/NLBSH3D model. The NLBSH3D connects between
GRID points 77111 and 77121, but is not shown. The two GRID points are coincident, and the springs are
all zero length.
Without the NLBSH3D, GRID point 77121 would have a displacement of 0.01 in all 6 DOF , however, with
the NLBSH3D, the displacements will be 0.005 (they will be slightly different, due to the 1.0E7 springs on
GRID point 77111).
Executive and Case Control from the file:
SOL 128
CEND
TITLE = Test nlbsh3d in sol 128
ECHO = NONE
SUBCASE 1
SUBTITLE= get static solution on nlbsh3d
SPC = 2
RGYRO = 100
DLOAD=101
FREQ=100
NONLINEAR = 40
NLHARM = 60
$ output requests&lt;br&gt;
set 999=77111,77121,77000
disp = 999
mpc = 100
nlload = 999
oload = 999
set 10010 = 10010
elforce = 10010
BEGIN BULK&lt;/p&gt;
&lt;p&gt;139 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
The file is running SOL 128, Nonlinear Harmonic Response. The Case Control of interest for the
NLBSH3D is highlighted in red. NONLINEAR=40 selects the NLBSH3D from the Bulk Data. The output
requests are to obtain the applied load, the nonlinear forces (from the NLBSH3D) and the displacements.
The MPC request is to have the program calculate the relative displacement between the two GRID points
the NLBSH3D connects and provide that as the displacement of GRID 70000.
Selected Bulk Data - the NLBSH3D
$
grid,77111
grid,77121
cbush,10009,10020,77111,,1.,,,0
cbush,10010,10010,77111,77121,1.,,,0
pbush,10010,k,1.,1.,1.,1.,1.,1.
pbush,10020,k,1.+5,1.+5,1.+5,1.+5,1.+5,1.+5
$&amp;mdash;&amp;mdash;-1&amp;mdash;&amp;mdash;-2&amp;mdash;&amp;mdash;-3&amp;mdash;&amp;mdash;-4&amp;mdash;&amp;mdash;-5&amp;mdash;&amp;mdash;-6&amp;mdash;&amp;mdash;-7&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;-9&amp;mdash;
&amp;mdash;-1
$LBSH3D SID     GA      GB      CID     LID-1   LID-2
NLBSH3D 40      77111   77121            200     201
$
$ for simplicity, diagonal terms only (no coupling)
$ tabled5 200 points to TABLED1 entries where the force= disp
$ tabled5 201 points to TABLED1 entries where the force=0 (no force from
velocity)
$
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;&amp;hellip;.10..
&amp;hellip;.
LBSH3DG    200     DIAG    0.00 2.02E5  &lt;br&gt;
2011 2022 2033 2044 2055 2066         &lt;br&gt;
LBSH3DG    201     DIAG    0.00 2.02E5  &lt;br&gt;
211 211 211 211  211  211          &lt;br&gt;
$&amp;hellip;&amp;hellip;.2&amp;hellip;&amp;hellip;.3&amp;hellip;&amp;hellip;.4&amp;hellip;&amp;hellip;.5&amp;hellip;&amp;hellip;.6&amp;hellip;&amp;hellip;.7&amp;hellip;&amp;hellip;.8&amp;hellip;&amp;hellip;.9&amp;hellip;&amp;hellip;.10..
&amp;hellip;.
tabled5,211,
,1.,212,200.,212,endt
tabled1,212,
,0.,0.,100.,0.,endt
tabled5,2011
,1.,2201,100.,2210,endt
tabled1,2201&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)140
Main Index
,0.,0.,10.,10.,endt
tabled1,2210
,0.,0.,10.,10.,endt
$
As mentioned earlier, this model emulates a static response on the NLBSH3D as a way to verify that it is
working properly. The NLBSH3D connects between coincident GRID points 77111 and 77121.
CBUSH element 10009 places a large stiffness between GRID point 77111 and ground (only GRID 77111
is specified, so this is a CBUSH to ground - note, if you ask for SPCFORCE output, the force in this CBUSH
is not an SPCFORCE and will not be included in that output). CBUSH 10010 connects GRID points
77111 and 77121 with a unit stiffness in all 6 DOF . These two elements create terms in the stiffness matrix
for the two GRID points, which must be in the final solution set (The D-set) of the model. This is why GRID
77121 is not simply constrained to ground. If it were, it would not be in the solution set and a fatal error
message would be issued.
The NLBSH3D has set id 40 (referenced on the NONLINEAR Case Control command) and connects the
two GRID points together. LBSH3DG number 200 uses the relative displacements to calculate forces and
LBSH3DG 201 uses the relative velocities to calculate forces.
Looking at LBSH3DG 201, it provides tables only for the diagonal terms (no coupling). It is valid for a rotor
speed range of 0.0 to 2.02E5 cps. As it uses the DIAG option, it refers to 6 TABLED5 entries, one for each
relative displacement. For this model, we have selected TABLED5 211 for all 6 terms. This TABLED5 selects
TABLED1 212 at 0.0 cps and TABLED1 212 at 100.0 cps. This is not recommended modelling practice,
simply done for demonstration purposes. TABLED1 212 has a constant value of 0.0 for all speeds and relative
velocities. Once again, this is done only for demonstration purposes in this model, as we are interested in only
the &amp;lsquo;static&amp;rsquo; response of the NLBSH3D.
LBSH3DG 200 is used to calculate forces based on the relative displacements of the two GRID points. It is
valid between 0.0 and 2.02E5 cps. It also uses the DIAG option, meaning there is no coupling between the
terms. Looking at the X-term, it selects TABLED5 2011. This TABLED5 selects TABLED1 2201 at 1.0 cps
and 2210 at 100.0 cps. For demonstration purposes, these both have a slope of 1:1, starting at 0.0, so the
force is equal to the relative displacement. This makes it very easy to verify that the NLBSH3D is working
properly.
The other TABLED5 entries referenced by LBSH3DG 200 are similar.
GRID point 77000 is introduced into the model to measure the relative displacement between the two GRID
points of interest. This is done using MPC equations with GRID 77000 as the dependent GRID point, as
we need to have the other 2 GRID points in the solution set.
grid,77000
$ get relative displacement used by NLBSH3D
mpc,100,77000,1,-1.,77111,1,-1.,
,,77121,1,1.
mpc,100,77000,2,-1.,77111,2,-1.,
,,77121,2,1.
mpc,100,77000,3,-1.,77111,3,-1.,&lt;/p&gt;
&lt;p&gt;141 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
,,77121,3,1.
mpc,100,77000,4,-1.,77111,4,-1.,
,,77121,4,1.
mpc,100,77000,5,-1.,77111,5,-1.,
,,77121,5,1.
mpc,100,77000,6,-1.,77111,6,-1.,
,,77121,6,1.
Looking at the results of this run, the run solves for 3 rotor speeds, 1.5, 1.6, and 1.7 cps. We will only look
at one of the solutions, as all three with have the same displacements for the GRID points being considered.
Applied Load:
The load applied at GRID point 77121 is 0.01 units in all 6 DOF .
Displacements:
Looking at the displacements, GRID point 77000 has a displacement of 0.005 units in all 6 DOF . This might
raise a question, as with unit springs, you might expect the displacement to equal the applied load, but the
NLBSH3D acts like a set of unit springs, so ½ of the load goes to the NLBSH3D and ½ goes to the CBUSH.&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)142
Main Index
NONLINEAR FORCES:
Looking at the nonlinear forces, we see that there are equal and opposite forces of 0.005 at GRID points
77111 and 77121 resulting from the NLBSH3D.
ELEMENT FORCES:
The element force in the CBUSH is .005, which is the other half of the applied load.
Looking at the results, the displacements, nonlinear forces, and element forces are all what was expected for
this model. Obviously, it is possible to model more complicated models using the NLBSH3D. This model
was simply used to provide a demonstration where is was easy to verify the results.
TABLED5 Description
Defines a value as a function of two variables for use in generating frequency dependent and time dependent
dynamic loads.TABLED5 Dynamic Load Tabular Function, Form 5
1 2 3 4 5 6 7 8 9 10
TABLED5 TID
X(1) TID(1) X(2) TID(2) X(3) TID(3) X(4) TID(4)
&amp;hellip; &amp;hellip; ENDT&lt;/p&gt;
&lt;p&gt;143 Chapter 4: Damping and Bearing Models
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)
Main Index
Nonlinear Load Functions (NOLINi)
The nonlinear load functions (NOLIN1, NOLIN2, NOLIN3 and NOLIN4) are available in all of the
transient solutions for the purpose of generating direct forces from simple displacement and velocity
functions. This is a mature capability in MSC Nastran that preceded the development of the material and
geometric nonlinear capabilities. It was intended to provide a direct method for modeling certain
mechanisms and special effects at the local level where only a few degrees of freedom are coupled. It is not
intended for general nonlinear analysis since the logic cannot detect geometric changes and has no means of
using element stresses or forces. The main applications for the NOLINi functions are for local devices such
as joints and nonlinear dampers. For each nonlinear force component, the dependencies with displacement
and velocity degrees-of-freedom are explicitly defined on one or more bulk data entries.
The limitations on the use of these functions are caused primarily by their simplicity. These limitations are:
1.They have no memory or other path dependencies. Specifically, they provide no direct means for
including data from previous states.
2.Each input function only applies loads to a single degree of freedom, which can require a great deal
of effort to describe complex models.
3.The system treats these functions as simple forces rather than finite elements. Therefore, the lack of
a tangent matrix results in potential stability problems.
4.In the linear solutions, all degrees of freedom in the NOLIN functions must be in the dynamic
solution set.
5.In the linear solutions, the forces created by NOLIN entries lag by one time step. A common way to
attempt to account for this is to decrease the integration time step.
The input data starts with a case control request: NONLINEAR (Case), with one or more NOLINi Bulk
Data entries to define the set. The four basic options to define a scalar nonlinear force, Ni, in terms of the
degrees of freedom, {gj}, are summarized in the table below.
The variables, gj, may be displacement or velocity components of grid, scalar, or extra points in the solution
set. In the DIRECT TRANSIENT solutions, the connected degrees of freedom, gi and gj, etc., must remain
in the solution set. In the modal transient solutions, only extra points are available for use by the NOLINi
entries. In nonlinear transient solutions, all degrees of freedom are available; however, extra points are not
supported. Note that these functions mimic the basic nonlinear function generators used in passive analog Table 4-1  Options for Nonlinear Load using NOLIN
Option Function Comments
NOLIN1 Ni = SF(gj) F(gj) is a TABLEDi input
NOLIN2 Ni = Sgjgk Product of two variables
NOLIN3 Ni = S(gj)A, gj &amp;gt; 0 A is an input exponenet
NOLIN4 Ni = -S(-gj)A, gj &amp;lt; 0 As 3 except for negative g&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
User Defined Services Examples Delivered with MSC Nastran by Utilizing the MSC Software Development Kit (SDK)144
Main Index
computers. They may be added together and combined with other functions such as MPCs and scalar
elements to handle a variety of problems.
The bulk data format for the NOLIN1 entry is shown in Figure 4-12 . Other NOLIN options follow a similar
format.
Figure 4-12  NOLIN1  Bulk Data EntryDefines a forcing function for transient response or nonlinear harmonic response of the form
Format:NOLIN1 Nonlinear Load as a Tabular Function
1 2 3 4 5 6 7 8 9 10
NOLIN1 SID GI CI S GJ CJ TID&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 5: Rotor Usage
MSC Nastran Rotordynamics User’s Guide Rotordynamics User’s Guide
5 Rotor Usage
Rotor Usage      146
Case Control Entries      146
Parameters      146
Bulk Data Entries      147&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Rotor Usage146
Main Index
Rotor Usage
Rotor modeling techniques available in MSC Nastran were discussed in Chapter 3. In order to perform
complex eigenvalue, frequency response, or transient analysis, some other entries need to be defined in Case
Control and Bulk Data. Most of these entries are common to the three types of rotors discussed in the
previous chapter. Brief overview of these entries is provided in rest of the chapter. More details are available
in the MSC Nastran Quick Reference Guide .
Case Control Entries
RGYRO
The RGYRO Case Control command activates the rotordynamics capability, and selects the RGYRO Bulk
Data entry for use in complex modes, frequency response, and static analysis. For transient response, the
RGYRO command selects the UNBALNC (described later in this chapter) Bulk Data entry. If the
UNBALNC entry is not required, setting RGYRO to YES will include the gyroscopic effects in the transient
response calculation. Setting RGYRO to NO will deactivate gyroscopic effects in all solutions.For more
information see, RGYRO  (Case) .
CAMPBELL
This entry specifies parameters for the generation of the Campbell Diagram in complex eigenvalue analysis
(SOL 107). When there is a Case Control request for the Campbell diagram, the selected RGYRO Bulk Data
entry (described later in this chapter) must have the ASYNC option specified in its SYNCFLG field (Field
3). Otherwise, the program terminates the execution with an appropriate fatal message. For more information
see, CAMPBELL (Case) . In V2018, second row was introduced in CAMPBLL entry to enable eigen-vector based
mode tracking.
Parameters
WR3, WR4, and WRH
The nature of damping to be used for rotordynamic analysis can be controlled based on the definition of
following parameters for complex eigenvalue analysis and transient response analysis. For frequency response,
it is dependent on these values and the parameter GYROAVG. For more information see, WR3, WR4, WRH.
GYROAVG
The parameter GYROAVG is used to specify one of the two formulations for frequency response analysis
using the rotordynamic capability. The default is to determine any frequency-dependent terms for each
frequency. This option activates the frequency-dependent looping option. Setting the value &amp;lt; 0 uses an
‘average’ frequency formulation. This option avoids using the frequency-dependent looping and results in a&lt;/p&gt;
&lt;p&gt;147 Chapter 5: Rotor Usage
Bulk Data Entries
Main Index
shorter execution time. For this option, PARAM WR3 /WR4 /WRH must be specified to include rotor
damping.  For more information see, GUSTAERO .
WHIRLOPT
When the analysis is performed in rotating reference frame, (only available with ROTOR entry), the
synchronous analysis for forward and backward whirl modes follow different set of equations of motion. The
user has the option to select required whirl mode option using this parameter. Here, the forward whirl analysis
is treated as the default option.  For more information see, WHIRLOPT .
Bulk Data Entries
The RGYRO, REFROT , REFRTSE, ROTBENT and RS PINR/RSPINT entries are honored and processed
only in run which solves the residual structure (and must be in the bulk data for the residual structure) for
assembly jobs and are ignored if they are input in external superelement creation jobs or if they are in the
BEGIN SUPER section of the input file for any superelement other than the residual structure.
RGYRO
The RGYRO entry in Bulk Data includes identification number (RID) that is selected by the Case Control
command. Multiple R GYRO entries with same RID c an be selected at a time, and any in the input file, which
do not have the RID from the RGYRO command, are ignored.  This card also specifies whether the analysis
is synchronous or asynchronous analysis using the “SYNCFLG” field. This information is a required input
for frequency response and complex modes analyses. In case of multiple rotors present in the analysis, the
“REFROTR” field specifies the reference rotor ID for the analysis. The “SPUNIT” field specifies whether
the entries SPDLOW, SPDHIGH, and SPEED are given in terms of RPM (revolutions/minute) or frequency
(revolutions (cycles)/unit time). When there is a Case Control request for a Campbell diagram, the selected
RGYRO Bulk Data entry must have the ASYNC option specified in its SYNCFLG field.
The second row defines whirl frequency for calculation of rotor damping and circulation terms for rotor
structural damping specified through GR field for asynchronous complex eigenvalue analysis only. In case any
of the whirl frequency parameters (WR3WRL) are defined along with corresponding damping parameter
(WR3 or WR3R), an appropriate FATAL message is produced. For more information see,
RGYRO .
Specifies synchronous or asynchronous analysis, reference rotor, and rotation speed of the reference rotor.
Format:RGYRO Rotordynamic Analysis Parameters
1 2 3 4 5 6 7 8 9 10
RGYRO RID SYNCFLG REFROTR SPDUNIT SPDLOW SPDHIGH SPEED ROTRSEID
WR3WRL WR4WRL WRHWRL&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Bulk Data Entries148
Main Index
REFROT
Since multiple RGYRO definitions (meaning multiple reference rotors) are allowed, the REFROT entry
defines the reference rotor id for non-reference rotors which are defined in residual structure (SE 0). All
REFROT bulk data entries with RID will be invoked for any subcase having RGYRO=RID case control
command. Multiple REFROT entries with same RID are allowed. Rotor id used as REFROTID (in 3rd field)
should have a valid RGYRO entry. REFROTID should match the RGYRO&amp;rsquo;s REFROTR (4th field). The 9th
field in that RGYO entry should be 0 or blank (meaning REFROTR rotor should be in residual).
REFRTSE
Since multiple RGYRO definitions (meaning multiple reference rotors) are allowed, the REFRTSE entry
defines the reference rotor id for non-reference rotors in any superelement. The REFRTSE bulk data entry
with RID will be invoked for subcase having RGYRO=RID case control command. Multiple REFRTSE
entries with same RID are allowed. The rotor id used as REFROTID (in 3rd field) and its superelement ID
used as REFROTSE (in 4th field) should have a valid RGYRO entry. Meaning, REFROTID field should
match RGYRO&amp;rsquo;s REFROTR (4th field) and REFROTSE entry should match with same RGYRO&amp;rsquo;s
ROTRSEID (9th field). Specifies the reference rotor for non-reference rotors.
Format:
orREFROT Defines the reference rotor for non-reference rotors in the residual  structure (SE 0), applicable
only for Complex Eigenvalue analysis (SOL 107 / 110 / 200 / 400 (ANALYSIS=DCEIG/MCEIG))
1 2 3 4 5 6 7 8 9 10
REFROT RID REFROTID NFROTID1 NFROTID2 NFROTID3 NFROTID4 NFROTID5 NFROTID6
NFROTID7 NFROTID8 -etc.-
1 2 3 4 5 6 7 8 9 10
REFROT RID REFROTID NFROTID1 THRU NFROTIDn BY INC
Specifies the reference rotor for non-reference rotors in superelements.
Format :REFRTSE Define the reference rotor for non-reference rotors in any superelement, applicable only for
Complex Eigenvalue analysis (SOL 107 / 110 / 200 / 400 (ANALYSIS=DCEIG/MCEIG))
1 2 3 4 5 6 7 8 9 10
REFRTSE RID REFROTID REFROTSE NFROTID1 NFROTSE1 NFROTID2 NFROTSE2 NFROTID3
NFROTSE2 NFROTID4 NFROTSE4&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>User&#39;s Manual P9</title>
      <link>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_009/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>//uildDrafts:1313/docs/rotordynamics_user_guide/msc_nastran_2024.1_rotordynamics_user_guide_009/</guid>
      <description>
        
        
        &lt;p&gt;149 Chapter 5: Rotor Usage
Bulk Data Entries
Main Index
RSPINR
The RSPINR entry specifies the relative spin rates between rotors and identifies the axis of rotation for
complex eigenvalue, frequency response, and static analysis. The positive spin direction is defined using the
right-hand rule from Grid A to Grid B. For each rotor defined in the model (either in the residual structure
or in a superelement), a corresponding RSPINR entry is required. For rotor defined in an external
superelement, GRIDA and GRIDB specified on the RSPINR must be part of the SEs ASET during creation
run. This requirement is relaxed for rotors defined in PART superelement.&lt;br&gt;
If SPTID is a real number, the value is considered constant. The SPTID field specifies relative spin rate. If
SPTID is real, it is used directly as scaling factor for rotor speed. For a reference rotor identified using a
RGYRO entry, the speed of the rotor is equal to that defined in RGYRO entry itself. For a rotor which is not
a reference rotor, the speed is calculated based on the ratio of SPDIT entry of its RSPINR entry to SPDIT
field of its reference rotor RSPINR entry, times reference rotor speed from the RGYRO entry.
Example 1:
$&amp;mdash;&amp;mdash;-2&amp;mdash;&amp;mdash;-3&amp;mdash;&amp;mdash;-4&amp;mdash;&amp;mdash;-5&amp;mdash;&amp;mdash;-6&amp;mdash;&amp;mdash;-7&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;-9&amp;mdash;&amp;mdash;
$RSPINR ROTORID GRIDA   GRIDB   SPDUNT  SPDIT   ROTRSEID
$       GR      ALPHAR1 ALPHAR2 WR3R    WR4R    WRHR
RSPINR  40      2       1       RPM     2.0
0.1
RSPINR  50      4       5       RPM     3.0
0.1
RSPINR  70      10      12      RPM     1.0
0.1
$&amp;mdash;&amp;mdash;-2&amp;mdash;&amp;mdash;-3&amp;mdash;&amp;mdash;-4&amp;mdash;&amp;mdash;-5&amp;mdash;&amp;mdash;-6&amp;mdash;&amp;mdash;-7&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;-9&amp;mdash;&amp;mdash;
$RGYRO  RID     SYNCFLG REFROTR SPRUNIT SPDLOW  SPDHIGH SPEED   ROTRSEID
$       WR3WRL  WR4WRL  WRHWRL
RGYRO   33      ASYNC   70      RPM                     3000.0
0.07            0.07
i.reference rotor id 70, speed = 3000 RPM
ii.non-reference rotor id 40, speed = 2.0/1.0 * 3000 = 6000 RPM
iii.non-reference rotor id 50, speed = 3.0/1.0 * 3000 = 9000 RPM
*** USER INFORMATION MESSAGE 11152 (ROTDR2)
For SOL107 analysis with RGYRO ID 33 call, having ASYNC option,
ROTOR with ID 40 in SEID 0, is having SPIN SPEED = 6.000000E+03 RPM&lt;/p&gt;
&lt;p&gt;*** USER INFORMATION MESSAGE 11152 (ROTDR2)&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Bulk Data Entries150
Main Index
For SOL107 analysis with RGYRO ID 33 call, having ASYNC option,
ROTOR with ID 50 in SEID 0, is having SPIN SPEED = 9.000000E+03 RPM&lt;/p&gt;
&lt;p&gt;*** USER INFORMATION MESSAGE 11152 (ROTDR2)
For SOL107 analysis with RGYRO ID 33 call, having ASYNC option,
ROTOR with ID 70 in SEID 0, is having SPIN SPEED = 3.000000E+03 RPM
Example 2:
$&amp;mdash;&amp;mdash;-2&amp;mdash;&amp;mdash;-3&amp;mdash;&amp;mdash;-4&amp;mdash;&amp;mdash;-5&amp;mdash;&amp;mdash;-6&amp;mdash;&amp;mdash;-7&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;-9&amp;mdash;&amp;mdash;-
$RSPINR ROTORID GRIDA   GRIDB   SPDUNT  SPDIT   ROTRSEID
$       GR      ALPHAR1 ALPHAR2 WR3R    WR4R    WRHR
RSPINR  40      2       1       RPM     2.0
0.1
RSPINR  50      4       5       RPM     3.0
0.1
RSPINR  70      10      12      RPM     2.0
0.1
$&amp;mdash;&amp;mdash;-2&amp;mdash;&amp;mdash;-3&amp;mdash;&amp;mdash;-4&amp;mdash;&amp;mdash;-5&amp;mdash;&amp;mdash;-6&amp;mdash;&amp;mdash;-7&amp;mdash;&amp;mdash;-8&amp;mdash;&amp;mdash;-9&amp;mdash;&amp;mdash;-
$RGYRO  RID     SYNCFLG REFROTR SPRUNIT SPDLOW  SPDHIGH SPEED   ROTRSEID
$       WR3WRL  WR4WRL  WRHWRL
RGYRO   33      ASYNC   70      RPM                     3000.0
0.07            0.07
i.reference rotor id 70, speed = 3000 RPM
ii.non-reference rotor id 40, speed = 2.0/2.0 * 3000 = 3000 RPM
iii.non-reference rotor id 50, speed = 3.0/2.0 * 3000 = 4500 RPM
*** USER INFORMATION MESSAGE 11152 (ROTDR2)
For SOL107 analysis with RGYRO ID 33, having ASYNC option,
ROTOR with ID 40 in SEID 0, has SPIN SPEED = 3.000000E+03 RPM&lt;/p&gt;
&lt;p&gt;*** USER INFORMATION MESSAGE 11152 (ROTDR2)
For SOL107 analysis with RGYRO ID 33, having ASYNC option,
ROTOR with ID 50 in SEID 0, has SPIN SPEED = 4.500000E+03 RPM&lt;/p&gt;
&lt;p&gt;*** USER INFORMATION MESSAGE 11152 (ROTDR2)
For SOL107 analysis with RGYRO ID 33, having ASYNC option,&lt;/p&gt;
&lt;p&gt;151 Chapter 5: Rotor Usage
Bulk Data Entries
Main Index
ROTOR with ID 70 in SEID 0, has SPIN SPEED = 3.000000E+03 RPM
If SPTID is an integer number, the value references a DDVAL entry that specifies the relative rotor spin rates.
The number of spin rates for each rotor must be the same. Relative spin rates are determined by correlation
of table entries. The ith entry for each rotor specifies the relative spin rates between rotors at RPM i/FREQ i.
Spin rates for the reference rotor must be in ascending or descending order. Based on the value provided for
SPTID, the expression for rotor speed in terms of reference rotor speed is given by:
Ω = α + βΩref
where α and β are determined by a least-mean-square fit of the relative rotor speeds input on the RSPINR
between SPDLOW and SPDHIGH of the reference rotor (specified using RGYRO entry), and Ωref is the
rotor speed for reference rotor.
The RSPINR entry is also used to specify damping options and structural damping parameters for the rotor
(except Hybrid damping). The WR3R, WR4R and WRHR parameters specify “average” excitation
frequency for calculation of rotor damping and circulation terms for rotor structural damping specified
through GR field, through material entries and through hybrid damping card ROTHYBD, respectively. The
rotor damping is included in the analysis as described in Chapter 4. For more information see, RSPINR .
RSPINT
The RSPINT entry performs similar function as RSPINR for transient analysis. For transient analysis, the
SPTID field references a TABLED1 entry that specifies the rotor spin rate history.  For more information see,
RSPINT .Specifies the relative spin rates between rotors for complex eigenvalue, frequency response, and static
analysis.
Format:RSPINR Relative Spin Rates Between Rotors
1 2 3 4 5 6 7 8 9 10
RSPINR ROTORID GRIDA GRIDB SPDUNT SPTID ROTRSEID
GR ALPHAR1 ALPHAR2 WR3R WR4R WRHR&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Bulk Data Entries152
Main Index
ROTHYBD
This entry is used to introduce hybrid damping option for rotors. The ROTORIDi – HYBDAMPi pair
values referencing nonexistent rotors are ignored. Hybrid damping can result in very densely populated
damping matrix causing significant performance penalty. Details about the matrices generated hybrid
damping is given in HYBDAMP card in QRG.  For more information see, ROTHYBD .
CAMPBLL
This entry is required for the generation of a Campbell Diagram using complex eigenvalue analysis. The
CAMPBLL option is supported in both SOL 107 and SOL 110. It is also supported in SOL 400 for
ANALYSIS=DCEIG and ANALYSIS=MCEIG. The rotor speed at which the complex eigenvalue analysis
needs to be performed for a Campbell Diagram are specified using the DDVALID field and appropriate
speed units in the TYPE field .
In V2018, two different approaches were implemented for mode tracking while generating Campbell
diagram. In both the methods, only the complex frequencies with a positive imaginary part are considered
for mode tracking.Specifies rotor spin rates for transient analysis.
Format:RSPINT Rotor Spin Rates
1 2 3 4 5 6 7 8 9 10
RSPINT ROTORID GRIDA GRIDB SPDUNT SPTID SPDOUT ROTSEID
GR ALPHAR1 ALPHAR2 WR3R WR4R WRHR
Specifies hybrid damping data for rotors.
Format:ROTHYBD Hybrid damping for rotors
1 2 3 4 5 6 7 8 9 10
ROTHYBD ROTORID1 HYBDAMP1 ROTORID2 HYBDAMP2&lt;/p&gt;
&lt;p&gt;153 Chapter 5: Rotor Usage
Bulk Data Entries
Main Index
Numerical Approach
This method is used for mode tracking once the eigenvalues have been extracted for all the rotor speeds
defined for analysis using CAMPBLL and DDVAL bulk data entries. For each rotor speed, the second
derivative is computed using the central difference approach.
Eigenvector-Based Approach
Unlike the numerical approach, here both left and right eigenvectors associated with complex eigenvalues are
used for mode tracking. The method implemented is described in detail in Reference 2. As described in the
paper, Normalized Cross Complex Orthogonality (NC2O) parameter is computed for each pair frequencies
for two rotor speeds. Since V2018,  the eigenvector based mode tracking approach is available for analysis in
FIXED reference frame only when HESS option is used in EIGC for eigenvalue extraction. Due to
limitations of the HESS option when working with large size models without a reduction, the use of SOL
110 or a superelement based reduction approach is recommended for analyzing large rotor models.
For more information see, CAMPBLL .
Specifies the parameters for Campbell diagram generation.
Formats:CAMPBLL Campbell Diagram Parameters
1 2 3 4 5 6 7 8 9 10
CAMPBLL CID VPARM DDVALID TYPE
MODTRK CORU SWTTR NUMMOD PRTCOR
CAMPBLL 15 SPEED 22 RPM
1 0.75 1&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Bulk Data Entries154
Main Index
DDVAL
This entry is required for generating a Campbell diagram, and it defines real rotor speed for asynchronous
complex eigenvalue analysis. For more information see, DDVAL .
UNBALNC
The UNBALNC entry is used to define rotating unbalanced loads for rotordynamic transient and frequency
response analysis. For transient response, UNBALNC is specified by the RGYRO Case Control command.
For frequency response, it is specified by the DLOAD Case Control command. The imbalance load will be
generated based on the mass value (Field “MASS”), offset values (Field “ROFFSET” and “ZOFFSET”), and
the rotor spin speed specified using RGYRO and RSPINR/RSPINT.  UNBALNC can be applied on
reference and/or non-reference rotor, for frequency response SYNC analysis only. For other type of analysis,
it is advised to define the rotor having UNBALNC as the reference rotor.
In the case of ROFFSET field, if the entry is a real number, the value is considered constant. If the entry is
an integer number, the value references a TABLEDi entry that specifies the value as a function of time for
transient response or frequency for frequency response. The Theta is measured from the plane defined by the
z-axis and the user specified vector (X1, X2, X3). Theta = 0.0 is in the direction of the user-specified vector
(X1, X2, X3). Unbalance rotation is in the positive z-direction.
For frequency response analysis, the EPOINTs and the continuation cards are ignored . For transient analysis
in fixed reference frame, CFLAG field can be used include mass correction or speed correction or both
corrections in the analysis. The EPOINTS specified in the fourth and fifth row on the UNBALNC entry can
be used to extract these correction forces and moments. For more information see, UNBALNC .Defines real, discrete design variable values for use in discrete variable optimization, topometry optimization
or rotordynamics.
Format:DDVAL Discrete Design Variable Values
1 2 3 4 5 6 7 8 9 10
DDVAL ID DVAL1 DVAL2 DVAL3 DVAL4 DVAL5 DVAL6 DVAL7&lt;/p&gt;
&lt;h1&gt;155 Chapter 5: Rotor Usage
Bulk Data Entries
Main Index
Forces due to imbalance at grid “k” in rotor coordinate system for transient analysis are given by (where the
rotor axis is along Z axis):
where
m(t) Specified by the user (MASS field in UNBALNC)
r(t) Specified by the user (ROFFSET field in UNBALNC)
Specified by the user through RSINT/RSPINR entry
Derived from
Instantaneous angular location, measured from axis 1 to axis 2 (= )
Specified by the user (THETA field in UNBALNC)
j Rotor on which the grid is locatedUsed in rotordynamic analyses to specify a rotating unbalance load in terms of a cylindrical system with the
rotor rotation as the z-axis.
Format:UNBALNC Specifies an Unbalanced Load for Rotordynamic Transient or Frequency Response
Analysis
1 2 3 4 5 6 7 8 910
UNBALNC SID MASS GRID X1 X2 X3
ROFFSET THETA ZOFFSET T/Fon T/FOFF CFLAG
UFT1 UFT2 UFT3 UFR1 UFR2 UFR3
MCT1 MCT2 MCT3 MCR1 MCR2 MCR3
SCR1 SCR2 SCR3
Fxt
FytWTMASSmtrtj2tjkt cos ·
jtjt sin +  
mtrtj2tjkt sin ·
jtjt cos –       &lt;/h1&gt;&lt;p&gt;jt
()jt ()jt
jkt jttd
0k+
k&lt;/p&gt;
&lt;h1&gt;MSC Nastran Rotordynamics User’s Guide
Bulk Data Entries156
Main Index
In the rotating coordinate system, similar equation for unbalance loads is used.
Correction terms for transient analysis in fixed reference frame
When the CFLAG field is prescribed in the UNBALNC entry, additional correction loads are also generated
in addition to the standard unbalance loads. These correction loads include contribution from unbalance
mass to the inertia and gyroscopic terms in the analysis .
where displacements are transformed from the global to rotor-force coordinate. The above correction
accounts for the change in the translation mass due to the imbalance mass (CFLAG = ‘MASS’).
Similarly, the correction to moments is given by:
where  is the finite rotation about the i-axis.
In the above equation, the first correction term accounts for the change in rotational inertia  due to the
imbalance mass, the second term corrects the gyroscopic matrix , BG. These terms are added if CFLAG on the
UNBALNC entry is ‘MASS’ or ‘BOTH’.  The third term corrects the tangent matrix , KT. This term is added if
CFLAG is ‘SPEED’ or ‘BOTH.
The forces and moments are transformed from the rotor-force coordinate system using the transformation
matrix stored on the UNBALNC entry.
For frequency response analysis, the unbalance load in fixed reference frame given by:
For frequency response analysis, the unbalance load in rotating reference frame given by:Fxt
Fyt
rotWTMASSmtrtj2tkcos
mtrtj2tksin     &lt;/h1&gt;&lt;h1&gt;Fxt
Fyt
Fzt
CorrFxt
Fyt
0
WTMASS-mktu··xt
-mktu··yt
-mktu··zt      
 + =
Mxt
Myt
Mzt
CorrMxt
Myt
0
WTMASS-mktrktjkt sin 2··
xt2j·
xt·
jxt + +  
-mktrktjkt cos 2··
yt2j·
yt – ·
jyt –  
-mktrk2t··
zt        
 + =

Fx
FyWTMASSmr2kcos iksin+ 
mr2ksin ikcos –      &lt;/h1&gt;&lt;p&gt;157 Chapter 5: Rotor Usage
Bulk Data Entries
Main Index
The moment due to ZOFFSET is given by,Fx
FyWTMASSmr2kcos
mr2ksin     
 =
Mx
MyF–yZOFFSET 
FxZOFFSET    =&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Bulk Data Entries158
Main Index&lt;/p&gt;
&lt;p&gt;Main Index
Chapter 6: Rotor Dynamics Example with Patran
MSC Nastran Rotordynamics User’s Guide
6Rotor Dynamics Example
with Patran
Introduction      160
Patran  Setup     160
Example Model      161
Step 1: Initial ize Patran      162
Step 2: Create Geometric Model      163
Step 3: Defin e a Ma terial s     164
Step 4: Defin e Beam P roperties      165
Step 5: Genera te a Finite Element Me sh     168
Step 6: Constrain  the Model     171
Step 7: Define a R otor     173
Step 8: Set  Up the Analysis      175
Step 9: Run M SC Nastran      179
Step 10: Plot M ode Shapes     180
Step 11: Generat e a C ampbell Diagram      185&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Introduction160
Main Index
Introduction
MSC Nastran rotor dynamics users, are encouraged to use Patran for developing and analyzing rotor dynamic
models. In this chapter , creation and the analysis of a simple rotor model is illustrated using Patran as the pre-
and post -processing tool .
Patran Setup
If you are new to Patran,  here is a little configuration trick that is particular to Windows and may help
organize many more models that you may b uild now and in the future. Find the Patran icon on your system ,
usually on the desktop (illustration is shown with Patran 2023.4).
Right-click on the i con and hold the button down as you d rag and d rop it into the d esired working directory&lt;br&gt;
in a File Explorer window.  Then l eft-click on Create shortcut here . For this example, we chose
C:\SCRATCH.
Figure 6-1  Customizing Patran Setup
Now, right-click on this newly created shortcut to Patran and left-click Properties  from the pull down menu .
Delete the path in the Start in: field which is the one that was chosen during installation on your system. So
the Start in:  field should now be blank as shown. Click OK.
Now,  every time you start Patran from this particular shortcut, the default directory will be C:\SCRATCH.&lt;br&gt;
While one could alternatively manage Patran’s default directory, this shortcut technique is found to be very
useful.
Clear this data box.&lt;/p&gt;
&lt;p&gt;161 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Example Model
As a first example, a hy pothetical hollow cantilever rotor model is developed using Patran. The hollow rotor
is 0.5m  long, and has an inner diameter of 0.05m  and outer diameter of 0.1m , as shown in Figure 6-2. The
rotor is made up of steel  and is spinning at 10,000 RPM . In this example, the rotor is modeled using five ( 5)
CBEAM elements  and Node 1 is constrained.
Figure 6-2  Example hollow rotor model
The main steps involved in develop ing a P atran model  are described is subsequent s ections. Steps one (1)
through six (6)  are standard for any MSC Nastran model and further details about these steps are available
in the MSC Nastran’s Linear Statics Users Guide and in the MSC Nastran’s Dynamics User`s Guide. Step
seven ( 7) and eight (8)  are required only if the model contains rotors. In this example the rotor is d efined
using ROTORG .
For post-processing, Patran supports generation of mode shapes and animations for the eigenvectors in
complex eigenvalue analysis. If the input file includes an option for generating a Campbell Diagram, it also
can be plotted. These features are described in Steps 10 and 11. Step 1 Initializ e Patran
Step 2 Create Geometric Model
Step 3 Defin e a Ma terial
Step 4 Defin e Beam Properties
Step 5 Generat e a Finite Element Mesh
Step 6 Constraints the Mo del
Step 7 Define a Ro tor
Step 8 Set Up  the An alysis
Step 9 Run M SC Nastran
Step 10 Plot Mo de Shapes
Step 11 Generate C ampbell Diagram&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model162
Main Index
Step 1: Initial ize P atran
1.Double-click the Patran shortcut wherever you created it.
2.Select File menu  -&amp;gt; New and specify File name: to be rotor. Click OK.
Before any actions can be carried out, Patran requires the definition of a database. Notice how the directory
defaults to the working directory, if you followed the setup instructions above,  see Figure 6-3.
Figure 6-3  Create P atran Database File
3.In the New Model Preference tab, select Tolerance -&amp;gt; Default, as shown in Figure 6-4. Click OK
Figure 6-4  Set Up Mo del Tolerance&lt;/p&gt;
&lt;p&gt;163 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Step 2: Create Geometric Model
1.Click the Geometry  tab
2.Select Curves  | Line By XYZ  (see Figure 6-5(a))
The previous two steps populate the Geometry tool with the following choices: Action: Create , Object:
Curve , and Method: XYZ as shown in Figure 6-5(b). Alternatively, the same Action-Object-Method sequence
can be obtained by using the individual drop  down menus within the Geometry tool on the right.
Figure 6-5  Creating Geometry
3.Specify the length of the rotor, which measures 0.5 meters (see Figure 6-5(b)). Accepting MSC
Nastran’s basic coordinate system, specify a line from the origin to the &lt;!-- raw HTML omitted --&gt; coordinate &amp;lt;0.5 0 0&amp;gt;.
(see Figure 6-5(b))
4.Click Apply.
Patran now shows this line in the GUI, as shown in Figure 6-6.
Figure 6-6  Line Geometry
1
2
2 3
4
a b&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model164
Main Index
Step 3: Defin e a Ma terial s
1.Begin defining the rotor’s material and section properties by clicking the Properties  tab and the n the
Isotropic  button in succession, see Figure 6-7.
Figure 6-7  Main Menu to Define Material s
This action invokes the Materials application,  as shown in Figure 6-8.
2.Specify the Material Name  as ‘steel’ as shown in Figure 6-8.
3.Click the Input Properties button and specify Elastic Modulus  (210.e9), Poisson’s Ratio  (.3) and
Density  (7810.) as shown in Figure 6-8.
4.Click OK to close the Input Options form.
5.Click Apply  in the Materials tool.
Patran relies heavily on the Apply  button and you want to be certain to click it here and every time you define
something new in your model. If you are working with a limited screen resolution, you might need to scroll
down to find the Apply  button. Check that the material steel  should now be listed among your listing of
Existing Materials  as shown in Figure 6-9.
Figure 6-8  Entering Material Properties
11
12
3
4&lt;/p&gt;
&lt;p&gt;165 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-9  Material Property Definition
Step 4: Defin e Beam P roperties
1.On the Properties tab click o n the Beam icon w ithin the 1 D Properties tool group as shown in
Figure 6-10. This brings up the Element Properties application.
Figure 6-10  Main Menu to Define Beam Properties
2.Specify beam_prop  as the property name i n the Property Set Name  field, see Figure 6-11.
3.Select General Section (CBEAM)  option in the Options:  drop  down.
4.Click the Input Properties  button , place the cursor in the Material Name  field and click the Mat
Prop Name  icon to open the Select Material interface. Select the previously defined steel entry and
verify that the Material Name  field now contains m:steel .
5.The Bar Orientation  indicates the bending direction of the beam. Since our beam is directed along
the x-axis, we can either specify Y (i.e. vector &amp;lt;0 .,1.,0 .&amp;gt;), as shown, or Z (i.e. vector &amp;lt;0 .,0.,1.&amp;gt;. The Y&lt;br&gt;
direction is selected as the bending direction by specifying vector &amp;lt;0 .,1.,0.&amp;gt; in the Bar Orientation&lt;br&gt;
field.
6.Since the rotor is represented by a hollow tube, we use the built-in beam library for convenience.
Access the Beam Library by clicking its icon. The form t hat opens is shown in Figure 6-12.
7.The “less than” and “greater than” icons allow you to scroll through the library. The first click on the
“greater than” icon reveals the appropriate  parametric representation of a hollow tube in the top left
corner .
1&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model166
Main Index
8.Click on the hollow cross section icon and specify the New Section Name  as rotor_section .
9.Enter the values for the respective outer and inner radii R1 = 0.1 and R2  = 0.05.
10. Click the Apply  button to save this particular section among the Existing Sections in this model.
11. Click the Calculate/Display  button to verify the beam section. This presents cross sectional details,
as shown in Figure 6-13.
12. Close the Section Display  window  by clicking on the x icon.
13. Click OK to close the Beam Library  window.
Notice that rotor_section  now populates the [Section Name]  field, as shown in Figure 6-14.
14. Click OK to close the Input Properties  window.
15. Press the Apply button on the Element Properties  form to create the beam property.
Notice that beam_prop  now populates the list box of existing properties, as shown in Figure 6-14.
Figure 6-11  Defining Beam Properties
2
34
45
6
14&lt;/p&gt;
&lt;p&gt;167 Chapter 6: Rotor Dynamics Example with Patran
Example Model
Main Index
Figure 6-12  Options to Select Beam Cross Section
Figure 6-13  Cross Section for the Hollow Beam
78
89
13 1011
12&lt;/p&gt;
&lt;p&gt;MSC Nastran Rotordynamics User’s Guide
Example Model168
Main Index
Figure 6-14  Final Beam Properties
Step 5: Genera te a Finite Element Me sh
1.Click the Meshing (Finite Elements Application) tab to start the meshing process. In order to obtain
a uniform mesh and control the meshing process, mesh seeds will be generated first and then beam
elements will be generated. (see Figure 6-15)
2.Set Action: Create , Object: Mesh Seed , Type: Uniform . Then enter five (5) a s the number of mesh
seeds to be defined along the curve since we are planning to generate five ( 5) beam elements. And
finally define the curve where the mesh seeds need to be generated by typing Curve 1  in the data box
(or select the curve from the graphics screen when the cursor has activated this data box ( see
Figure 6-16). Now, we will generate the actual mesh for the curve.
Figure 6-15  Main Menu to Generate Finite Element Mesh
13
14
1515
1&lt;/p&gt;

      </description>
    </item>
    
  </channel>
</rss>
